/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! Statesman - v0.2.0 - 2013-06-28
* The JavaScript state management library

* 
* Copyright (c) 2013 Rich Harris; MIT Licensed */

/*! Ractive - v0.3.0 - 2013-06-30
* Faster, easier, better interactive web development

* http://rich-harris.github.com/Ractive/
* Copyright (c) 2013 Rich Harris; Licensed MIT */

// These are a subset of the easing equations found at
// https://raw.github.com/danro/easing-js - license info
// follows:

// --------------------------------------------------
// easing.js v0.5.4
// Generic set of easing functions with AMD support
// https://github.com/danro/easing-js
// This code may be freely distributed under the MIT license
// http://danro.mit-license.org/
// --------------------------------------------------
// All functions adapted from Thomas Fuchs & Jeremy Kahn
// Easing Equations (c) 2003 Robert Penner, BSD license
// https://raw.github.com/danro/easing-js/master/LICENSE
// --------------------------------------------------

!function(){var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,r,a,s,o,l,u,c,h,d=e&&e.split("/"),p=m.map,f=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=d.concat(t.split("/")),u=0;u<t.length;u+=1)if(h=t[u],"."===h)t.splice(u,1),u-=1;else if(".."===h){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||f)&&p){for(n=t.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),d)for(c=d.length;c>0;c-=1)if(r=p[d.slice(0,c).join("/")],r&&(r=r[i])){a=r,s=u;break}if(a)break;!o&&f&&f[i]&&(o=f[i],l=u)}!a&&o&&(a=o,s=l),a&&(n.splice(0,s,a),t=n.join("/"))}return t}function i(e,n){return function(){return c.apply(t,y.call(arguments,0).concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function a(t){return function(e){p[t]=e}}function s(n){if(e(f,n)){var i=f[n];delete f[n],g[n]=!0,u.apply(t,i)}if(!e(p,n)&&!e(g,n))throw new Error("No "+n);return p[n]}function o(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var u,c,h,d,p={},f={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(t,e){var i,a=o(t),l=a[0];return t=a[1],l&&(l=n(l,e),i=s(l)),l?t=i&&i.normalize?i.normalize(t,r(e)):n(t,e):(t=n(t,e),a=o(t),l=a[0],t=a[1],l&&(i=s(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:i}},d={require:function(t){return i(t)},exports:function(t){var e=p[t];return"undefined"!=typeof e?e:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:l(t)}}},u=function(n,r,o,l){var u,c,m,v,y,b,w=[];if(l=l||n,"function"==typeof o){for(r=!r.length&&o.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],l),c=v.f,"require"===c)w[y]=d.require(n);else if("exports"===c)w[y]=d.exports(n),b=!0;else if("module"===c)u=w[y]=d.module(n);else if(e(p,c)||e(f,c)||e(g,c))w[y]=s(c);else{if(!v.p)throw new Error(n+" missing "+c);v.p.load(v.n,i(l,!0),a(c),{}),w[y]=p[c]}m=o.apply(p[n],w),n&&(u&&u.exports!==t&&u.exports!==p[n]?p[n]=u.exports:m===t&&b||(p[n]=m))}else n&&(p[n]=o)},requirejs=require=c=function(e,n,i,r,a){return"string"==typeof e?d[e]?d[e](n):s(h(e,n).f):(e.splice||(m=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},"function"==typeof i&&(i=r,r=a),r?u(t,e,n,i):setTimeout(function(){u(t,e,n,i)},4),c)},c.config=function(t){return m=t,m.deps&&c(m.deps,m.callback),c},define=function(t,n,i){n.splice||(i=n,n=[]),e(p,t)||e(f,t)||(f[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("domReady",[],function(){function t(t){var e;for(e=0;e<t.length;e+=1)t[e](u)}function e(){var e=c;l&&e.length&&(c=[],t(e))}function n(){l||(l=!0,s&&clearInterval(s),e())}function i(t){return l?t(u):c.push(t),i}var r,a,s,o="undefined"!=typeof window&&window.document,l=!o,u=o?document:null,c=[];if(o){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),a=document.createElement("div");try{r=null===window.frameElement}catch(h){}a.doScroll&&r&&window.external&&(s=setInterval(function(){try{a.doScroll(),n()}catch(t){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(t,e,n,r){r.isBuild?n(null):i(n)},i}),function(t){var e,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,v,y,b,w,x={},_={},k={};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),b=Object.defineProperty,w=Object.defineProperties}catch(N){b=function(t,e,n){t[e]=n.value},w=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&b(t,n,e[n])}}!function(){var t=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(n,i,r){var a,s,o,l;return r=r||"",a=[],s=n.replace(t,function(t,e){return-1===a.indexOf(e)&&(a[a.length]=r+e),'m.get("'+e+'")'}),o=new Function("utils","var m=this;try{return "+s+"}catch(e){return undefined}"),l=o.bind?o.bind(i,e.utils):function(){return o.call(i,e.utils)},{getter:l,triggers:a}}}(),e=function(t){w(this,{data:{value:t||{},writable:!0},subs:{value:{},writable:!0},cache:{value:{}},cacheMap:{value:{}},deps:{value:{}},depsMap:{value:{}},refs:{value:{}},refsMap:{value:{}},computed:{value:{}},subsets:{value:{}},deferred:{value:[]},changes:{value:null,writable:!0},upstreamChanges:{value:null,writable:!0},changeHash:{value:null,writable:!0}})},x.add=function(t,e){var n=this.get(t);void 0===e&&(e=1),o(n)&&o(e)&&this.set(t,+n+(void 0===e?1:+e))},function(t){var e,n,i,a;t.compute=function(t,n){var i,r,a;if("object"==typeof t){i={};for(r in t)t.hasOwnProperty(r)&&(a=new e(this,r,t[r]),i[r]=a.value);return i}return a=new e(this,t,n),a.value},e=function(t,e,a){var s;for(t.computed[e]&&t.computed[e].teardown(),this.statesman=t,this.keypath=e,t.computed[e]=this,"string"==typeof a?a=r(a,t):("function"==typeof a&&(a=a()),i(e,a,t.debug)),this.signature=a,this.cache=a.cache,this.refs=[],s=a.dependsOn.length,1===s&&(this.selfUpdating=!0);s--;)this.refs[s]=new n(this,a.dependsOn[s]);this.setting=!0,t.set(this.keypath,this.value=this.getter()),this.setting=!1},e.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.statesman.deferred.push(this),this.deferred=!0)},update:function(){var t;return t=this.getter(),s(t,this.value)||(this.setting=!0,c(this.statesman,this.keypath,t),this.setting=!1,this.value=t),this},getter:function(){var t,e,n;try{if(this.signature.compiled)n=this.signature.compiled();else{for(e=[],t=this.refs.length;t--;)e[t]=this.refs[t].value;n=this.signature.get.apply(this.context,e)}}catch(i){if(this.statesman.debug)throw i;n=void 0}return this.override=!1,n},setter:function(t){if(this.signature.set)try{this.signature.set.call(this.context,t)}catch(e){if(this.statesman.debug)throw e}else if(this.signature.readonly){if(this.statesman.debug)throw new Error('You cannot overwrite a computed value ("'+this.keypath+'"), unless its readonly flag is set true')}else this.override=!0,this.setting=!0,this.statesman.set(this.keypath,t),this.setting=!1},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown(),this.statesman.computed[this.keypath]=null}},n=function(t,e){this.computed=t,this.statesman=t.statesman,this.keypath=e,this.value=this.statesman.get(e),v(this,!0)},n.prototype={update:function(){var t;t=this.statesman.get(this.keypath),s(t,this.value)||(this.value=t,this.computed.bubble())},teardown:function(){y(this,!0)}},a=[],i=function(t,e,n){if(!e.compiled){if(!e.get&&!e.set)throw new Error("Computed values must have either a get() or a set() method, or both");if(e.set||e.readonly===!1||(e.readonly=!0),e.dependsOn?"string"==typeof e.dependsOn&&(e.dependsOn=[e.dependsOn]):e.dependsOn=a,!e.dependsOn.length){if(e.cache&&n)throw new Error("Computed values with no dependencies must be uncached");e.cache=!1}e.cache!==!1&&(e.cache=!0)}if(-1!==e.dependsOn.indexOf(t))throw new Error('A computed value ("'+t+'") cannot depend on itself');return e}}(x),x.get=function(t){return h(this,t&&l(t))};var h=function(t,e,n,i){var r,a,s,o,l;return e?((r=t.computed[e])&&(i||r.cache||r.override||(t.cache[e]=r.getter())),t.cache.hasOwnProperty(e)?t.cache[e]:(n=n||e.split("."),a=n.pop(),s=n.join("."),o=h(t,s,n),"object"==typeof o&&o.hasOwnProperty(a)&&(l=o[a],t.cache[e]=l,t.cacheMap[s]||(t.cacheMap[s]=[]),t.cacheMap[s].push(e)),l)):t.data};!function(t){var e;t.observe=function(t,n,i){var r,a,s,o,l;if(l=!i||i.init!==!1,"function"==typeof t&&(i=n,n=t,t=""),"string"==typeof t)return r=new e(this,t,n,i),l?r.update():r.value=this.get(t),{cancel:function(){r.teardown()}};if("object"!=typeof t)throw new Error("Bad arguments to Statesman.prototype.observe()");i=n,a=[];for(s in t)t.hasOwnProperty(s)&&(a[a.length]=new e(this,s,t[s],i));if(o=a.length,l)for(;o--;)a[o].update();else for(;o--;)a[o].value=this.get(r.keypath);return{cancel:function(){for(o=a.length;o--;)a[o].teardown()}}},e=function(t,e,n,i){this.statesman=t,this.keypath=l(e),this.callback=n,this.context=i&&i.context?i.context:t,v(this)},e.prototype={update:function(){var t;if(t=h(this.statesman,this.keypath),!s(t,this.value)){try{this.callback.call(this.context,t,this.value)}catch(e){if(this.statesman.debug)throw e}this.value=t}},teardown:function(){y(this)}}}(x),x.removeComputedValue=function(t){return this.computed[t]&&this.computed[t].teardown(),this},x.reset=function(t){return this.data={},this.set(t,{silent:!0}),this.fire("reset"),p(this,""),this},function(t){var e,n,i=/^\s*[0-9]+\s*$/;t.set=function(t,e,i){var r,a,s,o;if(this.changes=[],this.upstreamChanges=[],this.changeHash={},"object"==typeof t){i=e;for(s in t)t.hasOwnProperty(s)&&(o=l(s),e=t[s],c(this,o,e))}else o=l(t),c(this,o,e);for(r=[],a=[];this.changes.length;)n(r,this.changes),n(a,this.upstreamChanges),m(this);return i&&i.silent?this:(f(this,a,!0),r.length&&f(this,r),r.length&&this.fire("change",this.changeHash),this)},c=function(t,n,i){var r,a,s;if((s=t.computed[n])&&!s.setting)return s.setter(i),void 0;if(r=h(t,n,null,!0),r!==i)e(t.data,n,i);else if("object"!=typeof i)return;for(d(t,n),t.changes[t.changes.length]=n,t.changeHash[n]=i,a=n.split(".");a.length&&(a.pop(),n=a.join("."),!t.upstreamChanges[n]);)t.upstreamChanges[n]=!0,t.upstreamChanges.push(n)},e=function(t,e,n){for(var r,a=e.split(".");a.length>1;)r=a.shift(),t[r]||(t[r]=i.test(a[0])?[]:{}),t=t[r];t[a[0]]=n},n=function(t,e){for(var n,i=e.length;i--;)n=e[i],t["_"+n]||(t["_"+n]=!0,t[t.length]=n)}}(x),x.subset=function(t){if(!t)throw"No subset path specified";return this.subsets[t]||(this.subsets[t]=new n(t,this)),this.subsets[t]},x.subtract=function(t,e){var n=this.get(t);void 0===e&&(e=1),o(n)&&o(e)&&this.set(t,+n-(void 0===e?1:+e))},x.toggle=function(t){this.set(t,!this.get(t))},d=function(t,e){var n=t.cacheMap[e];if(delete t.cache[e],n)for(;n.length;)d(t,n.pop())},o=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},p=function(t,e,n){var i,r,a;if(i=t.deps[e])for(r=i.length;r--;)i[r].update();if(!n&&(a=t.depsMap[e]))for(r=a.length;r--;)p(t,a[r])},f=function(t,e,n){var i;for(i=e.length;i--;)p(t,e[i],n)},m=function(t){var e,n,i,r,a;for(n=t.changes,i=t.upstreamChanges,t.changes=[],t.upstreamChanges=[],e=i.length;e--;)r=i[e],g(t,r,!0);for(e=n.length;e--;)r=n[e],g(t,r);for(;t.deferred.length;)a=t.deferred.pop(),a.update(),a.deferred=!1},g=function(t,e,n){var i,r,a;if(i=t.refs[e])for(a=i.length;a--;)i[a].update();if(!n&&(r=t.refsMap[e]))for(a=r.length;a--;)g(r[a])},v=function(t,e){var n,i,r,a,s,o,l,u;for(n=t.statesman,i=t.keypath,e?(l=n.refs,u=n.refsMap):(l=n.deps,u=n.depsMap),r=l[i]||(l[i]=[]),r[r.length]=t,a=i.split(".");a.length;)a.pop(),s=a.join("."),o=u[s]||(u[s]=[]),void 0===o[i]&&(o[i]=0,o[o.length]=i),o[i]+=1,i=s},y=function(t,e){var n,i,r,a,s,o,l,u;for(n=t.statesman,i=t.keypath,e?(l=n.refs,u=n.refsMap):(l=n.deps,u=n.depsMap),r=l[i],r.splice(r.indexOf(t),1),a=i.split(".");a.length;)a.pop(),s=a.join("."),o=u[s],o[i]-=1,o[i]||(o.splice(o.indexOf(i),1),o[i]=void 0),i=s},a={total:function(t){return t.reduce(function(t,e){return t+e})}},n=function(t,e){var n,i,r=this;this.path=t,this.pathDot=t+".",this.root=e,this.subs={},n=new RegExp("^"+this.pathDot.replace(".","\\.")),i=this.pathDot.length,this.root.on("change",function(t){var e,a,s,o;s={};for(a in t)t.hasOwnProperty(a)&&n.test(a)&&(e=a.substring(i),s[e]=t[a],o=!0);o&&r.fire("change",s)})},_.add=function(t,e){this.root.add(this.pathDot+t,e)},function(t){var e;t.compute=function(t,n){var i,r;if("object"==typeof t){i={};for(r in t)t.hasOwnProperty(r)&&(i[r]=e(this,r,t));return i}return e(this,t,n)},e=function(t,e,n){var i,a=t.pathDot;if("string"==typeof n)return n=r(n,t.root,a),t.root.compute(a+e,n);if("function"==typeof n&&(n=n()),n.dependsOn)for("string"==typeof n.dependsOn&&(n.dependsOn=[n.dependsOn]),i=n.dependsOn.length;i--;)n.dependsOn=a+n.dependsOn;return n.context||(n.context=t),t.root.compute(a+e,n)}}(_),_.get=function(t){return t?this.root.get(this.pathDot+t):this.root.get(this.path)},_.observe=function(t,e,n){var i,r;if("object"==typeof t){n=e,r={};for(i in t)t.hasOwnProperty(i)&&(r[this.pathDot+i]=t[i]);return n?n.context=n.context||this:n={context:this},this.root.observe(r,n)}return"function"==typeof t?(n=e,e=t,t=this.path):t=""===t?this.path:this.pathDot+t,n?n.context=n.context||this:n={context:this},this.root.observe(t,e,n)},_.removeComputedValue=function(t){return this.root.removeComputedValue(this.pathDot+t),this},_.reset=function(t){return this.root.set(this.path,t),this},_.set=function(t,e,n){var i,r;if("object"==typeof t){n=e,r={};for(i in t)t.hasOwnProperty(i)&&(r[this.pathDot+i]=t[i]);return this.root.set(r,n),this}return this.root.set(this.pathDot+t,e,n),this},_.subset=function(t){return this.root.subset(this.pathDot+t)},_.subtract=function(t,e){this.root.subtract(this.pathDot+t,e)},_.toggle=function(t){this.root.toggle(this.pathDot+t)},i={},i.on=function(t,e){var n,i,r,a=this;if("object"==typeof t){r=[];for(i in t)t.hasOwnProperty(i)&&(r[r.length]=this.on(i,t[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[t]||(this.subs[t]=[]),n=this.subs[t],n[n.length]=e,{cancel:function(){a.off(t,e)}}},i.once=function(t,e){var n,i,r,a,s=this;if("object"==typeof t){r=[];for(i in t)t.hasOwnProperty(i)&&(r[r.length]=this.once(i,t[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[t]||(this.subs[t]=[]),n=this.subs[t],a=function(){e.apply(s,arguments),s.off(t,a)},n[n.length]=a,{cancel:function(){s.off(t,a)}}},i.off=function(t,e){var n,i;return t?e?(n=this.subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1),n.length||delete this.subs[t]),this):(delete this.subs[t],this):(this.subs={},this)},i.fire=function(t){var e,n,i,r;if(e=this.subs[t],!e)return this;for(i=e.length,n=Array.prototype.slice.call(arguments,1),r=0;i>r;r+=1)e[r].apply(this,n)},function(){var t=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(n,i,r){var a,s,o,l;return r=r||"",s=[],a=n.replace(t,function(t,e){return-1===s.indexOf(e)&&(s[s.length]=r+e),'m.get("'+r+e+'")'}),o=new Function("utils","var m=this;return "+a),l=o.bind?o.bind(i,e.utils):function(){return o.call(i,e.utils)},{compiled:l,dependsOn:s,cache:!!s.length}}}(),s=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},l=function(t){return k[t]||(k[t]=t.replace(/\[\s*([0-9]+)\s*\]/g,".$1"))},u=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},u(x,i),u(_,i),e.prototype=x,n.prototype=_,e.utils=a,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("Statesman",[],function(){return e}):t.Statesman=e}(this),define("data",[],function(){return{slides:[{styles:"h1 {\n	font-size: 3em;\n	margin: 0;\n	padding: 0 0 0.1em 0;\n	border-bottom: 1px solid #eee;\n}\n\n.Hero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 50%;\n	padding: 0.5em 5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.SubHero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	top: 50%;\n	padding: 0.5em 0.5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",slide:"<div class='Hero'>\n	<h1 intro='fly'>Engineering Delight</h1>\n</div>\n\n<div class='SubHero'>\n	<p intro='fade'><a href='http://twitter.com/rich_harris'>@rich_harris</a>, interactive developer</p>\n	<p intro='fade'>july 6 2013</p>\n</div>"},{styles:".background {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background: url(files/images/team.jpg) no-repeat 50% 50%;\n	background-size: cover;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 0;\n	padding: 1em 2em;\n\n	color: white;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.caption h2, .caption p {\n	display: inline-block;\n	padding: 0.5em;\n	margin: 0;\n	float: left;\n}\n\n.caption h2 {\n	background-color: rgba(0,0,0,0.7);\n}\n\n.caption p {\n	clear: both;\n	background-color: rgba(0,0,0,0.7);\n}",slide:"<div class='background' intro='fade' outro='fade'></div>\n\n<div class='caption' intro='fade' outro='fade'>\n	<h2>The interactive team</h2>\n	<p>A small group of developers and designers producing <em>interactive journalism</em>.</p>\n</div>"},{styles:"iframe {\n	width: 250%;\n	height: 250%;\n	overflow: hidden;\n	border: 1px solid #eee;\n	box-shadow: inset 1px 1px 3px rgba(0,0,0,0.6);\n\n	-webkit-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-moz-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-ms-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-o-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n}",stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What is interactive journalism?</h1>\n</div>\n\n<div class='content'>\n\n	\n	<div class='column3 column-withheader {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://www.bbc.co.uk/news/uk-22732218'>BBC: The last Dornier bomber</a>\n		</div>\n		<iframe src='http://www.bbc.co.uk/news/uk-22732218'></iframe>\n	</div>\n\n	<div class='column3 column-withheader {{( stage >= 2 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://www.newyorker.com/sandbox/news/marriage.html'>The New Yorker: Same-sex marriage</a>\n		</div>\n		<iframe src='http://www.newyorker.com/sandbox/news/marriage.html'></iframe>\n	</div>\n\n	<div class='column3 column-withheader {{( stage >= 3 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://interactive.guim.co.uk/2013/may/dunalley/'>The Guardian: Firestorm</a>\n		</div>\n		<iframe src='http://interactive.guim.co.uk/2013/may/dunalley/'></iframe>\n	</div>\n</div>"},{styles:".svg {\n	width: 100%;\n	height: 100%;\n}\n\ntext {\n	text-anchor: middle;\n	alignment-baseline: middle;\n	font-size: 3em;\n	fill: white;\n}",stages:"function () {\n\n	return [\n\n		// stage 1\n		null,\n\n		// stage 2\n		null,\n\n		null,\n\n		// stage 3\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					}, { easing: 'easeOut' });\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 400,\n						'interactives.cx': 1200\n					}, { easing: 'easeOut' });\n				}\n			};\n		}\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What does this have to with data visualisation?</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 1600 900'>\n		\n		<!-- data visualisation -->\n		{{#( stage >= 1 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{dataviz.cx}}' cy='450' r='400' fill='rgba(0,128,0,0.5)'/>\n			<text x='350' y='450'>dataviz</text>\n		</g>\n		{{/()}}\n		\n		<!-- interactives -->\n		{{#( stage >= 2 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{interactives.cx}}' cy='450' r='400' fill='rgba(201,83,0,0.5)'/>\n			<text x='1250' y='450'>interactives</text>\n		</g>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<g intro='fade' outro='fade'>\n			<text x='800' y='420'>interactive</text>\n			<text x='800' y='480'>dataviz</text>\n		</g>\n		{{/()}}\n	</svg>\n</div>",data:{dataviz:{cx:400},interactives:{cx:1200}}},{styles:"h3 {\n	text-align: center;\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The importance of 'delight'</h1>\n</div>\n\n<div class='content'>\n	<div class='top-half' style='height: 33%'>\n		<blockquote>\n			<p intro='typewriter' outro='fade'>all our pleasurable emotions and delightful sensations are to be referred, for their primary origin, to the perception of life</p>\n\n			<p class='author' intro='fade' outro='fade'>\n				<cite><a href='http://openlibrary.org/books/OL25408214M/A_treatise_on_the_leading_causes_of_pleasure_and_delight_in_the_human_mind'>A treatise on the leading causes of pleasure and delight in the human mind</a></cite>\n				&ndash; Watkins 1841\n			</p>\n		</blockquote>\n	</div>\n\n	<div class='bottom-half' style='height: 67%'>\n		<div class='columns-outer'>\n			<div class='columns-inner'>\n				<div class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>beauty</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/venus.jpg)'></div>\n				</div>\n\n				<div class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>understanding</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/matrix2.jpg)'></div>\n				</div>\n\n				<div class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>aliveness</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/asimo.jpg)'></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n\n</div>"},{stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The effect of emotion on learning</h1>\n</div>\n\n<div class='content'>\n	<p>A large body of research indicates that <strong>emotion</strong> enhances our ability to <strong>absorb and retain information</strong>.</p>\n	\n	{{#( stage >= 1 )}}\n	<p intro='fade'>This is because</p>\n\n	<ul intro='fade'>\n		<li>the more engaged we are, the easier it becomes to filter out distractions</li>\n\n		{{#( stage >= 2 )}}\n		<li>different physiological mechanisms come into play</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<li>we continue to think about enjoyable experiences after they've finished</li>\n		{{/()}}\n	</ul>\n	{{/()}}\n</div>"},{slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Beauty</h1>\n</div>\n\n<!-- TODO - add some examples (the billion-dollar-o-gram?) -->\n\n<div class='content'>\n	<div class='columns-outer'>\n		<div class='columns-inner'>\n			<div class='column2'>\n				<div class='image contain' style='background-image: url(files/images/information-is-beautiful.jpg);'></div>\n			</div>\n\n			<div class='column2'>\n				<blockquote>\n					<img src='https://si0.twimg.com/profile_images/83855034/me_avatar2.jpg' style='float: right; margin: 0 0 1em 1em; width: 90px; height: 107px;'>\n\n					<p intro='typewriter:2000'>I usually do some hand-drawn sketches. Then I move onto screen work, creating images by hand in Adobe Illustrator CS4. It’s an amazingly powerful drawing package.</p>\n\n					<p intro='typewriter:{\"delay\":2000,\"duration\":2000}'>Data visualization wise, it can output a few basic graphs, but otherwise, it doesn’t render data. That means, yes, I have to hand position every data point on every single image I create. And, yup, I am that anal.</p>\n\n					<p class='author'>\n						<cite><a href='http://www.los-list.com/blog/bookworm-david-mccandless/'>Lo's List interview</a></cite>\n						&ndash; David McCandless\n					</p>\n				</blockquote>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:"svg {\n	width: 100%;\n	height: 100%;\n}\n\n.axis {\n	fill: none;\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\ntext {\n	text-anchor: middle;\n}\n\n.label {\n	font-size: 0.8em;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.grid-line {\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\n.grid-label {\n	alignment-baseline: middle;\n	color: #ddd;\n	text-anchor: end;\n}\n\n.direct-label {\n	fill: rgb(125,162,0);\n}\n\n.in-bar {\n	fill: white;\n	text-anchor: end;\n	alignment-baseline: middle;\n}\n\n.out-bar {\n	text-anchor: start;\n	alignment-baseline: middle;\n}",stages:'function () {\n\n	var ufos = [\n		{ state_id: "IA", count: 491,  state_name: "Iowa" },\n		{ state_id: "WI", count: 909,  state_name: "Wisconsin" },\n		{ state_id: "WA", count: 3348, state_name: "Washington" },\n		{ state_id: "MO", count: 1203, state_name: "Missouri" },\n		{ state_id: "ND", count: 114,  state_name: "North Dakota" },\n		{ state_id: "NV", count: 714,  state_name: "Nevada" },\n		{ state_id: "IL", count: 2064, state_name: "Illinois" },\n		{ state_id: "MA", count: 909,  state_name: "Massachusetts" },\n		{ state_id: "GA", count: 989,  state_name: "Georgia" },\n		{ state_id: "FL", count: 2839, state_name: "Florida" },\n		{ state_id: "VA", count: 919,  state_name: "Virginia" },\n		{ state_id: "NY", count: 2413, state_name: "New York" },\n		{ state_id: "MT", count: 348,  state_name: "Montana" },\n		{ state_id: "ME", count: 412,  state_name: "Maine" },\n		{ state_id: "CA", count: 7595, state_name: "California" },\n		{ state_id: "NJ", count: 1128, state_name: "New Jersey" },\n		{ state_id: "OR", count: 1413, state_name: "Oregon" },\n		{ state_id: "CT", count: 614,  state_name: "Connecticut" },\n		{ state_id: "AZ", count: 2098, state_name: "Arizona" },\n		{ state_id: "AK", count: 234,  state_name: "Alaska" },\n		{ state_id: "MI", count: 1554, state_name: "Michigan" },\n		{ state_id: "ID", count: 362,  state_name: "Idaho" },\n		{ state_id: "TN", count: 875,  state_name: "Tennessee" },\n		{ state_id: "AL", count: 498,  state_name: "Alabama" },\n		{ state_id: "OH", count: 1684, state_name: "Ohio" },\n		{ state_id: "IN", count: 1052, state_name: "Indiana" },\n		{ state_id: "SD", count: 142,  state_name: "South Dakota" },\n		{ state_id: "KS", count: 507,  state_name: "Kansas" },\n		{ state_id: "NH", count: 353,  state_name: "New Hampshire" },\n		{ state_id: "TX", count: 3012, state_name: "Texas" },\n		{ state_id: "NC", count: 1220, state_name: "North Carolina" },\n		{ state_id: "SC", count: 586,  state_name: "South Carolina" },\n		{ state_id: "PA", count: 1800, state_name: "Pennsylvania" },\n		{ state_id: "LA", count: 455,  state_name: "Louisiana" },\n		{ state_id: "RI", count: 197,  state_name: "Rhode Island" },\n		{ state_id: "UT", count: 475,  state_name: "Utah" },\n		{ state_id: "CO", count: 1169, state_name: "Colorado" },\n		{ state_id: "KY", count: 687,  state_name: "Kentucky" },\n		{ state_id: "VT", count: 172,  state_name: "Vermont" },\n		{ state_id: "HI", count: 240,  state_name: "Hawaii" },\n		{ state_id: "NM", count: 637,  state_name: "New Mexico" },\n		{ state_id: "AR", count: 530,  state_name: "Arkansas" },\n		{ state_id: "MN", count: 753,  state_name: "Minnesota" },\n		{ state_id: "WV", count: 345,  state_name: "West Virginia" },\n		{ state_id: "MS", count: 321,  state_name: "Mississippi" },\n		{ state_id: "OK", count: 557,  state_name: "Oklahoma" },\n		{ state_id: "WY", count: 167,  state_name: "Wyoming" },\n		{ state_id: "MD", count: 611,  state_name: "Maryland" },\n		{ state_id: "NE", count: 324,  state_name: "Nebraska" },\n		{ state_id: "DE", count: 126,  state_name: "Delaware" },\n		{ state_id: "DC", count: 93,   state_name: "District of Columbia" }\n	];\n\n	ufos.forEach( function ( record, i ) {\n		record.pos = record.i = i;\n	})\n\n	ufos.sort( function ( a, b ) {\n		return b.count - a.count;\n	});\n\n	var sorted = ufos.map( function ( record, i ) {\n		var newRecord = {\n			state_name: record.state_name,\n			state_id: record.state_id,\n			count: record.count,\n			i: record.i,\n			pos: i\n		};\n\n		return newRecord;\n	});\n\n	var linearScale = function ( domain, range ) {\n		var d0 = domain[0], r0 = range[0], multiplier = ( range[1] - r0 ) / ( domain[1] - d0 );\n\n		return function ( num ) {\n			return r0 + ( multiplier * ( num - d0 ) );\n		};\n	};\n\n	var getGridLines = function ( num, min, max ) {\n		var array = [], i, scale = linearScale([ 0, num - 1 ], [ min, max ]);\n\n		i = num;\n		while ( i-- ) {\n			array[i] = scale( i );\n		}\n\n		return array;\n	};\n\n	var width, height, marginX, marginY, x1, x2, y1, y2, minCount, maxCount, xScale, yScale, gridLines;\n\n	width = 1600;\n	height = 800;\n	marginX = [ 70,  0 ];\n	marginY = [ 30, 50 ];\n\n	x1 = marginX[0];\n	x2 = width - marginX[1];\n	y1 = marginY[0];\n	y2 = height - marginY[1];\n\n	minCount = 93;\n	maxCount = 7595;\n\n	xScale = linearScale([ 0, ufos.length ], [ x1, x2 ]);\n	yScale = linearScale([ minCount, maxCount ], [ y1, y2 ]);\n\n	gridLines = getGridLines( 9, minCount, maxCount );\n\n	return [\n\n		// stage 0 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					window.ractive = ractive;\n\n					ractive.set({\n						x1: x1,\n						x2: x2,\n						y1: y1,\n						y2: y2,\n						width: width,\n						height: height,\n						xScale: xScale,\n						yScale: yScale,\n						minValue: minCount,\n						maxValue: maxCount,\n						ufos: ufos,\n						gridLines: gridLines,\n						barMargin: 0,\n						threshold: 8000,\n\n						r: 0,\n						g: 0,\n						b: 0,\n\n						badLabels: true\n					});\n				}\n			}\n		},\n\n		// stage 1 - fix labels\n		null,\n\n		// stage 2 - sane grid lines and minimum/maximum\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						minValue: minCount,\n						maxValue: maxCount,\n						gridLines: gridLines\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				}\n			}\n		},\n\n		// stage 3 - sort data\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						ufos: sorted\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'ufos\', sorted );\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						ufos: ufos\n					}, {\n						duration: 400,\n						easing: \'easeOut\'\n					});\n				}\n			};\n		},\n\n		// stage 4 - add bar margins\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0.1 );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'barMargin\', 0.1 );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0 );\n				}\n			}\n		},\n\n		// stage 5 - make it green\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						r: 0,\n						g: 0,\n						b: 0\n					});\n				}\n			}\n		},\n\n		// stage 6 - replace grid lines with bar labels\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'maxValue\', maxCount );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'maxValue\', maxCount );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'maxValue\', 8000 );\n				}\n			}\n		},\n\n		// stage 7 - rotate labels, place inside bars\n		null,\n\n		// stage 8 - place some labels outside bars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( \'threshold\', 5000 );\n				},\n				undo: function ( ractive ) {\n					ractive.set( \'threshold\', 8000 );\n				}\n			}\n		}\n	];\n}',slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Data art</h1>\n</div>\n\n<div class='content'>\n	<p>some examples of data art...</p>\n</div>"},{styles:"svg {\n	width: 100%;\n	height: 100%;\n}\n\n.axis {\n	fill: none;\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\ntext {\n	text-anchor: middle;\n}\n\n.label {\n	font-size: 0.8em;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.grid-line {\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\n.grid-label {\n	alignment-baseline: middle;\n	color: #ddd;\n	text-anchor: end;\n}\n\n.direct-label {\n	fill: rgb(125,162,0);\n}\n\n.in-bar {\n	fill: white;\n	text-anchor: end;\n	alignment-baseline: middle;\n}\n\n.out-bar {\n	text-anchor: start;\n	alignment-baseline: middle;\n}\n\n.quote-container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	padding: 3em 14em 0 10em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nblockquote {\n	float: right;\n	max-width: 24em;\n}\n\n.source, .title {\n	text-anchor: start;\n}\n\n.title {\n	font-size: 2em;\n}\n\na {\n	fill: rgb(0,74,131);\n}",stages:'function () {\n\n	var ufos = [\n		{ state_id: "IA", count: 491,  state_name: "Iowa" },\n		{ state_id: "WI", count: 909,  state_name: "Wisconsin" },\n		{ state_id: "WA", count: 3348, state_name: "Washington" },\n		{ state_id: "MO", count: 1203, state_name: "Missouri" },\n		{ state_id: "ND", count: 114,  state_name: "North Dakota" },\n		{ state_id: "NV", count: 714,  state_name: "Nevada" },\n		{ state_id: "IL", count: 2064, state_name: "Illinois" },\n		{ state_id: "MA", count: 909,  state_name: "Massachusetts" },\n		{ state_id: "GA", count: 989,  state_name: "Georgia" },\n		{ state_id: "FL", count: 2839, state_name: "Florida" },\n		{ state_id: "VA", count: 919,  state_name: "Virginia" },\n		{ state_id: "NY", count: 2413, state_name: "New York" },\n		{ state_id: "MT", count: 348,  state_name: "Montana" },\n		{ state_id: "ME", count: 412,  state_name: "Maine" },\n		{ state_id: "CA", count: 7595, state_name: "California" },\n		{ state_id: "NJ", count: 1128, state_name: "New Jersey" },\n		{ state_id: "OR", count: 1413, state_name: "Oregon" },\n		{ state_id: "CT", count: 614,  state_name: "Connecticut" },\n		{ state_id: "AZ", count: 2098, state_name: "Arizona" },\n		{ state_id: "AK", count: 234,  state_name: "Alaska" },\n		{ state_id: "MI", count: 1554, state_name: "Michigan" },\n		{ state_id: "ID", count: 362,  state_name: "Idaho" },\n		{ state_id: "TN", count: 875,  state_name: "Tennessee" },\n		{ state_id: "AL", count: 498,  state_name: "Alabama" },\n		{ state_id: "OH", count: 1684, state_name: "Ohio" },\n		{ state_id: "IN", count: 1052, state_name: "Indiana" },\n		{ state_id: "SD", count: 142,  state_name: "South Dakota" },\n		{ state_id: "KS", count: 507,  state_name: "Kansas" },\n		{ state_id: "NH", count: 353,  state_name: "New Hampshire" },\n		{ state_id: "TX", count: 3012, state_name: "Texas" },\n		{ state_id: "NC", count: 1220, state_name: "North Carolina" },\n		{ state_id: "SC", count: 586,  state_name: "South Carolina" },\n		{ state_id: "PA", count: 1800, state_name: "Pennsylvania" },\n		{ state_id: "LA", count: 455,  state_name: "Louisiana" },\n		{ state_id: "RI", count: 197,  state_name: "Rhode Island" },\n		{ state_id: "UT", count: 475,  state_name: "Utah" },\n		{ state_id: "CO", count: 1169, state_name: "Colorado" },\n		{ state_id: "KY", count: 687,  state_name: "Kentucky" },\n		{ state_id: "VT", count: 172,  state_name: "Vermont" },\n		{ state_id: "HI", count: 240,  state_name: "Hawaii" },\n		{ state_id: "NM", count: 637,  state_name: "New Mexico" },\n		{ state_id: "AR", count: 530,  state_name: "Arkansas" },\n		{ state_id: "MN", count: 753,  state_name: "Minnesota" },\n		{ state_id: "WV", count: 345,  state_name: "West Virginia" },\n		{ state_id: "MS", count: 321,  state_name: "Mississippi" },\n		{ state_id: "OK", count: 557,  state_name: "Oklahoma" },\n		{ state_id: "WY", count: 167,  state_name: "Wyoming" },\n		{ state_id: "MD", count: 611,  state_name: "Maryland" },\n		{ state_id: "NE", count: 324,  state_name: "Nebraska" },\n		{ state_id: "DE", count: 126,  state_name: "Delaware" },\n		{ state_id: "DC", count: 93,   state_name: "District of Columbia" }\n	];\n\n	ufos.forEach( function ( record, i ) {\n		record.pos = record.i = i;\n	})\n\n	ufos.sort( function ( a, b ) {\n		return b.count - a.count;\n	});\n\n	var sorted = ufos.map( function ( record, i ) {\n		var newRecord = {\n			state_name: record.state_name,\n			state_id: record.state_id,\n			count: record.count,\n			i: record.i,\n			pos: i\n		};\n\n		return newRecord;\n	});\n\n	var linearScale = function ( domain, range ) {\n		var d0 = domain[0], r0 = range[0], multiplier = ( range[1] - r0 ) / ( domain[1] - d0 );\n\n		return function ( num ) {\n			return r0 + ( multiplier * ( num - d0 ) );\n		};\n	};\n\n	var getGridLines = function ( num, min, max ) {\n		var array = [], i, scale = linearScale([ 0, num - 1 ], [ min, max ]);\n\n		i = num;\n		while ( i-- ) {\n			array[i] = scale( i );\n		}\n\n		return array;\n	};\n\n	var width, height, marginX, marginY, x1, x2, y1, y2, minCount, maxCount, xScale, yScale, gridLines;\n\n	width = 1600;\n	height = 800;\n	marginX = [ 70,  0 ];\n	marginY = [ 30, 50 ];\n\n	x1 = marginX[0];\n	x2 = width - marginX[1];\n	y1 = marginY[0];\n	y2 = height - marginY[1];\n\n	minCount = 93;\n	maxCount = 7595;\n\n	xScale = linearScale([ 0, ufos.length ], [ x1, x2 ]);\n	yScale = linearScale([ minCount, maxCount ], [ y1, y2 ]);\n\n	gridLines = getGridLines( 9, minCount, maxCount );\n\n	return [\n\n		// stage 0 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						x1: x1,\n						x2: x2,\n						y1: y1,\n						y2: y2,\n						width: width,\n						height: height,\n						xScale: xScale,\n						yScale: yScale,\n						minValue: minCount,\n						maxValue: maxCount,\n						ufos: ufos,\n						gridLines: gridLines,\n						barMargin: 0,\n						threshold: 8000,\n\n						r: 0,\n						g: 0,\n						b: 0,\n\n						badLabels: true\n					});\n				}\n			}\n		},\n\n		// stage 1 - fix labels\n		null,\n\n		// stage 2 - sane grid lines and minimum/maximum\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						minValue: minCount,\n						maxValue: maxCount,\n						gridLines: gridLines\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				}\n			}\n		},\n\n		// stage 3 - sort data\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						ufos: sorted\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'ufos\', sorted );\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						ufos: ufos\n					}, {\n						duration: 400,\n						easing: \'easeOut\'\n					});\n				}\n			};\n		},\n\n		// stage 4 - add bar margins\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0.1 );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'barMargin\', 0.1 );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0 );\n				}\n			}\n		},\n\n		// stage 5 - make it green\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						r: 0,\n						g: 0,\n						b: 0\n					});\n				}\n			}\n		},\n\n		// stage 6 - replace grid lines with bar labels\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'maxValue\', maxCount );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'maxValue\', maxCount );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'maxValue\', 8000 );\n				}\n			}\n		},\n\n		// stage 7 - rotate labels, place inside bars\n		null,\n\n		// stage 8 - place some labels outside bars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( \'threshold\', 5000 );\n				},\n				undo: function ( ractive ) {\n					ractive.set( \'threshold\', 8000 );\n				}\n			}\n		},\n\n		null,\n\n		null\n	];\n}',slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Computers do not have good aesthetic judgment</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 {{width}} {{height}}'>\n		<line class='axis' x1='{{x1}}' y1='{{y2}}' x2='{{x2}}' y2='{{y2}}'/>\n\n		<text class='title' x='{{( x1 + 150 )}}' y='{{( y1 + 20 )}}'>UFO sightings by state, 1995-2010</text>\n		<text class='source' x='{{( x1 + 150 )}}' y='{{( y1 + 50 )}}'>Source: <a xlink:href='http://www.infochimps.com/datasets/60000-documented-ufo-sightings-with-text-descriptions-and-metada'>infochimps.com</a></text>\n		\n\n		<!-- grid lines - only up to stage 6 -->\n		{{#( stage <= 5 )}}\n			<g class='grid-lines' intro='fade' outro='fade'>\n				{{#gridLines}}\n					<g transform='translate(0,{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( . - minValue ) ) ) )}})'>\n						<line class='grid-line' x1='{{x1}}' x2='{{x2}}' y1='0' y2='0'/>\n						<text class='grid-label' x='{{( x1 - 10 )}}'>{{( Math.round(.) )}}</text>\n					</g>\n				{{/gridLines}}\n			</g>\n		{{/()}}\n\n		<g class='points'>\n			{{#ufos}}\n				<rect\n					class='point'\n					x='{{( xScale( pos + barMargin ) )}}'\n					y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) )}}'\n					width='{{( ( 1 - 2 * barMargin ) * width / ufos.length )}}'\n					height='{{( ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) )}}'\n					fill='rgb({{( Math.round( r ) )}},{{( Math.round( g ) )}},{{( Math.round( b ) )}})'\n				/>\n			{{/ufos}}\n		</g>\n\n		<!-- stage 0 - state name labels -->\n		{{#( stage === 0 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos}}\n					<text x='{{( xScale( pos + 0.5 ) )}}'>{{state_name}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 1+ - state name labels -->\n		{{#( stage >= 1 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos:i}}\n					<text class='label' x='{{( xScale( pos + 0.5 ) )}}'>{{state_id}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n\n		<!-- stage 6 - direct labelling -->\n		{{#( stage === 6 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					<text\n						class='direct-label'\n						x='{{( xScale( pos + 0.5 ) )}}'\n						y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 10 )}}'\n					>\n						{{count}}\n					</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 6 - direct labelling inside bar -->\n		{{#( stage >= 7 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					{{#( count > threshold )}}\n						<text\n							class='direct-label in-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) + 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n\n					{{#( count <= threshold )}}\n						<text\n							class='direct-label out-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n\n	\n	</svg>\n\n	{{#( stage >= 8 )}}\n		<div class='quote-container'>\n			{{#( stage === 8 )}}\n				<blockquote intro='fade'>\n					<img src='http://www.bbc.co.uk/doctorwho/classic/gallery/fourthdoctor/images/340/23.jpg' style='float: right; margin: 0 0 1em 1em; width: 8em; height: 6em;'>\n\n					<p intro='typewriter'>The trouble with computers, of course, is that they're very sophisticated idiots. They do exactly what you tell them at amazing speed. Even if you order them to kill you.</p>\n\n					<p class='author'>\n						<cite><a href='http://en.wikiquote.org/wiki/Fourth_Doctor'>Doctor Who</a></cite>\n						, 1975\n					</p>\n				</blockquote>\n			{{/()}}\n\n			{{#( stage === 9 )}}\n				<blockquote intro='fade'>\n					<p intro='typewriter'>Computers are incredibly fast, accurate and stupid; humans are incredibly slow, inaccurate and brilliant; together they are powerful beyond imagination</p>\n\n					<p class='author'>\n						<cite><a href='http://www.benshoemate.com/2008/11/30/einstein-never-said-that/'>not Einstein</a></cite>\n					</p>\n				</blockquote>\n			{{/()}}\n		</div>\n	{{/()}}\n</div>\n\n<!-- TODO source -->",data:{points:[{name:"Monday",value:20},{name:"Tuesday",value:55},{name:"Wednesday",value:45},{name:"Thursday",value:76},{name:"Friday",value:15},{name:"Saturday",value:90},{name:"Sunday",value:65}]}},{styles:".container {\n	padding: 4em 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}",stages:3,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Understanding</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The best visualisations are self-explanatory.</p>\n		</div>\n\n		{{#( stage >= 1 )}}\n		<div class='middle' intro='fade' outro='fade'>\n			<div class='image contain' style='background-image: url(files/images/radar.gif);'></div>\n		</div>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n		<div class='bottom' intro='fade' outro='fade'>\n			<p>Prefer familiar chart types, <em>in general</em>.</p>\n		</div>\n		{{/()}}\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(0,0,0,0.8);\n	color: white;\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Interactivity increases cognitive load</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>We now have two things to worry about &ndash; the visualisation, and the <strong>user interface</strong> or UI.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://cars.about.com/od/buick/ig/2010-Buick-LaCrosse-photos/2010-Buick-LaCrosse-controls.htm -->\n			<div class='image {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://0.tqn.com/d/cars/1/0/e/u/1/ag_10lacrosse_buttons.jpg);'>\n			<div class='caption'><p>Bad UI design costs lives!</p></div>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>UI design is a rapidly-evolving field</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>Just as with data visualisation, we have to consider which interactions are <strong>familiar</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://www.letsunlockiphone.com/ios-7-vs-ios-6-compare-ios-firmwares/ -->\n			<div class='image contain {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://www.letsunlockiphone.com/wp-content/uploads/ios-6-vs-ios-7-lock-screen.jpg);'>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.latin {\n	font-family: Georgia;\n	font-weight: normal;\n	font-style: italic;\n}\n\niframe {\n	width: 100%;\n	height: 100%;\n}",stages:"function () {\n\n	var aspectRatio = 16 / 9;\n\n	return [\n\n		// stage 0 - setup\n		function () {\n			return {\n				do: function ( ractive ) {\n					var resizeHandler;\n\n					resizeHandler = function () {\n						var clientWidth, clientHeight, d, horizontalPadding, verticalPadding;\n\n						console.log( ractive.nodes.video_container );\n\n						clientWidth = ractive.nodes.video_container.clientWidth;\n						clientHeight = ractive.nodes.video_container.clientHeight;\n\n						if ( ( clientWidth / clientHeight ) > aspectRatio ) {\n							// need vertical bars\n							horizontalPadding = 0;\n\n							d = clientWidth - ( clientHeight * aspectRatio );\n							verticalPadding = d / 2;\n						} else {\n							// need horizontal bars\n							verticalPadding = 0;\n							\n							d = clientHeight - ( clientWidth / aspectRatio );\n							horizontalPadding = d / 2;\n						}\n\n						ractive.nodes.video_container.style.padding = horizontalPadding + 'px ' + verticalPadding + 'px';\n					};\n\n					window.addEventListener( 'resize', resizeHandler );\n					ractive.on( 'teardown', function () {\n						window.removeEventListener( 'resize', resizeHandler );\n					});\n\n					resizeHandler();\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		},\n\n		// stage 1 - show facebook video\n		null\n	];\n}",slide:"<div class='header'>\n	<h1>Aliveness</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The word <strong>animation</strong> comes from the Latin <strong class='latin'>animō</strong> &ndash; to give life.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='video_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				<iframe src=\"//www.youtube.com/embed/HiqbNxRurFA?start=19\" frameborder=\"0\" allowfullscreen></iframe>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.visible {\n	opacity: 1;\n\n	-webkit-transition: opacity 0.2s;\n	-moz-transition: opacity 0.2s;\n	-ms-transition: opacity 0.2s;\n	-o-transition: opacity 0.2s;\n	transition: opacity 0.2s;\n}",stages:"function () {\n\n	return [\n\n		null,\n\n		// stage 1 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					\n					var chart = new Highcharts.Chart({\n						chart: {\n							renderTo: 'chart_container'\n						},\n						title: {\n							text: 'Combination chart'\n						},\n						xAxis: {\n							categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n						},\n						tooltip: {\n							formatter: function() {\n								var s;\n								if (this.point.name) { // the pie chart\n									s = ''+\n										this.point.name +': '+ this.y +' fruits';\n								} else {\n									s = ''+\n										this.x  +': '+ this.y;\n								}\n								return s;\n							}\n						},\n						labels: {\n							items: [{\n								html: 'Total fruit consumption',\n								style: {\n									left: '40px',\n									top: '8px',\n									color: 'black'\n								}\n							}]\n						},\n						series: [{\n							type: 'column',\n							name: 'Jane',\n							data: [3, 2, 1, 3, 4]\n						}, {\n							type: 'column',\n							name: 'John',\n							data: [2, 3, 5, 7, 6]\n						}, {\n							type: 'column',\n							name: 'Joe',\n							data: [4, 3, 3, 9, 0]\n						}, {\n							type: 'spline',\n							name: 'Average',\n							data: [3, 2.67, 3, 6.33, 3.33],\n							marker: {\n								lineWidth: 2,\n								lineColor: Highcharts.getOptions().colors[3],\n								fillColor: 'white'\n							}\n						}, {\n							type: 'pie',\n							name: 'Total consumption',\n							data: [{\n								name: 'Jane',\n								y: 13,\n								color: Highcharts.getOptions().colors[0] // Jane's color\n							}, {\n								name: 'John',\n								y: 23,\n								color: Highcharts.getOptions().colors[1] // John's color\n							}, {\n								name: 'Joe',\n								y: 19,\n								color: Highcharts.getOptions().colors[2] // Joe's color\n							}],\n							center: [100, 80],\n							size: 100,\n							showInLegend: false,\n							dataLabels: {\n								enabled: false\n							}\n						}]\n					});\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		},\n\n		null,\n\n		null\n	];\n}",slide:"<div class='header'>\n	<h1>Animation can be gratuitous and gimmicky...</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>Ideally, animation should convey that the data being visualised, or the state of the interactive, is <strong>changing</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='chart_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				\n			</div>\n		</div>\n	</div>\n</div>",highcharts:"$(function () {\n	$('#container').highcharts({\n		chart: {\n		},\n		title: {\n			text: 'Combination chart'\n		},\n		xAxis: {\n			categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n		},\n		tooltip: {\n			formatter: function() {\n				var s;\n				if (this.point.name) { // the pie chart\n					s = ''+\n						this.point.name +': '+ this.y +' fruits';\n				} else {\n					s = ''+\n						this.x  +': '+ this.y;\n				}\n				return s;\n			}\n		},\n		labels: {\n			items: [{\n				html: 'Total fruit consumption',\n				style: {\n					left: '40px',\n					top: '8px',\n					color: 'black'\n				}\n			}]\n		},\n		series: [{\n			type: 'column',\n			name: 'Jane',\n			data: [3, 2, 1, 3, 4]\n		}, {\n			type: 'column',\n			name: 'John',\n			data: [2, 3, 5, 7, 6]\n		}, {\n			type: 'column',\n			name: 'Joe',\n			data: [4, 3, 3, 9, 0]\n		}, {\n			type: 'spline',\n			name: 'Average',\n			data: [3, 2.67, 3, 6.33, 3.33],\n			marker: {\n				lineWidth: 2,\n				lineColor: Highcharts.getOptions().colors[3],\n				fillColor: 'white'\n			}\n		}, {\n			type: 'pie',\n			name: 'Total consumption',\n			data: [{\n				name: 'Jane',\n				y: 13,\n				color: Highcharts.getOptions().colors[0] // Jane's color\n			}, {\n				name: 'John',\n				y: 23,\n				color: Highcharts.getOptions().colors[1] // John's color\n			}, {\n				name: 'Joe',\n				y: 19,\n				color: Highcharts.getOptions().colors[2] // Joe's color\n			}],\n			center: [100, 80],\n			size: 100,\n			showInLegend: false,\n			dataLabels: {\n				enabled: false\n			}\n		}]\n	});\n});"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\niframe {\n	width: 100%;\n	height: 100%;\n	border: 1px solid #eee;\n	box-shadow: 1px 1px 3px rgba(0,0,0,0.6);\n}",slide:"<div class='header'>\n	<h1>...and bad for performance</h1>\n</div>\n\n<div class='content'>\n	<iframe src='http://pitchfork.com/features/cover-story/reader/daft-punk/'></iframe>\n</div>"},{styles:"iframe {\n	width: 100%;\n	height: 100%;\n	border: 1px solid #eee;\n	box-shadow: 1px 1px 3px rgba(0,0,0,0.6);\n}",slide:"<div class='header'>\n	<h1>Case study: Remittances</h1>\n</div>\n\n<div class='content'>\n	<iframe frameborder='0' src='https://docs.google.com/spreadsheet/pub?key=0AgS_UxBggDCMdG9aNTExWHYzclNYbzdnWDg1enVtMnc&output=html&widget=true'></iframe>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.time.com/time/interactive/0,31813,1737566,00.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.time.com/time/interactive/0,31813,1737566,00.html'>The Flow of Money: Mapping World Remittances</a> &ndash; time.com</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.torre.nl/remittances/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.torre.nl/remittances/'>Remittance flows</a> &ndash; visualizing.org</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://thereandhere.org/remittances.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://thereandhere.org/remittances.html'>Remittances by Country of Origin</a> &ndash; thereandhere.org</p>\n	</div>\n</div>"},{styles:"iframe {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n}",slide:'<iframe src="//www.youtube.com/embed/vVX-PrBRtTY?start=44" frameborder="0" allowfullscreen></iframe>'},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://peoplemov.in/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://peoplemov.in/'>Immigration flows across the world</a> &ndash; http://peoplemov.in/</p>\n	</div>\n</div>"},{stages:8,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Our ambitions</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<p>We aimed to produce a visualisation that:</p>\n\n	<ul>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>was geographical</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>showed inflows and outflows simultaneously</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>had animated arrows, not static straight lines, making the direction of flow clear</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>included migration data as context...</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade'>...but avoided information overload</li>\n		{{/()}}\n\n		{{#( stage >= 6 )}}\n			<li intro='fade'>used colour for explanatory, rather than merely aesthetic, value</li>\n		{{/()}}\n\n		{{#( stage >= 7 )}}\n			<li intro='fade'>incorporated case studies and additional context</li>\n		{{/()}}\n	</ul>\n</div>"},{styles:".black-bg {\n	background-color: black;\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	padding: 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nimg {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='black-bg' intro='fade' outro='fade'>\n	{{#( stage === 1 )}}\n		<img src='files/images/maths.svg' intro='fade:1200'>\n	{{/()}}\n</div>"},{styles:".previous-example-container iframe {\n	border: none;\n	box-shadow: none;\n}",slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://static.guim.co.uk/interactivestore/2013/6/9/1370806749349/342760/index.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://static.guim.co.uk/interactivestore/2013/6/9/1370806749349/342760/index.html'>How much money do migrants send home?</a> &ndash; guardian.co.uk</p>\n	</div>\n</div>"}]}
}()),define("controllers/router",[],function(){var t=/#\/([0-9]+)/;return function(e){var n;e.state.set("slideNum",0),n=function(){var n;(n=t.exec(window.location.hash))&&e.state.set("slideNum",+n[1])},window.addEventListener("hashchange",n),n(),e.state.observe("slideNum",function(t){isNaN(t)||(window.location.hash="/"+t)})}}),function(t){var e,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,v,y,b,w,x,_,k,N,S,O,E,C,M,A,F,L,T,R=t.document||null,z={},j={},P={},D={},V=function(){},I={},q=/^\s+/,H=/\s+$/,U="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",B=1,W=2,J=3,Y=4,G=5,$=6,Z=7,X=8,K=9,Q=10,te=11,ee=12,ne=20,ie=21,re=22,ae=23,se=24,oe=26,le=30,ue=31,ce=32,he=33,de=34,pe=35,fe=36,me=40,ge={unset:!0},ve={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),m=Object.defineProperty,g=Object.defineProperties}catch(ye){m=function(t,e,n){t[e]=n.value},g=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&m(t,n,e[n])}}try{Object.create(null),v=Object.create,y=function(){return Object.create(null)}}catch(ye){v=function(){var t=function(){};return function(e,n){var i;return t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i}}(),y=function(){return{}}}var be,we,xe,_e=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})};!function(){var t;R&&(t=R.createElement("div"),void 0!==t.style.transition?(we="transition",xe="transitionend",be=!0):void 0!==t.style.webkitTransition?(we="webkitTransition",xe="webkitTransitionEnd",be=!0):be=!1)}(),function(t){var e=function(t,e,n){var i;if("string"==typeof e&&c(n)){if(i=t.get(e),void 0===i&&(i=0),c(i))t.set(e,i+n);else if(t.debug)throw new Error("Cannot add to a non-numeric value")}else if(t.debug)throw new Error("Bad arguments")};t.add=function(t,n){e(this,t,void 0===n?1:n)},t.subtract=function(t,n){e(this,t,void 0===n?-1:-n)},t.toggle=function(t){var e;if("string"==typeof t)e=this.get(t),this.set(t,!e);else if(this.debug)throw new Error("Bad arguments")}}(z),function(t){var n,i;t.animate=function(t,e,i){var r,a,s;if("object"==typeof t){i=e||{},s=[];for(r in t)t.hasOwnProperty(r)&&(s[s.length]=n(this,r,t[r],i));return{stop:function(){for(;s.length;)s.pop().stop()}}}return i=i||{},a=n(this,t,e,i),{stop:function(){a.stop()}}},i={stop:V},n=function(t,n,r,a){var s,o,l,u,c;if(c=t.get(n),h(c,r))return i;for(u=C.animations.length;u--;)C.animations[u].keypath===n&&C.animations[u].stop();return a.easing&&(s="function"==typeof a.easing?a.easing:t.easing&&t.easing[a.easing]?t.easing[a.easing]:e.easing[a.easing],"function"!=typeof s&&(s=null)),o=void 0===a.duration?400:a.duration,l=new _({keypath:n,from:c,to:r,root:t,duration:o,easing:s,step:a.step,complete:a.complete}),C.push(l),t._animations[t._animations.length]=l,l}}(z),z.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},z.cancelFullscreen=function(){e.cancelFullscreen(this.el)},z.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)},z.get=function(t){var e,n,i,r,a,o,u,c,h;if(!t)return this.data;if(e=this._cache,l(t)){if(!t.length)return this.data;i=t.slice(),r=i.join("."),h=!0}else{if(e.hasOwnProperty(t)&&e[t]!==ge)return e[t];i=s(t),r=i.join(".")}return!e.hasOwnProperty(r)||e[r]===ge||void 0===e[r]&&h?this._evaluators[r]?(c=this._evaluators[r].value,e[r]=c,c):(a=i.pop(),o=i.join("."),u=i.length?this.get(i):this.data,null!==u&&"object"==typeof u&&u!==ge?((n=this._cacheMap[o])?-1===n.indexOf(r)&&(n[n.length]=r):this._cacheMap[o]=[r],c=u[a],this.modifyArrays&&("("===r.charAt(0)||!l(c)||c._ractive&&c._ractive.setting||M(c,r,this)),e[r]=c,c):void 0):e[r]};var ke,Ne,Se,Oe,Ee,Ce,Me;ke=function(t){if(t.keypath)Oe(t);else{var e=t.root._pendingResolution.indexOf(t);-1!==e&&t.root._pendingResolution.splice(e,1)}},Ne=function(t,e){var n,i;if(t.modifyArrays&&"("!==e.charAt(0)&&(n=t._cache[e],l(n)&&!n._ractive.setting&&A(n,e,t)),t._cache[e]=ge,i=t._cacheMap[e])for(;i.length;)Ne(t,i.pop())},Se=function(t){var e,n,i,r,a,o,l,u;for(o=t.root,l=t.keypath,u=t.priority,e=o._deps[u]||(o._deps[u]={}),n=e[l]||(e[l]=[]),n[n.length]=t,i=s(l);i.length;)i.pop(),r=i.join("."),a=o._depsMap[r]||(o._depsMap[r]=[]),void 0===a[l]&&(a[l]=0,a[a.length]=l),a[l]+=1,l=r},Oe=function(t){var e,n,i,r,a,o,l;for(a=t.root,o=t.keypath,l=t.priority,e=a._deps[l][o],e.splice(e.indexOf(t),1),n=s(o);n.length;)n.pop(),i=n.join("."),r=a._depsMap[i],r[o]-=1,r[o]||(r.splice(r.indexOf(o),1),r[o]=void 0),o=i},Ee=function(t,e,n){var i;for(i=0;i<t._deps.length;i+=1)Ae(t,e,i,n)};var Ae=function(t,e,n,i){var r,a,s,o;if(r=t._deps[n]){if(a=r[e])for(s=a.length;s--;)a[s].update();if(!i&&(o=t._depsMap[e]))for(s=o.length;s--;)Ae(t,o[s],n)}},Fe=function(t,e,n){var i,r,a;for(a=e.length,i=0;i<t._deps.length;i+=1)if(t._deps[i])for(r=a;r--;)Ae(t,e[r],i,n)};Ce=function(t,e,n){var i,r,a,o,l,u;if("."===e)return n[n.length-1];if("."===e.charAt(0))return n[n.length-1]+e;for(i=s(e),r=i.pop(),n=n.concat();n.length;)if(a=n.pop(),o=s(a),l=t.get(o.concat(i)),"object"==typeof l&&null!==l&&l.hasOwnProperty(r)){u=a+"."+e;break}return u||void 0===t.get(e)||(u=e),u},Me=function(t){for(var e,n;t._defEvals.length;)e=t._defEvals.pop(),e.update().deferred=!1;for(;t._defAttrs.length;)n=t._defAttrs.pop(),n.update().deferred=!1},z.link=function(t){var e=this;return function(n){e.set(t,n)}},function(t){var e,n;t.observe=function(t,n,i){var r,a=[];if("object"==typeof t){i=n;for(r in t)t.hasOwnProperty(r)&&(n=t[r],a[a.length]=e(this,r,n,i));return{cancel:function(){for(;a.length;)a.pop().cancel()}}}return e(this,t,n,i)},e=function(t,e,i,r){var a;return a=new n(t,e,i,r),r&&r.init===!1||a.update(),Se(a),{cancel:function(){Oe(a)}}},n=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.priority=0,this.context=i&&i.context?i.context:t},n.prototype={update:function(){var t;if(t=this.root.get(this.keypath,!0),!h(t,this.value)){try{this.callback.call(this.context,t,this.value)}catch(e){if(root.debug)throw e}this.value=t}}}}(z),z.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},z.on=function(t,e){var n,i,r=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&(n[n.length]=this.on(i,t[i]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){r.off(t,e)}}},z.render=function(t){var e,n;if(e=t.el?d(t.el):this.el,!e)throw new Error("You must specify a DOM element to render to");t.append||(e.innerHTML=""),this._transitionManager=n=Pe(this,t.complete),this.fragment=new b({descriptor:this.template,root:this,owner:this,parentNode:e}),e.appendChild(this.fragment.docFrag),this.ready=!0,this._transitionManager=null,n.ready=!0,n.active||n.complete()},z.requestFullscreen=function(){e.requestFullscreen(this.el)},function(t){var e,n;t.set=function(t,i,r){var a,o,l,c,h,d,p;if(o=[""],a=[],u(t)&&(r=i),d=this._transitionManager,this._transitionManager=p=Pe(this,r),u(t))for(l in t)t.hasOwnProperty(l)&&(h=s(l),c=h.join("."),i=t[l],e(this,c,h,i,a,o));else h=s(t),c=h.join("."),e(this,c,h,i,a,o);return a.length&&this._pendingResolution.length&&n(this),o.length&&Fe(this,o,!0),a.length&&Fe(this,a),Me(this),this._transitionManager=d,p.ready=!0,p.active||p.complete(),this.setting||(this.setting=!0,"object"==typeof t?this.fire("set",t):this.fire("set",t,i),this.setting=!1),this},e=function(t,e,n,i,r,a){var s,o,l,u;if(u=n.slice(),s=t.get(e),s!==i){for(l=t.data;n.length>1;)o=n.shift(),l[o]||(l[o]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),l=l[o];o=n[0],l[o]=i}else if("object"!=typeof i)return;for(Ne(t,e),r[r.length]=e;u.length>1;)u.pop(),e=u.join("."),-1===a.indexOf(e)&&(a[a.length]=e)},n=function(t){var e,n,i;for(e=t._pendingResolution.length;e--;)n=t._pendingResolution.splice(e,1)[0],(i=Ce(t,n.ref,n.contextStack))?n.resolve(i):t._pendingResolution[t._pendingResolution.length]=n}}(z),z.teardown=function(t){var e,n,i;for(this.fire("teardown"),i=this._transitionManager,this._transitionManager=n=Pe(this,t),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(e in this._cache)Ne(this,e);for(;this._bound.length;)this.unbind(this._bound.pop());this._transitionManager=i,n.ready=!0,n.active||n.complete()},z.toggleFullscreen=function(){e.isFullscreen(this.el)?this.cancelFullscreen():this.requestFullscreen()},z.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},z.update=function(t,e){var n,i;return"function"==typeof t&&(e=t),i=this._transitionManager,this._transitionManager=n=Pe(this,e),Ne(this,t||""),Ee(this,t||""),Me(this),this._transitionManager=i,n.ready=!0,n.active||n.complete(),"string"==typeof t?this.fire("update",t):this.fire("update"),this},j.backbone=function(t,e){var n,i,r,a,s,o,l;return e&&(e+=".",s=new RegExp("^"+e.replace(/\./g,"\\.")),o=e.length),{init:function(u){e?(l=function(t){var n,i;i={};for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i},a=function(t){n||(i=!0,u.set(l(t.changed)),i=!1)},r=function(e,r){i||s.test(e)&&(n=!0,t.set(e.substring(o),r),n=!1)}):(a=function(t){n||(i=!0,u.set(t.changed),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)}),t.on("change",a),u.on("set",r),u.set(e?l(t.attributes):t.attributes)},teardown:function(e){t.off("change",a),e.off("set",r)}}},j.statesman=function(t,e){var n,i,r,a,s,o,l;return e&&(e+=".",s=new RegExp("^"+e.replace(/\./g,"\\.")),o=e.length,l=function(t){var n,i;if(t){i={};for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}}),{init:function(u){var c;e?(a=function(t,r){var a;n||(i=!0,"object"==typeof t?(a=l(t),u.set(a)):u.set(e+t,r),i=!1)},u.twoway&&(r=function(e,r){i||s.test(e)&&(n=!0,t.set(e.substring(o),r),n=!1)})):(a=function(t,e){n||(i=!0,"object"==typeof t?u.set(t):u.set(t,e),i=!1)},u.twoway&&(r=function(e,r){i||(n=!0,t.set(e,r),n=!1)})),t.on("change",a),u.twoway&&u.on("set",r),c=e?l(t.get()):t.get(),c&&u.set(e?l(t.get()):t.get())},teardown:function(e){t.off("change",a),e.off("set",r)}}},n={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},P.tap=function(t,e){var n,i,r,a;return r=5,a=400,n=function(t){var n,i,s,o,l,u;i=t.clientX,s=t.clientY,n=this,o=function(t){e({node:n,original:t}),u()},l=function(t){(Math.abs(t.clientX-i)>=r||Math.abs(t.clientY-s)>=r)&&u()},u=function(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",o)},window.addEventListener("mousemove",l),window.addEventListener("mouseup",o),setTimeout(u,a)},t.addEventListener("mousedown",n),i=function(t){var n,i,s,o,l,u,c,h;1===t.touches.length&&(o=t.touches[0],i=o.clientX,s=o.clientY,n=this,l=o.identifier,c=function(t){var i;i=t.changedTouches[0],i.identifier!==l&&h(),t.preventDefault(),e({node:n,original:t}),h()},u=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==l)&&h(),e=t.touches[0],(Math.abs(e.clientX-i)>=r||Math.abs(e.clientY-s)>=r)&&h()},h=function(){window.removeEventListener("touchmove",u),window.removeEventListener("touchend",c),window.removeEventListener("touchcancel",h)},window.addEventListener("touchmove",u),window.addEventListener("touchend",c),window.addEventListener("touchcancel",h),setTimeout(h,a))},t.addEventListener("touchstart",i),{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",i)}}},function(){var t,n,r,a,s,o,l,c,h,d,p,f,m;i=function(t){var n,i;return n=this,i=function(t){d(this,i,t||{})},i.prototype=v(n.prototype),n!==e&&a(i,n),o(i,t),l(i),c(i,t),h(i),i.extend=n.extend,i},p=["data","partials","transitions","eventDefinitions"],f=["el","template","complete","modifyArrays","twoway","lazy","append","preserveWhitespace","sanitize"],m=p.concat(f),a=function(t,e){p.forEach(function(i){e[i]&&(t[i]=n(e[i]))}),f.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])})},s=function(t,e){return/_super/.test(t)?function(){var n=this._super;this._super=e,t.apply(this,arguments),this._super=n}:t},o=function(t,e){var n,i;p.forEach(function(n){var i=e[n];i&&(t[n]?r(t[n],i):t[n]=i)}),f.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])});for(n in e)e.hasOwnProperty(n)&&!t.prototype.hasOwnProperty(n)&&-1===m.indexOf(n)&&(i=e[n],t.prototype[n]="function"==typeof i&&"function"==typeof t.prototype[n]?s(i,t.prototype[n]):i)},l=function(t){var n;if("string"==typeof t.template){if(!e.parse)throw new Error(U);if("#"===t.template.charAt(0)){if(n=document.getElementById(t.template.substring(1)),!n||"SCRIPT"!==n.tagName)throw new Error("Could not find template element ("+t.template+")");t.template=e.parse(n.innerHTML,t)}else t.template=e.parse(t.template,t)}},c=function(t,e){u(t.template)&&(t.partials||(t.partials={}),r(t.partials,t.template.partials),e.partials&&r(t.partials,e.partials),t.template=t.template.template)},h=function(t){var n,i;if(t.partials)for(n in t.partials)if(t.partials.hasOwnProperty(n)){if("string"==typeof t.partials[n]){if(!e.parse)throw new Error(U);i=e.parse(t.partials[n],t)}else i=t.partials[n];t.partials[n]=i}},d=function(i,r,a){!a.template&&r.template&&(a.template=r.template),p.forEach(function(e){a[e]?t(a[e],r[e]):r[e]&&(a[e]=n(r[e]))}),f.forEach(function(t){void 0===a[t]&&void 0!==r[t]&&(a[t]=r[t])}),e.call(i,a),i.init&&i.init.call(i,a)},t=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])},n=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},r=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}(),r=function(t,n){return c(t)&&c(n)?e.interpolators.number(+t,+n):l(t)&&l(n)?e.interpolators.array(t,n):u(t)&&u(n)?e.interpolators.object(t,n):function(){return n}},a={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var i,r,a,s;for(i=[],r=[],s=a=Math.min(t.length,n.length);s--;)r[s]=e.interpolate(t[s],n[s]);for(s=a;s<t.length;s+=1)i[s]=t[s];for(s=a;s<n.length;s+=1)i[s]=n[s];return function(t){for(var e=a;e--;)i[e]=r[e](t);return i}},object:function(t,n){var i,r,a,s,o=[];a={},r={};for(s in t)t.hasOwnProperty(s)&&(n.hasOwnProperty(s)?(o[o.length]=s,r[s]=e.interpolate(t[s],n[s])):a[s]=t[s]);for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(a[s]=n[s]);return i=o.length,function(t){for(var e,n=i;n--;)e=o[n],a[e]=r[e](t);return a}}};var Le=y();g(Le,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}},eventDefinitions:{enumerable:!0,value:{}}}),e=function(t){var n,i,r,a,s,o;for(n in Le)t.hasOwnProperty(n)||(t[n]="object"==typeof Le[n]?{}:Le[n]);if(g(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"==t?e:8|3&e,n.toString(16)})},_subs:{value:y()},_cache:{value:{}},_cacheMap:{value:y()},_deps:{value:[]},_depsMap:{value:y()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_proxies:{value:y()},_customProxies:{value:y()},_evaluators:{value:y()},_bound:{value:[]},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}}}),this.modifyArrays=t.modifyArrays,this.twoway=t.twoway,this.lazy=t.lazy,this.debug=t.debug,this.el=d(t.el),this.data=t.data||{},this.partials={},this.transitions=t.transitions,this.eventDefinitions=t.eventDefinitions,t.bindings)if(l(t.bindings))for(r=0;r<t.bindings.length;r+=1)this.bind(t.bindings[r]);else this.bind(t.bindings);if(a=t.template,"string"==typeof a){if(!e.parse)throw new Error(U);if("#"===a.charAt(0)){if(s=R.getElementById(a.substring(1)),!s)throw new Error("Could not find template element ("+a+")");o=e.parse(s.innerHTML,t)}else o=e.parse(a,t)}else o=a;if(u(o)&&(this.partials=o.partials,o=o.template),o&&1===o.length&&"string"==typeof o[0]&&(o=o[0]),this.template=o,t.partials)for(n in t.partials)if(t.partials.hasOwnProperty(n)){if(i=t.partials[n],"string"==typeof i){if(!e.parse)throw new Error(U);i=e.parse(i,t)}this.partials[n]=i}for(n in this.partials)this.partials.hasOwnProperty(n)&&1===this.partials[n].length&&"string"==typeof this.partials[n][0]&&(this.partials[n]=this.partials[n][0]);this.el&&this.render({el:this.el,append:t.append,complete:t.complete})},function(){var t,e,i,r;t=function(t,e){var n,i={};for(n=e.length;n--;)i[e[n]]=t[e[n]];return i},e=function(t,e,n,i){for(var r,a=e.length;a--;)r=e[a],t.style[r]=n&&n[r]?"function"==typeof n[r]?n[r](i):n[r]:0},i=function(t,e){var n;if(!e)return t;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r=function(r,a,s,o){return"string"==typeof r&&(r=[r]),function(l,u,c,h,d){var p,f,m,g,v,y,b,w,x,_,k;c=Te(c),y=c.duration||a.duration,n=_e(c.easing||a.easing),b=(c.delay||a.delay||0)+(c.stagger||a.stagger||0)*h.i,w=d?s:o,x=d?o:s,f=window.getComputedStyle(l),v=l.getAttribute("style"),d?(_=l.style.position,k=l.style.visibility,l.style.position="absolute",l.style.visibility="hidden",setTimeout(function(){m=t(f,r),w=s,x=i(m,o),l.style.position=_,l.style.visibility=k,e(l,r,w,c),setTimeout(g,0)},b)):setTimeout(function(){m=t(f,r),w=i(m,o),x=s,e(l,r,w,c),setTimeout(g,0)},b),g=function(){l.style[we+"Duration"]=y/1e3+"s",l.style[we+"Properties"]=r.map(_e).join(","),l.style[we+"TimingFunction"]=n,p=function(){l.removeEventListener(xe,p),d&&l.setAttribute("style",v||""),u()},l.addEventListener(xe,p),e(l,r,x,c)}}},D.slide=r(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","overflowY"],{duration:400,easing:"easeInOut"},{overflowY:"hidden"},{overflowY:"hidden"}),D.fade=r("opacity",{duration:300,easing:"linear"}),D.fly=r(["opacity","left","position"],{duration:400,easing:"easeOut"},{position:"relative",left:"-500px"},{position:"relative",left:0})}();var Te=function(t){return"fast"===t?{duration:200}:"slow"===t?{duration:600}:c(t)?{duration:+t}:t||{}};D.typewriter=function(t,e,n){var i,r,a,s,o,l,u,c;n=Te(n),l=t.innerText,u=l.length,r=n.duration||(n.speed?1e3*u/n.speed:30*u),a=t.getAttribute("style"),s=window.getComputedStyle(t),t.style.visibility="hidden",setTimeout(function(){var e,r,a;r=s.width,e=s.height,a=s.visibility,setTimeout(function(){i=Date.now(),t.style.width=r,t.style.height=e,t.style.visibility="visible",console.log(r),console.log(e),o=!0,c()},n.delay||0)}),c=function(){var n,s,h,d;return n=Date.now(),s=n-i,s>r?(t.innerText=l,t.setAttribute("style",a||""),o=!1,e(),void 0):(h=s/r,d=Math.round(h*u),t.innerText=l.substr(0,d),p(c),void 0)}},function(t){var e,n,i,r;if(R){if(t.fullscreenEnabled=R.fullscreenEnabled||R.mozFullScreenEnabled||R.webkitFullscreenEnabled,!t.fullscreenEnabled)return t.requestFullscreen=t.cancelFullscreen=V,void 0;r=document.createElement("div"),r.requestFullscreen?e="requestFullscreen":r.mozRequestFullScreen?e="mozRequestFullScreen":r.webkitRequestFullscreen&&(e="webkitRequestFullscreen"),t.requestFullscreen=function(t){t[e]&&t[e]()},R.cancelFullscreen?n="cancelFullscreen":R.mozCancelFullScreen?n="mozCancelFullScreen":R.webkitCancelFullScreen&&(n="webkitCancelFullScreen"),t.cancelFullscreen=function(){R[n]()},void 0!==R.fullscreenElement?i="fullscreenElement":void 0!==document.mozFullScreenElement?i="mozFullScreenElement":void 0!==document.webkitFullscreenElement&&(i="webkitFullscreenElement"),t.isFullscreen=function(t){return t===R[i]}}}(e),_=function(t){var n;this.startTime=Date.now();for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},_.prototype={tick:function(){var t,e,n,i,r;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),r=this.root._animations.indexOf(this),-1===r&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keypath,n),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(t,1)}},C={animations:[],tick:function(){var e,n;for(e=0;e<this.animations.length;e+=1)n=this.animations[e],n.tick()||this.animations.splice(e--,1);this.animations.length?t.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){C.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,e,n){var i;if(n.requestAnimationFrame)return p=n.requestAnimationFrame,f=n.cancelAnimationFrame,void 0;for(i=0;i<t.length&&!p;++i)p=n[t[i]+"RequestAnimationFrame"],f=n[t[i]+"CancelAnimationFrame"]||n[t[i]+"CancelRequestAnimationFrame"];p||(p=function(t){var i,r,a;return i=Date.now(),r=Math.max(0,16-(i-e)),a=n.setTimeout(function(){t(i+r)},r),e=i+r,a}),f||(f=function(t){n.clearTimeout(t)})}(["ms","moz","webkit","o"],0,t),function(){var t,e,n,i,r,a;M=function(t,n,i){var r,a,s;t._ractive?(r=t._ractive.roots,a=t._ractive.keypathsByGuid,a[i._guid]||(r[r.length]=i,a[i._guid]=[]),s=a[i._guid],-1===s.indexOf(n)&&(s[s.length]=n)):(m(t,"_ractive",{value:{roots:[i],keypathsByGuid:{}},configurable:!0}),t._ractive.keypathsByGuid[i._guid]=[n],e(t))},A=function(t,e,i){var r,a,s,o;if(!t._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=t._ractive.roots,a=t._ractive.keypathsByGuid,!a[i._guid])throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(s=a[i._guid],o=s.indexOf(e),-1===o)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");s.splice(o,1),s.length||(r.splice(r.indexOf(i),1),a[i._guid]=null),r.length||n(t)},t=function(t,e,n){var i,r,a,o,l,u;u=t._ractive.keypathsByGuid,i=function(t){for(var e=t.length;e--;)r(t[e])},r=function(t){var e=t._transitionManager;t._transitionManager=Pe(t,V),a(t,u[t._guid]),t._transitionManager=e},a=function(t,e){for(var n=e.length;n--;)o(t,e[n])},o=function(t,i){var r,a,o,u,c,h,d;for(Ne(t,i),c=[],h=[],d=0;d<t._deps.length;d+=1)if(r=t._deps[d],r&&(a=r[i])){for(l(t,i,a,c,h),Me(t);c.length;)c.pop().smartUpdate(e,n);for(;h.length;)h.pop().update()}for(Me(t),u=[],o=s(i);o.length;)o.pop(),u[u.length]=o.join(".");u[u.length]=i+".length",Fe(t,u,!0)},l=function(t,e,n,i,r){var a,s;for(a=n.length;a--;)s=n[a],s.type===le?s.update():s.keypath===e&&s.type===Y?i[i.length]=s:r[r.length]=s},i(t._ractive.roots)},i=[],a=["pop","push","reverse","shift","sort","splice","unshift"],a.forEach(function(e){var n=function(){var n=Array.prototype[e].apply(this,arguments);return this._ractive.setting=!0,t(this,e,arguments),this._ractive.setting=!1,n};m(i,e,{value:n})}),r={},r.__proto__?(e=function(t){t.__proto__=i},n=function(t){delete t._ractive,t.__proto__=Array.prototype}):(e=function(t){var e,n;for(e=a.length;e--;)n=a[e],m(t,n,{value:i[n]})},n=function(t){var e;for(e=a.length;e--;)delete t[a[e]];delete t._ractive})}(),function(t){var e,n;x=function(t,i,r,a,s){var o,l;for(this.root=t,this.keypath=i,this.fn=n(r,a.length),this.values=[],this.refs=[],o=a.length;o--;)l=a[o],l[0]?this.values[o]=l[1]:this.refs[this.refs.length]=new e(t,l[1],this,o,s);this.selfUpdating=this.refs.length<=1,this.update()},x.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var t;try{t=this.fn.apply(null,this.values)}catch(e){if(this.root.debug)throw e;t=void 0}return h(t,this.value)||(Ne(this.root,this.keypath),this.root._cache[this.keypath]=t,Ee(this.root,this.keypath),this.value=t),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();Ne(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var t=this.refs.length;t--;)this.refs[t].update();this.deferred&&(this.update(),this.deferred=!1)}},e=function(t,e,n,i,r){this.evaluator=n,this.keypath=e,this.root=t,this.argNum=i,this.type=le,this.priority=r,this.value=n.values[i]=t.get(e),Se(this)},e.prototype={update:function(){var t=this.root.get(this.keypath);h(t,this.value)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this.value=t)},teardown:function(){Oe(this)}},n=function(e,n){var i,r;if(e=e.replace(/❖/g,"_"),t[e])return t[e];for(r=[];n--;)r[n]="_"+n;return i=new Function(r.join(","),"return("+e+")"),t[e]=i,i}}({});var Re;!function(){var t,e;Re=function(e){var n,i,r,a,s;for(this.root=e.root,this.mustache=e,this.args=[],this.scouts=[],n=e.descriptor.x,s=e.parentFragment.indexRefs,this.str=n.s,r=this.unresolved=n.r?n.r.length:0,r||this.init(),i=0;r>i;i+=1)a=n.r[i],s&&void 0!==s[a]?this.resolveRef(i,!0,s[a]):this.scouts[this.scouts.length]=new t(this,a,e.contextStack,i)},Re.prototype={init:function(){this.keypath=e(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(t,e,n){this.args[t]=[e,n],--this.unresolved||this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new x(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},t=function(t,e,n,i){var r,a;a=this.root=t.root,r=Ce(a,e,n),r?t.resolveRef(i,!1,r):(this.ref=e,this.argNum=i,this.resolver=t,this.contextStack=n,a._pendingResolution[a._pendingResolution.length]=this)},t.prototype={resolve:function(t){this.keypath=t,this.resolver.resolveRef(this.argNum,!1,t)},teardown:function(){this.keypath||ke(this)}},e=function(t,e){var n;return n=t.replace(/❖([0-9]+)/g,function(t,n){return e[n][1]}),"("+n.replace(/[\.\[\]]/g,"-")+")"}}();var ze,je=function(t,n,i,r,a){var s,o,l,u,c;"string"==typeof t?s=t:(s=t.n,t.a?o=t.a:t.d&&(l=new w({descriptor:t.d,root:n,owner:i,contextStack:parentFragment.contextStack}),o=l.toJson(),l.teardown())),c=n.transitions[s]||e.transitions[s],c&&(u=n._transitionManager,u.push(),c.call(n,i.node,u.pop,o,u.info,a))};!function(){var t,n;ze=function(i,r){var a,s;if(s=t(i,r))return s;if(s=t(e,r))return s;if(a=R.getElementById(r),a&&"SCRIPT"===a.tagName){if(!e.parse)throw new Error(U);e.partials[r]=e.parse(a.innerHTML)}return s=e.partials[r],s?n(s):(i.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+r+'"'),[])},t=function(t,i){if(t.partials[i]){if("string"==typeof t.partials[i]){if(!e.parse)throw new Error(U);t.partials[i]=e.parse(t.partials[i])}return n(t.partials[i])}},n=function(t){return 1===t.length&&"string"==typeof t[0]?t[0]:t}}(),O=function(t,e){var n,i,r,a,s;if(t.owner=e.owner,t.root=e.root,t.parentNode=e.parentNode,t.contextStack=e.contextStack||[],t.owner.type===Y&&(t.index=e.index),t.owner.parentFragment&&(a=t.owner.parentFragment.indexRefs)){t.indexRefs=y();for(s in a)t.indexRefs[s]=a[s]}for(e.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[e.indexRef]=e.index),t.items=[],r={parentFragment:t},n=e.descriptor?e.descriptor.length:0,i=0;n>i;i+=1)r.descriptor=e.descriptor[i],r.index=i,t.items[t.items.length]=t.createItem(r)},k=function(t,e){var n,i,r;r=t.parentFragment=e.parentFragment,t.root=r.root,t.contextStack=r.contextStack,t.descriptor=e.descriptor,t.index=e.index||0,t.priority=e.descriptor.p||0,r.parentNode&&(t.parentNode=r.parentNode),t.type=e.descriptor.t,e.descriptor.r&&(r.indexRefs&&void 0!==r.indexRefs[e.descriptor.r]?(i=r.indexRefs[e.descriptor.r],t.indexRef=e.descriptor.r,t.refIndex=i,t.render(t.refIndex)):(n=Ce(t.root,e.descriptor.r,t.contextStack),n?t.resolve(n):(t.ref=e.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),e.descriptor.x&&(t.expressionResolver=new Re(t))},N=function(){var t;t=this.root.get(this.keypath,!0),h(t,this.value)||(this.render(t),this.value=t)},S=function(t){this.keypath=t,Se(this),this.update(),this.expressionResolver&&(this.expressionResolver=null)},function(){var t,e,n;E=function(i,r){var a;return a={descriptor:i.descriptor.f,root:i.root,parentNode:i.parentNode,owner:i},i.descriptor.n?(n(i,r,!0,a),void 0):(l(r)?t(i,r,a):u(r)?e(i,a):n(i,r,!1,a),void 0)},t=function(t,e,n){var i,r;if(e.length<t.length)for(r=t.fragments.splice(e.length,t.length-e.length);r.length;)r.pop().teardown(!0);else if(e.length>t.length)for(i=t.length;i<e.length;i+=1)n.contextStack=t.contextStack.concat(t.keypath+"."+i),n.index=i,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[i]=t.createFragment(n);t.length=e.length},e=function(t,e){t.length||(e.contextStack=t.contextStack.concat(t.keypath),e.index=0,t.fragments[0]=t.createFragment(e),t.length=1)},n=function(t,e,n,i){var r,a,s;if(a=l(e)&&0===e.length,r=n?a||!e:e&&!a){if(t.length||(i.contextStack=t.contextStack,i.index=0,t.fragments[0]=t.createFragment(i),t.length=1),t.length>1)for(s=t.fragments.splice(1);s.length;)s.pop().teardown(!0)}else t.length&&(t.teardownFragments(!0),t.length=0)}}(),function(){var t,n,i,r,a,s,o,l,u;n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},t=function(t,e){var n,i=[];for(n=R.createElement("div"),n.innerHTML=t;n.firstChild;)i[i.length]=n.firstChild,e.appendChild(n.firstChild);return i},b=function(e){return this.docFrag=R.createDocumentFragment(),"string"==typeof e.descriptor?(this.nodes=t(e.descriptor,this.docFrag),void 0):(O(this,e),void 0)},b.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case W:return new o(t,this.docFrag);case Y:return new u(t,this.docFrag);case J:return new l(t,this.docFrag);case Z:return new r(t,this.docFrag);case X:return new a(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(t){var e;if(t&&this.nodes)for(;this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);else if(this.items)for(;this.items.length;)this.items.pop().teardown(t)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():this.owner===this.root?null:this.owner.findNextNode(this)}},a=function(t,e){var n,i=this.parentFragment=t.parentFragment;this.type=X,this.name=t.descriptor.r,n=ze(i.root,t.descriptor.r),this.fragment=new b({descriptor:n,root:i.root,parentNode:i.parentNode,contextStack:i.contextStack,owner:this}),e.appendChild(this.fragment.docFrag)},a.prototype={findNextNode:function(){return this.parentFragment.findNextNode(this)},teardown:function(t){this.fragment.teardown(t)}},i=function(t,e){this.type=B,this.node=R.createTextNode(t.descriptor),this.parentNode=t.parentFragment.parentNode,e.appendChild(this.node)},i.prototype={teardown:function(t){t&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},r=function(t,e){var n,i,r,a,o,l,u,c,h,d,p,f;if(this.type=Z,n=this.parentFragment=t.parentFragment,i=this.descriptor=t.descriptor,this.root=f=n.root,this.parentNode=n.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],i.a&&i.a.xmlns){if(r=i.a.xmlns,"string"!=typeof r)throw new Error("Namespace attribute cannot contain mustaches")
}else r="svg"===i.e.toLowerCase()?ve.svg:this.parentNode.namespaceURI;if(this.node=R.createElementNS(r,i.e),i.f&&("string"==typeof i.f&&this.node.namespaceURI===ve.html?this.node.innerHTML=i.f:(this.fragment=new b({descriptor:i.f,root:f,parentNode:this.node,contextStack:n.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),i.v)for(a in i.v)if(i.v.hasOwnProperty(a))for(o=a.split("-"),l=o.length;l--;)this.addEventProxy(o[l],i.v[a],n.contextStack);this.attributes=[],d=[];for(c in i.a)i.a.hasOwnProperty(c)&&(h=i.a[c],u=new s({element:this,name:c,value:void 0===h?null:h,root:f,parentNode:this.node,contextStack:n.contextStack}),this.attributes[this.attributes.length]=u,u.isBindable&&d.push(u),u.isTwowayNameAttr?p=u:u.update());for(;d.length;)d.pop().bind(this.root.lazy);p&&(p.updateViewModel(),p.update()),e.appendChild(this.node),i.t1&&je(i.t1,f,this,n.contextStack,!0)},r.prototype={addEventProxy:function(t,n,i){var r,a,s,o,l,u,c,h=this.root;if(this.node._ractive||m(this.node,"_ractive",{value:{keypath:i.length?i[i.length-1]:"",index:this.parentFragment.indexRefs}}),r="string"==typeof n?n:n.n,c=t+"="+r,n.a?a=n.a:n.d&&(s=!0,a=new w({descriptor:n.d,root:this.root,owner:this,contextStack:i}),this.proxyFrags||(this.proxyFrags=[]),this.proxyFrags[this.proxyFrags.length]=a),void 0!==a){if(this.node._ractive[c])throw new Error("You cannot have two proxy events with the same trigger event ("+c+")");this.node._ractive[c]={dynamic:s,payload:a}}return(o=h.eventDefinitions[t]||e.eventDefinitions[t])?(h._customProxies[c]||(h._customProxies[c]=function(t){var e,n;if(!t.node)throw new Error("Proxy event definitions must fire events with a `node` property");t.keypath=t.node._ractive.keypath,t.context=h.get(t.keypath),t.index=t.node._ractive.index,t.node._ractive[c]&&(e=t.node._ractive[c],n=e.dynamic?e.payload.toJson():e.payload),h.fire(r,t,n)}),u=h._customProxies[c],l=o(this.node,u),this.customEventListeners[this.customEventListeners.length]=l,void 0):(void 0!==this.node["on"+t]&&h.debug&&console&&console.warn&&console.warn("Invalid event handler ("+t+")"),h._proxies[c]||(h._proxies[c]=function(t){var e,n,i={node:this,original:t,keypath:this._ractive.keypath,context:h.get(this._ractive.keypath),index:this._ractive.index};this._ractive&&this._ractive[c]&&(e=this._ractive[c],n=e.dynamic?e.payload.toJson():e.payload),h.fire(r,i,n)}),u=h._proxies[c],this.eventListeners[this.eventListeners.length]={n:t,h:u},this.node.addEventListener(t,u),void 0)},teardown:function(t){var e,n=this;for(n.fragment&&n.fragment.teardown(!1);n.attributes.length;)n.attributes.pop().teardown();for(;n.eventListeners.length;)e=n.eventListeners.pop(),n.node.removeEventListener(e.n,e.h);for(;n.customEventListeners.length;)n.customEventListeners.pop().teardown();if(this.proxyFrags)for(;this.proxyFrags.length;)this.proxyFrags.pop().teardown();this.descriptor.t2&&je(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),t&&this.root._transitionManager.nodesToDetach.push(this.node)},firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){}},s=function(t){var e,i,r,a,s,o,l,u,c,h,d;if(e=t.name,i=t.value,r=e.indexOf(":"),-1!==r&&(a=e.substr(0,r),"xmlns"!==a&&(e=e.substring(r+1),this.namespace=ve[a],!this.namespace)))throw'Unknown namespace ("'+a+'")';if(null===i||"string"==typeof i)return this.namespace?t.parentNode.setAttributeNS(this.namespace,e,i):t.parentNode.setAttribute(e,i),"id"===e.toLowerCase()&&(t.root.nodes[i]=t.parentNode),this.name=e,this.value=i,void 0;for(this.root=t.root,this.element=t.element,this.parentNode=t.parentNode,this.name=e,this.lcName=e.toLowerCase(),this.namespace||t.parentNode.namespaceURI!==ve.html||(l=this.lcName,u=n[l]||l,void 0!==t.parentNode[u]&&(this.propertyName=u),("boolean"==typeof t.parentNode[u]||"value"===u)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new w({descriptor:i,root:this.root,owner:this,contextStack:t.contextStack}),this.selfUpdating=!0,c=this.fragment.items.length;c--;)if(h=this.fragment.items[c],h.type!==B){if(h.type!==W){this.selfUpdating=!1;break}if(d){this.selfUpdating=!1;break}d=!0}this.root.twoway&&(s=this.element.descriptor.e.toLowerCase(),o=!("name"!==u&&"value"!==u&&"checked"!==u||"input"!==s&&"textarea"!==s&&"select"!==s)),o&&(this.isBindable=!0,"name"===u&&(this.isTwowayNameAttr=!0)),this.ready=!0},s.prototype={bind:function(t){var e,n,i,r,a=this,s=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==W||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;if(this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===s.tagName&&"value"===this.propertyName)for(e=s.getElementsByTagName("option"),r=e.length,i=0;r>i;i+=1)if(n=e[i],n.hasAttribute("selected")){this.root.set(this.keypath,n.value);break}"checkbox"===s.type||"radio"===s.type?"name"===this.propertyName?(s.name="{{"+this.keypath+"}}",this.updateViewModel=function(){s.checked&&a.root.set(a.keypath,s.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){a.root.set(a.keypath,s.checked)}):this.updateViewModel=function(){var t;t=s.value,"0"===t?t=0:""!==t&&(t=+t||t),a.root.set(a.keypath,t)},this.updateViewModel&&(this.twoway=!0,s.addEventListener("change",this.updateViewModel),s.addEventListener("click",this.updateViewModel),s.addEventListener("blur",this.updateViewModel),t||(s.addEventListener("keyup",this.updateViewModel),s.addEventListener("keydown",this.updateViewModel),s.addEventListener("keypress",this.updateViewModel),s.addEventListener("input",this.updateViewModel)))},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,"name"===this.propertyName&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var t,e;if(!this.ready)return this;if(this.twoway){if(e=this.lcName,t=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=t===this.parentNode.value?!0:!1,this;if(R.activeElement===this.parentNode)return this}if(t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=t,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=this.parentNode),this.parentNode.setAttribute(this.name,t),this.value=t}return this}},o=function(t,e){this.type=W,this.node=R.createTextNode(""),e.appendChild(this.node),k(this,t)},o.prototype={update:N,resolve:S,teardown:function(t){ke(this),t&&this.parentNode.removeChild(this.node)},render:function(t){this.node.data=void 0===t?"":t},firstNode:function(){return this.node}},l=function(t,e){this.type=J,this.nodes=[],this.docFrag=R.createDocumentFragment(),this.initialising=!0,k(this,t),e.appendChild(this.docFrag),this.initialising=!1},l.prototype={update:N,resolve:S,teardown:function(t){if(t)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());ke(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());return void 0===e?(this.nodes=[],void 0):(this.nodes=t(e,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),void 0)}},u=function(t,e){this.type=Y,this.fragments=[],this.length=0,this.docFrag=R.createDocumentFragment(),this.initialising=!0,k(this,t),e.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:N,resolve:S,smartUpdate:function(t,e){var n;("push"===t||"unshift"===t||"splice"===t)&&(n={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i)),this[t]&&this[t](n,e)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(t,e){var n,i,r;for(n=this.length,i=n+e.length,r=n;i>r;r+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+r),t.index=r,this.fragments[r]=this.createFragment(t);this.length+=e.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(t,e){this.splice(t,[0,0].concat(new Array(e.length)))},splice:function(t,e){var n,i,r,a,s,o,l,u,h;if(e.length&&(o=+(e[0]<0?this.length+e[0]:e[0]),i=Math.max(0,e.length-2),r=void 0!==e[1]?e[1]:this.length-o,a=i-r)){if(0>a){for(l=o-a,s=o;l>s;s+=1)this.fragments[s].teardown(!0);this.fragments.splice(o,-a)}else{for(l=o+a,n=this.fragments[o]?this.fragments[o].firstNode():this.parentFragment.findNextNode(this),u=[o,0].concat(new Array(a)),this.fragments.splice.apply(this.fragments,u),s=o;l>s;s+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+s),t.index=s,this.fragments[s]=this.createFragment(t);this.parentNode.insertBefore(this.docFrag,n)}this.length+=a,h=o+i,c(this.root,this,h,this.length,a)}},teardown:function(t){this.teardownFragments(t),ke(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(;this.fragments.length;)this.fragments.shift().teardown(t)},render:function(t){E(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var e=new b(t);return this.docFrag.appendChild(e.docFrag),e}};var c=function(t,e,n,i,r){var a,s,o,l,u,c,d;for(o=e.descriptor.i,a=n;i>a;a+=1)s=e.fragments[a],l=a-r,u=a,c=e.keypath+"."+(a-r),d=e.keypath+"."+a,s.index+=r,h(s,o,l,u,r,c,d);Me(t)},h=function(t,e,n,i,r,a,s){var o,l,u;for(t.indexRefs&&void 0!==t.indexRefs[e]&&(t.indexRefs[e]=i),o=t.contextStack.length;o--;)u=t.contextStack[o],u.substr(0,a.length)===a&&(t.contextStack[o]=u.replace(a,s));for(o=t.items.length;o--;)switch(l=t.items[o],l.type){case Z:d(l,e,n,i,r,a,s);break;case X:h(l.fragment,e,n,i,r,a,s);break;case Y:case W:case J:p(l,e,n,i,r,a,s)}},d=function(t,e,n,i,r,a,s){var o,l;for(o=t.attributes.length;o--;)l=t.attributes[o],l.fragment&&(h(l.fragment,e,n,i,r,a,s),l.twoway&&l.updateBindings());if(t.proxyFrags)for(o=t.proxyFrags.length;o--;)h(t.proxyFrags[o],e,n,i,r,a,s);t.node._ractive&&(t.node._ractive.keypath.substr(0,a.length)===a&&(t.node._ractive.keypath=t.node._ractive.keypath.replace(a,s)),t.node._ractive.index[e]=i),t.fragment&&h(t.fragment,e,n,i,r,a,s)},p=function(t,e,n,i,r,a,s){var o;if(t.descriptor.x&&(t.keypath&&Oe(t),t.expressionResolver&&t.expressionResolver.teardown(),t.expressionResolver=new Re(t)),t.keypath?t.keypath.substr(0,a.length)===a&&(Oe(t),t.keypath=t.keypath.replace(a,s),Se(t)):t.indexRef===e&&(t.refIndex=i,t.render(i)),t.fragments)for(o=t.fragments.length;o--;)h(t.fragments[o],e,n,i,r,a,s)}}(),function(){var t,e,n,i;w=function(t){O(this,t)},w.prototype={createItem:function(r){if("string"==typeof r.descriptor)return new t(r.descriptor);switch(r.descriptor.t){case W:return new e(r);case J:return new n(r);case Y:return new i(r);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===W&&(t=this.items[0].value,void 0!==t)?t:this.toString()},toString:function(){return this.items.join("")},toJson:function(){var t,e;t=this.toString();try{e=JSON.parse(t)}catch(n){e=t}return e}},t=function(t){this.type=B,this.text=t},t.prototype={toString:function(){return this.text},teardown:function(){}},e=function(t){this.type=W,k(this,t)},e.prototype={update:N,resolve:S,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){ke(this)},toString:function(){return void 0===this.value?"":this.value}},n=e,i=function(t){this.type=Y,this.fragments=[],this.length=0,k(this,t)},i.prototype={update:N,resolve:S,teardown:function(){this.teardownFragments(),ke(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){E(this,t),this.parentFragment.bubble()},createFragment:function(t){return new w(t)},toString:function(){return this.fragments.join("")}}}();var Pe=function(t,e){var n;return n={active:0,info:{i:0},push:function(){n.active+=1,n.info.i+=1},pop:function(){n.active-=1,!n.active&&n.ready&&n.complete()},complete:function(){var i,r;for(i=n.nodesToDetach.length;i--;)r=n.nodesToDetach.pop(),r.parentNode.removeChild(r);e&&e.call(t)},nodesToDetach:[]}};s=function(t){var e,n,i,r,a;if(I[t])return I[t].concat();for(i=[],r=t,n=0;r.length;){if(e=r.indexOf(".",n),-1===e)a=r,r="";else{if("\\"===r.charAt(e-1)&&"\\"!==r.charAt(e-2)){n=e+1;continue}a=r.substr(0,e),n=0}/\[/.test(a)?i=i.concat(a.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=a,r=r.substring(e+1)}return I[t]=i,i.concat()},o=Object.prototype.toString,l=function(t){return"[object Array]"===o.call(t)},h=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},c=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},u=function(t){return"[object Object]"===o.call(t)&&"function"!=typeof t},d=function(t){var e;if("undefined"!=typeof window){if(!t)throw new Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=R.getElementById(t),!e&&R.querySelector&&(e=R.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw new Error("Could not find container element")}},F=function(t){var e,n,i,r;for(e=0;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e+1],(n.mustacheType===K||n.mustacheType===Q)&&(t.splice(e,1),i&&r&&i.type===B&&r.type===B&&(i.value+=r.value,t.splice(e,1)),e-=1);return t},L=function(t){var e,n,i;for(i="";t.length;){if(e=t.indexOf("<!--"),n=t.indexOf("-->"),-1===e&&-1===n){i+=t;break}if(-1!==e&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===e||e>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=t.substr(0,e),t=t.substring(n+3)}return i},T=function(t){var e,n,i,r,a,s;for(a=/^\s*\r?\n/,s=/\r?\n\s*$/,e=2;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],n.type===B&&i.type===te&&r.type===B&&s.test(r.value)&&a.test(n.value)&&(i.mustacheType!==W&&i.mustacheType!==J&&(r.value=r.value.replace(s,"\n")),n.value=n.value.replace(a,""),""===n.value&&t.splice(e--,1));return t};var De;!function(){var t,e,n,i,r,a,s,o,l,c,h,d;De=function(t,e,n,i){var a,s;return a={pos:0,tokens:t||[],next:function(){return a.tokens[a.pos]},options:n},s=new r(a,e,i)},t=function(t,r,a){return t.next()?e(t,a)||n(t,r,a)||i(t,r,a):null},e=function(t,e){var n=t.next();return n.type===B?(t.pos+=1,new a(n,e)):null},n=function(t,e,n){var i=t.next();return i.type===te||i.type===J?i.mustacheType===Y||i.mustacheType===G?new o(i,t,e,n):new s(i,t,e):null},i=function(t,e,n){var i,r=t.next();return r.type===ee?(i=new l(r,t,e,n),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(i.lcTag)?null:i):null},h=function(t){var e,n,i,r="";if(!t)return"";for(n=0,i=t.length;i>n;n+=1){if(e=t[n].toString(),e===!1)return!1;r+=e}return r},d=function(t,e){var n,i;return e||(n=h(t),n===!1)?i=t.map(function(t){return t.toJson(e)}):n},r=function(e,n,i){var r,a;for(r=this.items=[],a=t(e,n,i);null!==a;)r[r.length]=a,a=t(e,n,i)},r.prototype={toJson:function(t){var e=d(this.items,t);return e},toString:function(){var t=h(this.items);return t}},function(){var t,e,n;a=function(t,e){this.type=B,this.text=e?t.value:t.value.replace(n," ")},a.prototype={toJson:function(){return this.decoded||(this.decoded=e(this.text))},toString:function(){return this.text}},t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},e=function(e){var n;return n=e.replace(/&([a-zA-Z]+);/,function(e,n){return t[n]?String.fromCharCode(t[n]):e}),n=n.replace(/&#x([0-9]+);/,function(t,e){return String.fromCharCode(parseInt(e,16))}),n=n.replace(/&#([0-9]+);/,function(t,e){return String.fromCharCode(e)})},n=/\s+/g}(),function(){s=function(t,e,n){this.type=t.type===J?J:t.mustacheType,t.ref&&(this.ref=t.ref),t.expression&&(this.expr=new c(t.expression)),this.priority=n,e.pos+=1},s.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.x=this.expr.toJson()),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}},o=function(e,n,i,r){var a;for(this.ref=e.ref,this.indexRef=e.indexRef,this.priority=i||0,this.inverted=e.mustacheType===G,e.expression&&(this.expr=new c(e.expression)),n.pos+=1,this.items=[],a=n.next();a;){if(a.mustacheType===$){if(a.ref===this.ref||a.expr&&this.expr){n.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=t(n,this.priority+1,r),a=n.next()}},o.prototype={toJson:function(t){var e;return this.json?this.json:(e={t:Y},this.ref&&(e.r=this.ref),this.indexRef&&(e.i=this.indexRef),this.inverted&&(e.n=!0),this.expr&&(e.x=this.expr.toJson()),this.items.length&&(e.f=d(this.items,t)),this.priority&&(e.p=this.priority),this.json=e,e)},toString:function(){return!1}}}(),function(){var e,n,i,r,a,s,o,u,c,p,f,m,g,v;l=function(n,i,r,s){var l,u,h,d,f,m,v;if(this.lcTag=n.name.toLowerCase(),this.priority=r=r||0,this.tag=a[this.lcTag]?a[this.lcTag]:this.lcTag,i.pos+=1,s=s||"pre"===this.lcTag,n.attrs&&(h=g(n.attrs),u=h.attrs,d=h.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(u=u.filter(p)),f=function(t){var e=t.name.toLowerCase();return{name:o[e]?o[e]:e,value:De(t.value,r+1)}},m=function(t){var e,n,i,a;if(a=function(){throw new Error("Illegal proxy event")},t.name&&t.value||a(),e={domEventName:t.name},n=t.value,n[0].type!==B&&a(),i=n[0].value.indexOf(":"),-1===i)n.length>1&&a(),e.name=n[0].value;else{if(e.name=n[0].value.substr(0,i),n[0].value=n[0].value.substring(i+1),n[0].value||n.shift(),1===n.length&&n[0].type===B)try{e.args=JSON.parse(n[0].value)}catch(s){e.args=n[0].value}e.dynamicArgs=De(n,r+1)}return e},u.length&&(this.attributes=u.map(f)),d.length&&(this.proxies=d.map(m)),h.intro&&(this.intro=m(h.intro)),h.outro&&(this.outro=m(h.outro))),n.selfClosing&&(this.selfClosing=!0),-1!==e.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=c[this.lcTag],this.items=[],l=i.next();l&&l.mustacheType!==$;){if(l.type===ee){if(l.closing){l.name.toLowerCase()===this.lcTag&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(l.name.toLowerCase()))break}this.items[this.items.length]=t(i,this.priority+1),l=i.next()}s||(v=this.items[0],v&&v.type===B&&(v.text=v.text.replace(q,""),v.text||this.items.shift()),v=this.items[this.items.length-1],v&&v.type===B&&(v.text=v.text.replace(H,""),v.text||this.items.pop()))}},l.prototype={toJson:function(t){var e,n,i,r,a,s;if(e={t:Z,e:this.tag},this.attributes&&this.attributes.length)for(e.a={},s=this.attributes.length,a=0;s>a;a+=1){if(n=this.attributes[a].name,e.a[n])throw new Error("You cannot have multiple elements with the same name");void 0===this.attributes[a].value&&(i=null),i=d(this.attributes[a].value.items,t),e.a[n]=i}if(this.items&&this.items.length&&(e.f=d(this.items,t)),this.proxies&&this.proxies.length)for(e.v={},s=this.proxies.length,a=0;s>a;a+=1)r=this.proxies[a],e.v[r.domEventName]=r.args?{n:r.name,a:r.args}:r.dynamicArgs?{n:r.name,d:d(r.dynamicArgs.items,t)}:r.name;return this.intro&&(e.t1=this.intro.args?{n:this.intro.name,a:this.intro.args}:this.intro.dynamicArgs?{n:this.intro.name,d:d(this.intro.dynamicArgs.items,t)}:this.intro.name),this.outro&&(e.t2=this.outro.args?{n:this.outro.name,a:this.outro.args}:this.outro.dynamicArgs?{n:this.outro.name,d:d(this.outro.dynamicArgs.items,t)}:this.outro.name),this.json=e,e},toString:function(){var t,i,r,a,s,o,l,u;if(void 0!==this.str)return this.str;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(l=h(this.items),l===!1)return this.str=!1;if(this.proxies||this.intro||this.outro)return this.str=!1;if(u=-1!==e.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(i=0,r=this.attributes.length;r>i;i+=1){if(s=this.attributes[i].name.toLowerCase(),-1!==s.indexOf(":"))return this.str=!1;if("id"===s||"intro"===s||"outro"===s)return this.str=!1;if(a=" "+this.attributes[i].name,void 0!==this.attributes[i].value){if(o=this.attributes[i].value.toString(),o===!1)return this.str=!1;""!==o&&(a+="=",a+=/[\s"'=<>`]/.test(o)?'"'+o.replace(/"/g,"&quot;")+'"':o)}t+=a}return this.selfClosing&&!u?(t+="/>",this.str=t):(t+=">",u?this.str=t:(t+=l,t+="</"+this.tag+">",this.str=t))}},e="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),u="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),r="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),s="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),i=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},a=i(r),o=i(s),c={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},p=function(t){return"on"!==t.name.substr(0,2)},f=function(t){return"proxy-"!==t.name.substr(0,6)},m=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1},g=function(t){var e,n,i,r,a,s;for(i={},e=[],n=[],a=t.length,r=0;a>r;r+=1)if(s=t[r],"intro"===s.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=s}else if("outro"===s.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=s}else"proxy-"===s.name.substr(0,6)?(s.name=s.name.substring(6),n[n.length]=s):e[e.length]=s;return i.attrs=e,i.proxies=n,i},v=/^([a-zA-Z_$][a-zA-Z_$0-9]*)(?::(.+))?$/}(),function(){var t,e;c=function(n){this.refs=[],t(n,this.refs),this.str=e(n,this.refs)},c.prototype={toJson:function(){return{r:this.refs,s:this.str}}},t=function(e,n){var i;if(e.t===le&&-1===n.indexOf(e.n)&&n.unshift(e.n),e.o)if(u(e.o))t(e.o,n);else for(i=e.o.length;i--;)t(e.o[i],n);e.x&&t(e.x,n),e.r&&t(e.r,n)},e=function(t,n){var i=function(t){return e(t,n)};switch(t.t){case se:case oe:case ne:return t.v;case ie:return"'"+t.v.replace(/'/g,"\\'")+"'";case re:return"["+t.m.map(i).join(",")+"]";case he:return("typeof"===t.s?"typeof ":t.s)+e(t.o,n);case fe:return e(t.o[0],n)+t.s+e(t.o[1],n);case me:return e(t.x,n)+"("+(t.o?t.o.map(i).join(","):"")+")";case de:return"("+e(t.x,n)+")";case ce:return e(t.x,n)+e(t.r,n);case ue:return t.n?"."+t.n:"["+e(t.x,n)+"]";case pe:return e(t.o[0],n)+"?"+e(t.o[1],n)+":"+e(t.o[2],n);case le:return"❖"+n.indexOf(t.n);default:throw new Error("Could not stringify expression token. This error is unexpected")}}}()}();var Ve;!function(){var t,e,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,v,y,b,w,x,_;Ve=function(t){var e=i(t)||r(t)||a(t)||s(t);return e},_=function(t,e){var n=t.remaining().substr(0,40);throw 40===n.length&&(n+="..."),new Error('Tokenizer failed: unexpected string "'+n+'" (expected '+e+")")},t=function(t,e){var n;return n=t.str.substr(t.pos,e.length),n===e?(t.pos+=e.length,e):null},e=function(t){return function(e){var n=t.exec(e.str.substring(e.pos));return n?(e.pos+=n[0].length,n[1]||n[0]):null}},n=function(t){var e=q.exec(t.str.substring(t.pos));return e?(t.pos+=e[0].length,e[0]):null},l=e(/^[^\s=]+/),u=function(e){var i,r,a;return t(e,"=")?(i=e.pos,n(e),(r=l(e))?(n(e),(a=l(e))?(n(e),t(e,"=")?[r,a]:(e.pos=i,null)):(e.pos=i,null)):(e.pos=i,null)):null},c=e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),h=function(e){var n,i,r,a,s;if(n=e.pos,a=t(e,".")||"",s=c(e)||"",a&&!s)return a;if(i=a+s,!i)return null;for(r=d(e);null!==r;)i+=r,r=d(e);return i},d=function(t){return p(t)||f(t)},p=e(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),f=function(t){var e=m(t);return e?"."+e:null},m=e(/^\[(0|[1-9][0-9]*)\]/),g=function(t){var e,n,i,r,a;if(e=t.pos,n="",i=w(t),i&&(n+=i),r=v(t),r&&(n+=r),n)for(a=g(t);a;)n+=a,a=g(t);return n},v=e(/^[^\\']+/),y=function(t){var e,n,i,r,a;if(e=t.pos,n="",i=w(t),i&&(n+=i),r=b(t),r&&(n+=r),!n)return"";for(a=y(t);""!==a;)n+=a;return n},b=e(/^[^\\"]+/),w=function(t){var e,n="";for(e=x(t);e;)n+=e,e=x(t);return n||null},x=function(e){var n;return t(e,"\\")?(n=e.str.charAt(e.pos),e.pos+=1,n):null},function(){var a,s,l,c;i=function(e){var i,r=e.pos;return t(e,e.delimiters[0])?(i=u(e))?t(e,e.delimiters[1])?(e.delimiters=i,{type:te,mustacheType:Q}):(e.pos=r,null):(i=a(e),null===i?(e.pos=r,null):(n(e),t(e,e.delimiters[1])||_(e,'"'+e.delimiters[1]+'"'),i)):null},r=function(e){var i,r=e.pos;return t(e,e.tripleDelimiters[0])?(i=u(e))?t(e,e.delimiters[1])?(e.tripleDelimiters=i,{type:Q}):(e.pos=r,null):(n(e),i=a(e,!0),null===i?(e.pos=r,null):(n(e),t(e,e.tripleDelimiters[1])?i:(e.pos=r,null))):null},a=function(e,i){var r,a,u,c,d,p,f;if(r=e.pos,a={type:i?J:te},!i&&(u=s(e),a.mustacheType=u||W,u===K&&(p=e.remaining(),f=p.indexOf(e.delimiters[1]),-1!==f)))return e.pos+=f,a;if(n(e),t(e,"("))n(e),c=o(e),n(e),t(e,")")||_(e,'")"'),a.expression=c;else if(a.ref=h(e),!a.ref)return e.pos=r,null;return d=l(e),null!==d&&(a.indexRef=d),a},c={"#":Y,"^":G,"/":$,">":X,"!":K,"&":W},s=function(t){var e=c[t.str.charAt(t.pos)];return e?(t.pos+=1,e):null},l=e(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){var r,s,o,l,u,c,h,d,p,f,m,v,b,w;a=function(t){return r(t)||s(t)},r=function(e){var n,i,r;return n=e.pos,t(e,"<")?(i={type:ee},i.name=o(e),i.name?(r=l(e),r&&(i.attrs=r),t(e,"/")&&(i.selfClosing=!0),t(e,">")?i:(e.pos=n,null)):(e.pos=n,null)):null},s=function(e){var n,i;if(n=e.pos,!t(e,"<"))return null;if(i={type:ee,closing:!0},!t(e,"/"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected "/")');if(i.name=o(e),!i.name)throw new Error("Unexpected character "+e.remaining().charAt(0)+" (expected tag name)");if(!t(e,">"))throw new Error("Unexpected character "+e.remaining().charAt(0)+' (expected ">")');return i},o=e(/^[a-zA-Z][a-zA-Z0-9]*/),l=function(t){var e,i,r;if(e=t.pos,n(t),r=u(t),!r)return t.pos=e,null;for(i=[];null!==r;)i[i.length]=r,n(t),r=u(t);return i},u=function(t){var e,n,i;return(n=c(t))?(e={name:n},i=h(t),i&&(e.value=i),e):null},c=e(/^[^\s"'>\/=]+/),h=function(e){var i,r;
return i=e.pos,n(e),t(e,"=")?(r=m(e)||b(e)||d(e),null===r?(e.pos=i,null):r):(e.pos=i,null)},f=e(/^[^\s"'=<>`]+/),p=function(t){var e,n,i;return e=t.pos,(n=f(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:B,value:n}):null},d=function(t){var e,n;for(e=[],n=i(t)||p(t);null!==n;)e[e.length]=n,n=i(t)||p(t);return e.length?e:null},v=function(t){var e,n,i;return e=t.pos,(n=g(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:B,value:n}):null},m=function(e){var n,r,a;if(n=e.pos,!t(e,"'"))return null;for(r=[],a=i(e)||v(e);null!==a;)r[r.length]=a,a=i(e)||v(e);return t(e,"'")?r:(e.pos=n,null)},w=function(t){var e,n,i;return e=t.pos,(n=y(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:B,value:n}):null},b=function(e){var n,r,a;if(n=e.pos,!t(e,'"'))return null;for(r=[],a=i(e)||w(e);null!==a;)r[r.length]=a,a=i(e)||w(e);return t(e,'"')?r:(e.pos=n,null)}}(),function(){s=function(t){var e,n;return e=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(n){var i=t.str.indexOf(n,t.pos);-1!==i&&(e=Math.min(i,e))}),e===t.pos?null:(n=t.str.substring(t.pos,e),t.pos=e,{type:B,value:n})}}(),function(){var i,r,a,s,l,u,h,d,p,f,m,v,b,w,x,k,N,S,O,E,C,M,A,F,L,T,R;o=function(t){var e,n;return e=t.pos,n=f(t)},i=function(e){var r,a,s,l;if(r=e.pos,n(e),s=o(e),null===s)return null;if(a=[s],n(e),t(e,",")){if(l=i(e),null===l)return e.pos=r,null;a=a.concat(l)}return a},s=function(e){var i,r;return i=e.pos,t(e,"(")?(n(e),(r=o(e))?(n(e),t(e,")")?{t:de,x:r}:(e.pos=i,null)):(e.pos=i,null)):null},l=function(t){return N(t)||x(t)||s(t)},u=function(t){var e,n,i;if(e=l(t),!e)return null;if(n=k(t),!n)return e;for(;null!==n;)i={t:ce,x:e,r:n},e=i,n=k(t);return i},h=function(e){var r,a,s,o;return(a=u(e))?(r=e.pos,t(e,"(")?(n(e),s=i(e),n(e),t(e,")")?(o={t:me,x:a},s&&(o.o=s),o):(e.pos=r,a)):a):null},r=function(e,i){return function(r){var a,s;return t(r,e)?(a=r.pos,n(r),s=o(r),s||_(r,"an expression"),{s:e,o:s,t:he}):i(r)}},function(){var t,e,n,i,a;for(i="! ~ + - typeof".split(" "),a=h,t=0,e=i.length;e>t;t+=1)n=r(i[t],a),a=n;d=a}(),a=function(e,i){return function(r){var a,s,l;return(s=i(r))?(a=r.pos,n(r),t(r,e)?(n(r),l=o(r),l?{t:fe,s:e,o:[s,l]}:(r.pos=a,s)):(r.pos=a,s)):null}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=d,t=0,e=i.length;e>t;t+=1)n=a(i[t],r),r=n;p=r}(),f=function(e){var i,r,a,s;return(r=p(e))?(i=e.pos,n(e),t(e,"?")?(n(e),(a=o(e))?(n(e),t(e,":")?(n(e),s=o(e),s?{t:pe,o:[r,a,s]}:(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):null},m=e(/^[0-9]+/),v=e(/^[eE][\-+]?[0-9]+/),b=e(/^\.[0-9]+/),w=e(/^(0|[1-9][0-9]*)/),x=function(e){var n,i,r;return i=t(e,".")||"",n=c(e)||"",r=i+n,r?{t:le,n:r}:null},k=function(e){var i,r,a;if(i=e.pos,n(e),t(e,".")){if(n(e),r=c(e))return{t:ue,n:r};_("a property name")}return t(e,"[")?(n(e),a=o(e),a||_("an expression"),n(e),t(e,"]")||_('"]"'),{t:ue,x:a}):null},N=function(t){var e=E(t)||O(t)||A(t)||C(t)||M(t)||S(t);return e},S=function(e){var i,r;return i=e.pos,n(e),t(e,"[")?(r=expressionList(e),t(e,"]")?{t:re,o:r}:(e.pos=i,null)):(e.pos=i,null)},O=function(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:se,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:se,v:"false"}):null},R=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,A=function(t){var e,n,i;return e=t.pos,(n=c(t))?(i=R.exec(n))?(t.pos=e+i[0].length,{t:oe,v:i[0]}):(t.pos=e,null):null},E=function(t){var e,n;return e=t.pos,(n=b(t))?{t:ne,v:n}:(n=w(t),null===n?null:(n+=b(t)||"",n+=v(t)||"",{t:ne,v:n}))},M=function(e){var i,r;return i=e.pos,n(e),t(e,"{")?(r=F(e),n(e),t(e,"}")?{t:ae,m:r}:(e.pos=i,null)):(e.pos=i,null)},F=function(e){var n,i,r,a;return n=e.pos,r=L(e),null===r?null:(i=[r],t(e,",")?(a=F(e),a?i.concat(a):(e.pos=n,null)):i)},L=function(e){var i,r,a;return i=e.pos,n(e),r=T(e),null===r?(e.pos=i,null):(n(e),t(e,":")?(n(e),a=o(e),null===a?(e.pos=i,null):{t:KEY_VALUE_PAIR,k:r,v:a}):(e.pos=i,null))},T=function(t){return c(t)||C(t)||E(t)},C=function(e){var n,i;return n=e.pos,t(e,'"')?(i=y(e),t(e,'"')?{t:ie,v:i}:(e.pos=n,null)):t(e,"'")?(i=g(e),t(e,"'")?{t:ie,v:i}:(e.pos=n,null)):null}}()}();var Ie;!function(){var t,e,n,i;t=/^\s*$/,e=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,n=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,Ie=function(n,r){var a,s,o,l;return r=r||{},e.test(n)?i(n,r):(r.sanitize===!0&&(r.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),a=qe(n,r),r.preserveWhitespace||(l=a[0],l&&l.type===B&&t.test(l.value)&&a.shift(),l=a[a.length-1],l&&l.type===B&&t.test(l.value)&&a.pop()),s=De(a,0,r,r.preserveWhitespace),o=s.toJson(),"string"==typeof o?[o]:o)},i=function(t,i){var r,a,s,o,l,u;for(s={},r="",a=t;l=e.exec(a);){if(o=l[1],r+=a.substr(0,l.index),a=a.substring(l.index+l[0].length),u=n.exec(a),!u||u[1]!==o)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");s[o]=Ie(a.substr(0,u.index),i),a=a.substring(u.index+u[0].length)}return{template:Ie(r,i),partials:s}}}();var qe=function(t,e){var n,i,r,a,s;for(e=e||{},n={str:L(t),pos:0,delimiters:e.delimiters||["{{","}}"],tripleDelimiters:e.tripleDelimiters||["{{{","}}}"],remaining:function(){return n.str.substring(n.pos)}},i=[];n.pos<n.str.length;){if(r=Ve(n),null===r&&n.remaining())throw a=n.str.substr(0,n.pos).substr(-20),20===a.length&&(a="..."+a),s=n.remaining().substr(0,20),20===s.length&&(s+="..."),new Error("Could not parse template: "+(a?a+"<- ":"")+"failed at character "+n.pos+" ->"+s);i[i.length]=r}return T(i),F(i),i};e.prototype=z,e.adaptors=j,e.eventDefinitions=P,e.partials={},e.easing=n,e.extend=i,e.interpolate=r,e.interpolators=a,e.parse=Ie,e.transitions=D,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("Ractive",[],function(){return e}):t.Ractive=e}(this),define("controllers/Slide",["Ractive"],function(Ractive){var Slide=function(data,el){var stages,fn,i;if(this.html=data.slide,this.css=data.styles,this.data=data.data,stages=data.stages,this.el=el,void 0!==stages)if(isNaN(+stages))try{fn=eval("("+stages+")"),this.stages=fn(this),this.numStages=this.stages.length}catch(err){console.error(err)}else this.numStages=stages;else this.numStages=0;if(this.stages)for(i=this.numStages;i--;)"function"==typeof this.stages[i]&&(this.stages[i]=this.stages[i](this))};return Slide.prototype={enter:function(t){var e,n;if(document.getElementById("SlideStyle").innerHTML=this.css||"",this.ractive=new Ractive({el:this.el,template:this.html,data:this.data}),t){if(this.stages)for(n=this.stages.length,e=0;n>e;e+=1)this.stages[e]&&this.stages[e].redo?this.stages[e].redo(this.ractive,this):this.stages[e]&&this.stages[e].do&&this.stages[e].do(this.ractive,this);this.ractive.set("stage",this.numStages-1),this.currentStage=this.numStages-1}else this.stages&&this.stages[0]&&this.stages[0].do(this.ractive,this),this.ractive.set("stage",0),this.currentStage=0},exit:function(){var t=this;return new Promise(function(e){console.log("tearing down"),t.ractive.teardown(function(){console.log("teardown complete"),e.resolve()})})},next:function(){return this.currentStage<this.numStages-1?(this.currentStage+=1,this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].do(this.ractive,this),this.ractive.set("stage",this.currentStage),!0):!1},prev:function(){return this.currentStage>0?(this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].undo(this.ractive,this),this.currentStage-=1,this.ractive.set("stage",this.currentStage),!0):!1}},Slide}),define("controllers/controller",["./router","./Slide"],function(t,e){var n,i,r,a,s;return i=37,r=38,a=39,s=40,n=function(t,n,i,r){var a,s;s=n[i],s&&(a=new e(s,t.el),a.enter(r),t.currentSlide=a)},function(e){var o,l,u,c;o=e.data.slides,e.state.observe("slideNum",function(t,i){var r=1===i-t;e.currentSlide?e.currentSlide.exit().then(function(){n(e,o,t,r)}):n(e,o,t,r)}),c=function(){var t=e.state.get("slideNum");o[t+1]&&e.state.add("slideNum")},u=function(){var t=e.state.get("slideNum");o[t-1]&&e.state.subtract("slideNum")},l=function(t){t.which===s||t.which===a?(t.preventDefault(),e.currentSlide.next()||c()):(t.which===r||t.which===i)&&(t.preventDefault(),e.currentSlide.prev()||u())},window.addEventListener("keydown",l),t(e)}}),define("app",["domReady","Statesman","data","controllers/controller"],function(t,e,n,i){var r;return r={data:n,state:new e},t(function(){r.el=document.getElementById("container"),i(r)}),window.app=r,r}),function(){require.config({baseUrl:"js",paths:{Ractive:"lib/Ractive",Statesman:"lib/Statesman"},urlArgs:"bust="+Date.now()}),require(["app"])}(),define("main",function(){})}();