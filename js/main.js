/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! Statesman - v0.2.0 - 2013-07-01
* The JavaScript state management library

* 
* Copyright (c) 2013 Rich Harris; MIT Licensed */

/*! Ractive - v0.3.0 - 2013-07-01
* Faster, easier, better interactive web development

* http://rich-harris.github.com/Ractive/
* Copyright (c) 2013 Rich Harris; Licensed MIT */

// These are a subset of the easing equations found at
// https://raw.github.com/danro/easing-js - license info
// follows:

// --------------------------------------------------
// easing.js v0.5.4
// Generic set of easing functions with AMD support
// https://github.com/danro/easing-js
// This code may be freely distributed under the MIT license
// http://danro.mit-license.org/
// --------------------------------------------------
// All functions adapted from Thomas Fuchs & Jeremy Kahn
// Easing Equations (c) 2003 Robert Penner, BSD license
// https://raw.github.com/danro/easing-js/master/LICENSE
// --------------------------------------------------

!function(){var requirejs,require,define;!function(t){function n(t,n){return v.call(t,n)}function e(t,n){var e,i,r,o,a,s,l,d,c,h,u=n&&n.split("/"),p=g.map,f=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(n){for(u=u.slice(0,u.length-1),t=u.concat(t.split("/")),d=0;d<t.length;d+=1)if(h=t[d],"."===h)t.splice(d,1),d-=1;else if(".."===h){if(1===d&&(".."===t[2]||".."===t[0]))break;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((u||f)&&p){for(e=t.split("/"),d=e.length;d>0;d-=1){if(i=e.slice(0,d).join("/"),u)for(c=u.length;c>0;c-=1)if(r=p[u.slice(0,c).join("/")],r&&(r=r[i])){o=r,a=d;break}if(o)break;!s&&f&&f[i]&&(s=f[i],l=d)}!o&&s&&(o=s,a=l),o&&(e.splice(0,a,o),t=e.join("/"))}return t}function i(n,e){return function(){return c.apply(t,y.call(arguments,0).concat([n,e]))}}function r(t){return function(n){return e(n,t)}}function o(t){return function(n){p[t]=n}}function a(e){if(n(f,e)){var i=f[e];delete f[e],m[e]=!0,d.apply(t,i)}if(!n(p,e)&&!n(m,e))throw new Error("No "+e);return p[e]}function s(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function l(t){return function(){return g&&g.config&&g.config[t]||{}}}var d,c,h,u,p={},f={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(t,n){var i,o=s(t),l=o[0];return t=o[1],l&&(l=e(l,n),i=a(l)),l?t=i&&i.normalize?i.normalize(t,r(n)):e(t,n):(t=e(t,n),o=s(t),l=o[0],t=o[1],l&&(i=a(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:i}},u={require:function(t){return i(t)},exports:function(t){var n=p[t];return"undefined"!=typeof n?n:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:l(t)}}},d=function(e,r,s,l){var d,c,g,v,y,w,b=[];if(l=l||e,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],l),c=v.f,"require"===c)b[y]=u.require(e);else if("exports"===c)b[y]=u.exports(e),w=!0;else if("module"===c)d=b[y]=u.module(e);else if(n(p,c)||n(f,c)||n(m,c))b[y]=a(c);else{if(!v.p)throw new Error(e+" missing "+c);v.p.load(v.n,i(l,!0),o(c),{}),b[y]=p[c]}g=s.apply(p[e],b),e&&(d&&d.exports!==t&&d.exports!==p[e]?p[e]=d.exports:g===t&&w||(p[e]=g))}else e&&(p[e]=s)},requirejs=require=c=function(n,e,i,r,o){return"string"==typeof n?u[n]?u[n](e):a(h(n,e).f):(n.splice||(g=n,e.splice?(n=e,e=i,i=null):n=t),e=e||function(){},"function"==typeof i&&(i=r,r=o),r?d(t,n,e,i):setTimeout(function(){d(t,n,e,i)},4),c)},c.config=function(t){return g=t,g.deps&&c(g.deps,g.callback),c},define=function(t,e,i){e.splice||(i=e,e=[]),n(p,t)||n(f,t)||(f[t]=[t,e,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("domReady",[],function(){function t(t){var n;for(n=0;n<t.length;n+=1)t[n](d)}function n(){var n=c;l&&n.length&&(c=[],t(n))}function e(){l||(l=!0,a&&clearInterval(a),n())}function i(t){return l?t(d):c.push(t),i}var r,o,a,s="undefined"!=typeof window&&window.document,l=!s,d=s?document:null,c=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(window.attachEvent){window.attachEvent("onload",e),o=document.createElement("div");try{r=null===window.frameElement}catch(h){}o.doScroll&&r&&window.external&&(a=setInterval(function(){try{o.doScroll(),e()}catch(t){}},30))}"complete"===document.readyState&&e()}return i.version="2.0.1",i.load=function(t,n,e,r){r.isBuild?e(null):i(e)},i}),function(t){var n,e,i,r,o,a,s,l,d,c,h,u,p,f,g,m,v,y,w,b,x={},k={},_={};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),w=Object.defineProperty,b=Object.defineProperties}catch(A){w=function(t,n,e){t[n]=e.value},b=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&w(t,e,n[e])}}!function(){var t=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(e,i,r){var o,a,s,l;return r=r||"",o=[],a=e.replace(t,function(t,n){return-1===o.indexOf(n)&&(o[o.length]=r+n),'m.get("'+n+'")'}),s=new Function("utils","var m=this;try{return "+a+"}catch(e){return undefined}"),l=s.bind?s.bind(i,n.utils):function(){return s.call(i,n.utils)},{getter:l,triggers:o}}}(),n=function(t){b(this,{data:{value:t||{},writable:!0},subs:{value:{},writable:!0},cache:{value:{}},cacheMap:{value:{}},deps:{value:{}},depsMap:{value:{}},refs:{value:{}},refsMap:{value:{}},computed:{value:{}},subsets:{value:{}},deferred:{value:[]},changes:{value:null,writable:!0},upstreamChanges:{value:null,writable:!0},changeHash:{value:null,writable:!0}})},x.add=function(t,n){var e=this.get(t);void 0===n&&(n=1),s(e)&&s(n)&&this.set(t,+e+(void 0===n?1:+n))},function(t){var n,e,i,o;t.compute=function(t,e){var i,r,o;if("object"==typeof t){i={};for(r in t)t.hasOwnProperty(r)&&(o=new n(this,r,t[r]),i[r]=o.value);return i}return o=new n(this,t,e),o.value},n=function(t,n,o){var a;for(t.computed[n]&&t.computed[n].teardown(),this.statesman=t,this.keypath=n,t.computed[n]=this,"string"==typeof o?o=r(o,t):("function"==typeof o&&(o=o()),i(n,o,t.debug)),this.signature=o,this.cache=o.cache,this.refs=[],a=o.dependsOn.length,1===a&&(this.selfUpdating=!0);a--;)this.refs[a]=new e(this,o.dependsOn[a]);this.setting=!0,t.set(this.keypath,this.value=this.getter()),this.setting=!1},n.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.statesman.deferred.push(this),this.deferred=!0)},update:function(){var t;return t=this.getter(),a(t,this.value)||(this.setting=!0,c(this.statesman,this.keypath,t),this.setting=!1,this.value=t),this},getter:function(){var t,n,e;try{if(this.signature.compiled)e=this.signature.compiled();else{for(n=[],t=this.refs.length;t--;)n[t]=this.refs[t].value;e=this.signature.get.apply(this.context,n)}}catch(i){if(this.statesman.debug)throw i;e=void 0}return this.override=!1,e},setter:function(t){if(this.signature.set)try{this.signature.set.call(this.context,t)}catch(n){if(this.statesman.debug)throw n}else if(this.signature.readonly){if(this.statesman.debug)throw new Error('You cannot overwrite a computed value ("'+this.keypath+'"), unless its readonly flag is set true')}else this.override=!0,this.setting=!0,this.statesman.set(this.keypath,t),this.setting=!1},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown(),this.statesman.computed[this.keypath]=null}},e=function(t,n){this.computed=t,this.statesman=t.statesman,this.keypath=n,this.value=this.statesman.get(n),v(this,!0)},e.prototype={update:function(){var t;t=this.statesman.get(this.keypath),a(t,this.value)||(this.value=t,this.computed.bubble())},teardown:function(){y(this,!0)}},o=[],i=function(t,n,e){if(!n.compiled){if(!n.get&&!n.set)throw new Error("Computed values must have either a get() or a set() method, or both");if(n.set||n.readonly===!1||(n.readonly=!0),n.dependsOn?"string"==typeof n.dependsOn&&(n.dependsOn=[n.dependsOn]):n.dependsOn=o,!n.dependsOn.length){if(n.cache&&e)throw new Error("Computed values with no dependencies must be uncached");n.cache=!1}n.cache!==!1&&(n.cache=!0)}if(-1!==n.dependsOn.indexOf(t))throw new Error('A computed value ("'+t+'") cannot depend on itself');return n}}(x),x.get=function(t){return h(this,t&&l(t))};var h=function(t,n,e,i){var r,o,a,s,l;return n?((r=t.computed[n])&&(i||r.cache||r.override||(t.cache[n]=r.getter())),t.cache.hasOwnProperty(n)?t.cache[n]:(e=e||n.split("."),o=e.pop(),a=e.join("."),s=h(t,a,e),"object"==typeof s&&s.hasOwnProperty(o)&&(l=s[o],t.cache[n]=l,t.cacheMap[a]||(t.cacheMap[a]=[]),t.cacheMap[a].push(n)),l)):t.data};!function(t){var n;t.observe=function(t,e,i){var r,o,a,s,l;if(l=!i||i.init!==!1,"function"==typeof t&&(i=e,e=t,t=""),"string"==typeof t)return r=new n(this,t,e,i),l?r.update():r.value=this.get(t),{cancel:function(){r.teardown()}};if("object"!=typeof t)throw new Error("Bad arguments to Statesman.prototype.observe()");i=e,o=[];for(a in t)t.hasOwnProperty(a)&&(o[o.length]=new n(this,a,t[a],i));if(s=o.length,l)for(;s--;)o[s].update();else for(;s--;)o[s].value=this.get(r.keypath);return{cancel:function(){for(s=o.length;s--;)o[s].teardown()}}},n=function(t,n,e,i){this.statesman=t,this.keypath=l(n),this.callback=e,this.context=i&&i.context?i.context:t,v(this)},n.prototype={update:function(){var t;if(t=h(this.statesman,this.keypath),!a(t,this.value)){try{this.callback.call(this.context,t,this.value)}catch(n){if(this.statesman.debug)throw n}this.value=t}},teardown:function(){y(this)}}}(x),x.removeComputedValue=function(t){return this.computed[t]&&this.computed[t].teardown(),this},x.reset=function(t){return this.data={},this.set(t,{silent:!0}),this.fire("reset"),p(this,""),this},function(t){var n,e,i=/^\s*[0-9]+\s*$/;t.set=function(t,n,i){var r,o,a,s;if(this.changes=[],this.upstreamChanges=[],this.changeHash={},"object"==typeof t){i=n;for(a in t)t.hasOwnProperty(a)&&(s=l(a),n=t[a],c(this,s,n))}else s=l(t),c(this,s,n);for(r=[],o=[];this.changes.length;)e(r,this.changes),e(o,this.upstreamChanges),g(this);return i&&i.silent?this:(f(this,o,!0),r.length&&f(this,r),r.length&&this.fire("change",this.changeHash),this)},c=function(t,e,i){var r,o,a;if((a=t.computed[e])&&!a.setting)return a.setter(i),void 0;if(r=h(t,e,null,!0),r!==i)n(t.data,e,i);else if("object"!=typeof i)return;for(u(t,e),t.changes[t.changes.length]=e,t.changeHash[e]=i,o=e.split(".");o.length&&(o.pop(),e=o.join("."),!t.upstreamChanges[e]);)t.upstreamChanges[e]=!0,t.upstreamChanges.push(e)},n=function(t,n,e){for(var r,o=n.split(".");o.length>1;)r=o.shift(),t[r]||(t[r]=i.test(o[0])?[]:{}),t=t[r];t[o[0]]=e},e=function(t,n){for(var e,i=n.length;i--;)e=n[i],t["_"+e]||(t["_"+e]=!0,t[t.length]=e)}}(x),x.subset=function(t){if(!t)throw"No subset path specified";return this.subsets[t]||(this.subsets[t]=new e(t,this)),this.subsets[t]},x.subtract=function(t,n){var e=this.get(t);void 0===n&&(n=1),s(e)&&s(n)&&this.set(t,+e-(void 0===n?1:+n))},x.toggle=function(t){this.set(t,!this.get(t))},u=function(t,n){var e=t.cacheMap[n];if(delete t.cache[n],e)for(;e.length;)u(t,e.pop())},s=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},p=function(t,n,e){var i,r,o;if(i=t.deps[n])for(r=i.length;r--;)i[r].update();if(!e&&(o=t.depsMap[n]))for(r=o.length;r--;)p(t,o[r])},f=function(t,n,e){var i;for(i=n.length;i--;)p(t,n[i],e)},g=function(t){var n,e,i,r,o;for(e=t.changes,i=t.upstreamChanges,t.changes=[],t.upstreamChanges=[],n=i.length;n--;)r=i[n],m(t,r,!0);for(n=e.length;n--;)r=e[n],m(t,r);for(;t.deferred.length;)o=t.deferred.pop(),o.update(),o.deferred=!1},m=function(t,n,e){var i,r,o;if(i=t.refs[n])for(o=i.length;o--;)i[o].update();if(!e&&(r=t.refsMap[n]))for(o=r.length;o--;)m(t,r[o])},v=function(t,n){var e,i,r,o,a,s,l,d;for(e=t.statesman,i=t.keypath,n?(l=e.refs,d=e.refsMap):(l=e.deps,d=e.depsMap),r=l[i]||(l[i]=[]),r[r.length]=t,o=i.split(".");o.length;)o.pop(),a=o.join("."),s=d[a]||(d[a]=[]),void 0===s[i]&&(s[i]=0,s[s.length]=i),s[i]+=1,i=a},y=function(t,n){var e,i,r,o,a,s,l,d;for(e=t.statesman,i=t.keypath,n?(l=e.refs,d=e.refsMap):(l=e.deps,d=e.depsMap),r=l[i],r.splice(r.indexOf(t),1),o=i.split(".");o.length;)o.pop(),a=o.join("."),s=d[a],s[i]-=1,s[i]||(s.splice(s.indexOf(i),1),s[i]=void 0),i=a},o={total:function(t){return t.reduce(function(t,n){return t+n})}},e=function(t,n){var e,i,r=this;this.path=t,this.pathDot=t+".",this.root=n,this.subs={},e=new RegExp("^"+this.pathDot.replace(".","\\.")),i=this.pathDot.length,this.root.on("change",function(t){var n,o,a,s;a={};for(o in t)t.hasOwnProperty(o)&&e.test(o)&&(n=o.substring(i),a[n]=t[o],s=!0);s&&r.fire("change",a)})},k.add=function(t,n){this.root.add(this.pathDot+t,n)},function(t){var n;t.compute=function(t,e){var i,r;if("object"==typeof t){i={};for(r in t)t.hasOwnProperty(r)&&(i[r]=n(this,r,t));return i}return n(this,t,e)},n=function(t,n,e){var i,o=t.pathDot;if("string"==typeof e)return e=r(e,t.root,o),t.root.compute(o+n,e);if("function"==typeof e&&(e=e()),e.dependsOn)for("string"==typeof e.dependsOn&&(e.dependsOn=[e.dependsOn]),i=e.dependsOn.length;i--;)e.dependsOn=o+e.dependsOn;return e.context||(e.context=t),t.root.compute(o+n,e)}}(k),k.get=function(t){return t?this.root.get(this.pathDot+t):this.root.get(this.path)},k.observe=function(t,n,e){var i,r;if("object"==typeof t){e=n,r={};for(i in t)t.hasOwnProperty(i)&&(r[this.pathDot+i]=t[i]);return e?e.context=e.context||this:e={context:this},this.root.observe(r,e)}return"function"==typeof t?(e=n,n=t,t=this.path):t=""===t?this.path:this.pathDot+t,e?e.context=e.context||this:e={context:this},this.root.observe(t,n,e)},k.removeComputedValue=function(t){return this.root.removeComputedValue(this.pathDot+t),this},k.reset=function(t){return this.root.set(this.path,t),this},k.set=function(t,n,e){var i,r;if("object"==typeof t){e=n,r={};for(i in t)t.hasOwnProperty(i)&&(r[this.pathDot+i]=t[i]);return this.root.set(r,e),this}return this.root.set(this.pathDot+t,n,e),this},k.subset=function(t){return this.root.subset(this.pathDot+t)},k.subtract=function(t,n){this.root.subtract(this.pathDot+t,n)},k.toggle=function(t){this.root.toggle(this.pathDot+t)},i={},i.on=function(t,n){var e,i,r,o=this;if("object"==typeof t){r=[];for(i in t)t.hasOwnProperty(i)&&(r[r.length]=this.on(i,t[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[t]||(this.subs[t]=[]),e=this.subs[t],e[e.length]=n,{cancel:function(){o.off(t,n)}}},i.once=function(t,n){var e,i,r,o,a=this;if("object"==typeof t){r=[];for(i in t)t.hasOwnProperty(i)&&(r[r.length]=this.once(i,t[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[t]||(this.subs[t]=[]),e=this.subs[t],o=function(){n.apply(a,arguments),a.off(t,o)},e[e.length]=o,{cancel:function(){a.off(t,o)}}},i.off=function(t,n){var e,i;return t?n?(e=this.subs[t],e&&(i=e.indexOf(n),-1!==i&&e.splice(i,1),e.length||delete this.subs[t]),this):(delete this.subs[t],this):(this.subs={},this)},i.fire=function(t){var n,e,i,r;if(n=this.subs[t],!n)return this;for(i=n.length,e=Array.prototype.slice.call(arguments,1),r=0;i>r;r+=1)n[r].apply(this,e)},function(){var t=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(e,i,r){var o,a,s,l;return r=r||"",a=[],o=e.replace(t,function(t,n){return-1===a.indexOf(n)&&(a[a.length]=r+n),'m.get("'+r+n+'")'}),s=new Function("utils","var m=this;return "+o),l=s.bind?s.bind(i,n.utils):function(){return s.call(i,n.utils)},{compiled:l,dependsOn:a,cache:!!a.length}}}(),a=function(t,n){return null===t&&null===n?!0:"object"==typeof t||"object"==typeof n?!1:t===n},l=function(t){return _[t]||(_[t]=t.replace(/\[\s*([0-9]+)\s*\]/g,".$1"))},d=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},d(x,i),d(k,i),n.prototype=x,e.prototype=k,n.utils=o,"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define("Statesman",[],function(){return n}):t.Statesman=n}(this),define("data",[],function(){return{slides:[{styles:"h1 {\n	font-size: 3em;\n	margin: 0;\n	padding: 0 0 0.1em 0;\n	border-bottom: 1px solid #eee;\n}\n\n.Hero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 50%;\n	padding: 0.5em 5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.SubHero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	top: 50%;\n	padding: 0.5em 0.5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",slide:"<div class='Hero' intro='fade'>\n	<h1>Engineering Delight</h1>\n</div>\n\n<div class='SubHero' intro='fade'>\n	<p><a href='http://twitter.com/rich_harris'>@rich_harris</a>, interactive developer</p>\n	<p>july 6 2013</p>\n</div>"},{styles:".background {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background: url(files/images/team.jpg) no-repeat 50% 50%;\n	background-size: cover;\n\n	-webkit-animation: alternate 60s infinite grow ease-in-out;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 0;\n	padding: 1em 2em;\n\n	color: white;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.caption h2, .caption p {\n	display: inline-block;\n	padding: 0.5em;\n	margin: 0;\n	float: left;\n}\n\n.caption h2 {\n	background-color: rgba(0,0,0,0.7);\n}\n\n.caption p {\n	clear: both;\n	background-color: rgba(0,0,0,0.7);\n}\n\n@-webkit-keyframes grow {\n	from {\n		-webkit-transform: scale(1);\n	}\n\n	to {\n		-webkit-transform: scale(1.2);\n	}\n}",slide:"<div class='background' intro='fade' outro='fade'></div>\n\n<div class='caption' intro='fade' outro='fade'>\n	<h2>The interactive team</h2>\n	<p>A small group of developers and designers producing <em>interactive journalism</em>.</p>\n</div>",images:["files/images/team.jpg"]},{styles:"iframe {\n	width: 250%;\n	height: 250%;\n	overflow: hidden;\n	border: 1px solid #eee;\n	box-shadow: 1px 1px 3px rgba(0,0,0,0.6);\n\n	-webkit-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-moz-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-ms-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	-o-transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n	transform: translate(-50%,-50%) scale(0.4) translate(50%,50%);\n}",stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What is interactive journalism?</h1>\n</div>\n\n<div class='content'>\n\n	\n	<div class='column3 column-withheader {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://www.bbc.co.uk/news/uk-22732218'>BBC: The last Dornier bomber</a>\n		</div>\n		<iframe src='http://www.bbc.co.uk/news/uk-22732218'></iframe>\n	</div>\n\n	<div class='column3 column-withheader {{( stage >= 2 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://www.newyorker.com/sandbox/news/marriage.html'>The New Yorker: Same-sex marriage</a>\n		</div>\n		<iframe src='http://www.newyorker.com/sandbox/news/marriage.html'></iframe>\n	</div>\n\n	<div class='column3 column-withheader {{( stage >= 3 ? \"visible\" : \"invisible\" )}}'>\n		<div class='column3-header'>\n			<a href='http://interactive.guim.co.uk/2013/may/dunalley/'>The Guardian: Firestorm</a>\n		</div>\n		<iframe src='http://interactive.guim.co.uk/2013/may/dunalley/'></iframe>\n	</div>\n</div>"},{styles:".svg {\n	width: 100%;\n	height: 100%;\n}\n\ntext {\n	text-anchor: middle;\n	alignment-baseline: middle;\n	font-size: 3em;\n	fill: white;\n}",stages:"function () {\n\n	return [\n\n		// stage 1\n		null,\n\n		// stage 2\n		null,\n\n		null,\n\n		// stage 3\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					}, { easing: 'easeOut' });\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 400,\n						'interactives.cx': 1200\n					}, { easing: 'easeOut' });\n				}\n			};\n		}\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What does this have to with data visualisation?</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 1600 900'>\n		\n		<!-- data visualisation -->\n		{{#( stage >= 1 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{dataviz.cx}}' cy='450' r='400' fill='rgba(0,128,0,0.5)'/>\n			<text x='400' y='450'>dataviz</text>\n		</g>\n		{{/()}}\n		\n		<!-- interactives -->\n		{{#( stage >= 2 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{interactives.cx}}' cy='450' r='400' fill='rgba(201,83,0,0.5)'/>\n			<text x='1200' y='450'>interactives</text>\n		</g>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<g intro='fade' outro='fade'>\n			<text x='800' y='420'>interactive</text>\n			<text x='800' y='480'>dataviz</text>\n		</g>\n		{{/()}}\n	</svg>\n</div>",data:{dataviz:{cx:400},interactives:{cx:1200}}},{styles:"h3 {\n	text-align: center;\n	margin-top: 0;\n}\n\n.column-withheader {\n	padding-top: 2.5em;\n}",stages:5,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The importance of 'delight'</h1>\n</div>\n\n<div class='content' outro='fade'>\n	<div class='top-half' style='height: 33%'>\n		{{#( stage >= 1 )}}\n			<blockquote intro='fade'>\n				<p intro='typewriter'>all our pleasurable emotions and delightful sensations are to be referred, for their primary origin, to the perception of life</p>\n\n				<p class='author' intro='fade' outro='fade'>\n					<cite><a href='http://openlibrary.org/books/OL25408214M/A_treatise_on_the_leading_causes_of_pleasure_and_delight_in_the_human_mind'>A treatise on the leading causes of pleasure and delight in the human mind</a></cite>\n					&ndash; Watkins 1841\n				</p>\n			</blockquote>\n		{{/()}}\n	</div>\n\n	<div class='bottom-half' style='height: 67%'>\n		<div class='columns-outer'>\n			<div class='columns-inner'>\n				{{#( stage >= 2 )}}\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>beauty</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/venus.jpg);'></div>\n				</div>\n				{{/()}}\n\n				{{#( stage >= 3 )}}\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>understanding</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/matrix2.jpg); background-size: auto 140%;'></div>\n				</div>\n				{{/()}}\n\n				{{#( stage >= 4 )}}\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>aliveness</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/asimo.jpg);'></div>\n				</div>\n				{{/()}}\n			</div>\n		</div>\n	</div>\n\n\n</div>",images:["files/images/venus.jpg","files/images/matrix2.jpg","files/images/asimo.jpg"]},{styles:".image-container {\n	float: right;\n	text-align: right;\n	padding-right: 2em;\n}\n\nimg {\n	width: 18em;\n	margin: 0 0 1em 1em;\n	display: block;\n}",stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The effect of emotion on learning</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<p>A large body of research indicates that <strong>emotion</strong> enhances our ability to <strong>absorb and retain information</strong>.</p>\n	\n	{{#( stage >= 1 )}}\n	<p intro='fade'>This is because</p>\n\n	<div class='image-container' intro='fade'>\n		<img src='files/images/homer.jpg'>\n		<a href='http://www.oneposter.com/product/149622/cant-talk-eating-homer-simpson'>oneposter.com</a>\n	</div>\n\n	<ul>\n		<li intro='fade'>the more engaged we are, the easier it becomes to filter out distractions</li>\n\n		{{#( stage >= 2 )}}\n		<li intro='fade'>different physiological mechanisms come into play</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<li intro='fade'>we continue to think about enjoyable experiences after they've finished</li>\n		{{/()}}\n	</ul>\n	{{/()}}\n\n\n</div>",images:["files/images/homer.jpg"]},{stages:3,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Beauty</h1>\n</div>\n\n<!-- TODO - add some examples (the billion-dollar-o-gram?) -->\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='columns-outer'>\n		<div class='columns-inner'>\n			{{#( stage >= 1 )}}\n			<div class='column2' intro='fly' outro='fade'>\n				<div class='image contain' style='background-image: url(files/images/information-is-beautiful.jpg);'></div>\n			</div>\n			{{/()}}\n\n			{{#( stage >= 2 )}}\n			<div class='column2' intro='fade'>\n				<blockquote>\n					<img src='https://si0.twimg.com/profile_images/83855034/me_avatar2.jpg' style='float: right; margin: 0 0 1em 1em; width: 90px; height: 107px; border: 1px solid #ddd;'>\n\n					<p intro='typewriter:2000'>I usually do some hand-drawn sketches. Then I move onto screen work, creating images by hand in Adobe Illustrator CS4. It’s an amazingly powerful drawing package.</p>\n\n					<p intro='typewriter:{\"delay\":2000,\"duration\":2000}'>Data visualization wise, it can output a few basic graphs, but otherwise, it doesn’t render data. That means, yes, I have to hand position every data point on every single image I create. And, yup, I am that anal.</p>\n\n					<p class='author'>\n						<cite><a href='http://www.los-list.com/blog/bookworm-david-mccandless/'>Lo's List interview</a></cite>\n						&ndash; David McCandless\n					</p>\n				</blockquote>\n			</div>\n			{{/()}}\n		</div>\n	</div>\n</div>",images:["files/images/information-is-beautiful.jpg","https://si0.twimg.com/profile_images/83855034/me_avatar2.jpg"]},{styles:"svg {\n	width: 100%;\n	height: 100%;\n\n	-webkit-transition: -webkit-filter 0.4s;\n}\n\n.axis {\n	fill: none;\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\ntext {\n	text-anchor: middle;\n}\n\n.label {\n	font-size: 0.8em;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.grid-line {\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\n.grid-label {\n	alignment-baseline: middle;\n	color: #ddd;\n	text-anchor: end;\n}\n\n.direct-label {\n	fill: rgb(125,162,0);\n}\n\n.in-bar {\n	fill: white;\n	text-anchor: end;\n	alignment-baseline: middle;\n}\n\n.out-bar {\n	text-anchor: start;\n	alignment-baseline: middle;\n}\n\n.quote-container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	background-color: rgba(255,255,255,0.8);\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.quote_1 {\n	position: absolute;\n	top: 20%;\n	left: 20%;\n	width: 40em;\n	max-width: 50%;\n}\n\n.quote_2 {\n	position: absolute;\n	bottom: 20%;\n	right: 20%;\n	width: 40em;\n	max-width: 50%;\n	z-index: 2;\n}\n\nblockquote {\n	max-width: 24em;\n	box-shadow: 4px 4px 10px rgba(0,0,0,0.2);\n}\n\n.quote_2 blockquote {\n	float: right;\n}\n\n.source, .title {\n	text-anchor: start;\n}\n\n.title {\n	font-size: 2em;\n}\n\na {\n	fill: rgb(0,74,131);\n}\n\n.blurred {\n	/*-webkit-filter: blur(1px);*/\n}",stages:'function () {\n\n	var ufos = [\n		{ state_id: "IA", count: 491,  state_name: "Iowa" },\n		{ state_id: "WI", count: 909,  state_name: "Wisconsin" },\n		{ state_id: "WA", count: 3348, state_name: "Washington" },\n		{ state_id: "MO", count: 1203, state_name: "Missouri" },\n		{ state_id: "ND", count: 114,  state_name: "North Dakota" },\n		{ state_id: "NV", count: 714,  state_name: "Nevada" },\n		{ state_id: "IL", count: 2064, state_name: "Illinois" },\n		{ state_id: "MA", count: 909,  state_name: "Massachusetts" },\n		{ state_id: "GA", count: 989,  state_name: "Georgia" },\n		{ state_id: "FL", count: 2839, state_name: "Florida" },\n		{ state_id: "VA", count: 919,  state_name: "Virginia" },\n		{ state_id: "NY", count: 2413, state_name: "New York" },\n		{ state_id: "MT", count: 348,  state_name: "Montana" },\n		{ state_id: "ME", count: 412,  state_name: "Maine" },\n		{ state_id: "CA", count: 7595, state_name: "California" },\n		{ state_id: "NJ", count: 1128, state_name: "New Jersey" },\n		{ state_id: "OR", count: 1413, state_name: "Oregon" },\n		{ state_id: "CT", count: 614,  state_name: "Connecticut" },\n		{ state_id: "AZ", count: 2098, state_name: "Arizona" },\n		{ state_id: "AK", count: 234,  state_name: "Alaska" },\n		{ state_id: "MI", count: 1554, state_name: "Michigan" },\n		{ state_id: "ID", count: 362,  state_name: "Idaho" },\n		{ state_id: "TN", count: 875,  state_name: "Tennessee" },\n		{ state_id: "AL", count: 498,  state_name: "Alabama" },\n		{ state_id: "OH", count: 1684, state_name: "Ohio" },\n		{ state_id: "IN", count: 1052, state_name: "Indiana" },\n		{ state_id: "SD", count: 142,  state_name: "South Dakota" },\n		{ state_id: "KS", count: 507,  state_name: "Kansas" },\n		{ state_id: "NH", count: 353,  state_name: "New Hampshire" },\n		{ state_id: "TX", count: 3012, state_name: "Texas" },\n		{ state_id: "NC", count: 1220, state_name: "North Carolina" },\n		{ state_id: "SC", count: 586,  state_name: "South Carolina" },\n		{ state_id: "PA", count: 1800, state_name: "Pennsylvania" },\n		{ state_id: "LA", count: 455,  state_name: "Louisiana" },\n		{ state_id: "RI", count: 197,  state_name: "Rhode Island" },\n		{ state_id: "UT", count: 475,  state_name: "Utah" },\n		{ state_id: "CO", count: 1169, state_name: "Colorado" },\n		{ state_id: "KY", count: 687,  state_name: "Kentucky" },\n		{ state_id: "VT", count: 172,  state_name: "Vermont" },\n		{ state_id: "HI", count: 240,  state_name: "Hawaii" },\n		{ state_id: "NM", count: 637,  state_name: "New Mexico" },\n		{ state_id: "AR", count: 530,  state_name: "Arkansas" },\n		{ state_id: "MN", count: 753,  state_name: "Minnesota" },\n		{ state_id: "WV", count: 345,  state_name: "West Virginia" },\n		{ state_id: "MS", count: 321,  state_name: "Mississippi" },\n		{ state_id: "OK", count: 557,  state_name: "Oklahoma" },\n		{ state_id: "WY", count: 167,  state_name: "Wyoming" },\n		{ state_id: "MD", count: 611,  state_name: "Maryland" },\n		{ state_id: "NE", count: 324,  state_name: "Nebraska" },\n		{ state_id: "DE", count: 126,  state_name: "Delaware" },\n		{ state_id: "DC", count: 93,   state_name: "District of Columbia" }\n	];\n\n	ufos.forEach( function ( record, i ) {\n		record.pos = record.i = i;\n	})\n\n	ufos.sort( function ( a, b ) {\n		return b.count - a.count;\n	});\n\n	var sorted = ufos.map( function ( record, i ) {\n		var newRecord = {\n			state_name: record.state_name,\n			state_id: record.state_id,\n			count: record.count,\n			i: record.i,\n			pos: i\n		};\n\n		return newRecord;\n	});\n\n	var linearScale = function ( domain, range ) {\n		var d0 = domain[0], r0 = range[0], multiplier = ( range[1] - r0 ) / ( domain[1] - d0 );\n\n		return function ( num ) {\n			return r0 + ( multiplier * ( num - d0 ) );\n		};\n	};\n\n	var getGridLines = function ( num, min, max ) {\n		var array = [], i, scale = linearScale([ 0, num - 1 ], [ min, max ]);\n\n		i = num;\n		while ( i-- ) {\n			array[i] = scale( i );\n		}\n\n		return array;\n	};\n\n	var width, height, marginX, marginY, x1, x2, y1, y2, minCount, maxCount, xScale, yScale, gridLines;\n\n	width = 1600;\n	height = 800;\n	marginX = [ 70,  0 ];\n	marginY = [ 30, 50 ];\n\n	x1 = marginX[0];\n	x2 = width - marginX[1];\n	y1 = marginY[0];\n	y2 = height - marginY[1];\n\n	minCount = 93;\n	maxCount = 7595;\n\n	xScale = linearScale([ 0, ufos.length ], [ x1, x2 ]);\n	yScale = linearScale([ minCount, maxCount ], [ y1, y2 ]);\n\n	gridLines = getGridLines( 9, minCount, maxCount );\n\n	return [\n\n		// stage 0 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						x1: x1,\n						x2: x2,\n						y1: y1,\n						y2: y2,\n						width: width,\n						height: height,\n						xScale: xScale,\n						yScale: yScale,\n						minValue: minCount,\n						maxValue: maxCount,\n						ufos: ufos,\n						gridLines: gridLines,\n						barMargin: 0,\n						threshold: 8000,\n\n						r: 0,\n						g: 0,\n						b: 0,\n\n						badLabels: true\n					});\n				}\n			}\n		},\n\n		// stage 1 - fix labels\n		null,\n\n		// stage 2 - sane grid lines and minimum/maximum\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						minValue: minCount,\n						maxValue: maxCount,\n						gridLines: gridLines\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				}\n			}\n		},\n\n		// stage 3 - sort data\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						ufos: sorted\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'ufos\', sorted );\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						ufos: ufos\n					}, {\n						duration: 400,\n						easing: \'easeOut\'\n					});\n				}\n			};\n		},\n\n		// stage 4 - add bar margins\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0.1 );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'barMargin\', 0.1 );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0 );\n				}\n			}\n		},\n\n		// stage 5 - make it green\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						r: 0,\n						g: 0,\n						b: 0\n					});\n				}\n			}\n		},\n\n		// stage 6 - replace grid lines with bar labels\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'maxValue\', maxCount );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'maxValue\', maxCount );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'maxValue\', 8000 );\n				}\n			}\n		},\n\n		// stage 7 - rotate labels, place inside bars\n		null,\n\n		// stage 8 - place some labels outside bars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( \'threshold\', 5000 );\n				},\n				undo: function ( ractive ) {\n					ractive.set( \'threshold\', 8000 );\n				}\n			}\n		},\n\n		// stage 9 - doctor who quote\n		null,\n\n		// stage 10 - not einstein\n		null\n	];\n}',slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Computers do not have good aesthetic judgment</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 {{width}} {{height}}' class='{{( stage >= 9 ? \"blurred\" : \"\" )}}'>\n		<line class='axis' x1='{{x1}}' y1='{{y2}}' x2='{{x2}}' y2='{{y2}}'/>\n\n		<text class='title' x='{{( x1 + 150 )}}' y='{{( y1 + 20 )}}'>UFO sightings by state, 1995-2010</text>\n		<text class='source' x='{{( x1 + 150 )}}' y='{{( y1 + 50 )}}'>Source: <a xlink:href='http://www.infochimps.com/datasets/60000-documented-ufo-sightings-with-text-descriptions-and-metada'>infochimps.com</a></text>\n		\n\n		<!-- grid lines - only up to stage 6 -->\n		{{#( stage <= 5 )}}\n			<g class='grid-lines' intro='fade' outro='fade'>\n				{{#gridLines}}\n					<g transform='translate(0,{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( . - minValue ) ) ) )}})'>\n						<line class='grid-line' x1='{{x1}}' x2='{{x2}}' y1='0' y2='0'/>\n						<text class='grid-label' x='{{( x1 - 10 )}}'>{{( Math.round(.) )}}</text>\n					</g>\n				{{/gridLines}}\n			</g>\n		{{/()}}\n\n		<g class='points'>\n			{{#ufos}}\n				<rect\n					class='point'\n					x='{{( xScale( pos + barMargin ) )}}'\n					y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) )}}'\n					width='{{( ( 1 - 2 * barMargin ) * width / ufos.length )}}'\n					height='{{( ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) )}}'\n					fill='rgb({{( Math.round( r ) )}},{{( Math.round( g ) )}},{{( Math.round( b ) )}})'\n				/>\n			{{/ufos}}\n		</g>\n\n		<!-- stage 0 - state name labels -->\n		{{#( stage === 0 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos}}\n					<text x='{{( xScale( pos + 0.5 ) )}}'>{{state_name}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 1+ - state name labels -->\n		{{#( stage >= 1 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos:i}}\n					<text class='label' x='{{( xScale( pos + 0.5 ) )}}'>{{state_id}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n\n		<!-- stage 6 - direct labelling -->\n		{{#( stage === 6 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					<text\n						class='direct-label'\n						x='{{( xScale( pos + 0.5 ) )}}'\n						y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 10 )}}'\n					>\n						{{count}}\n					</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 6 - direct labelling inside bar -->\n		{{#( stage >= 7 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					{{#( count > threshold )}}\n						<text\n							class='direct-label in-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) + 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n\n					{{#( count <= threshold )}}\n						<text\n							class='direct-label out-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n				{{/ufos}}\n			</g>\n\n			<rect x='0' y='-100' width='200' height='100' fill='white' stroke='none'/>\n		{{/()}}\n\n\n	\n	</svg>\n\n	{{#( stage >= 9 )}}\n		<div class='quote-container' intro='fade'>\n			{{#( stage === 9 )}}\n				<div class='quote_1 {{( stage === 10 ? \"faded\" : \"\" )}}'>\n					<blockquote intro='fade' outro='fade'>\n						<img src='http://www.bbc.co.uk/doctorwho/classic/gallery/fourthdoctor/images/340/23.jpg' style='float: right; margin: 0 0 1em 1em; width: 8em; height: 6em;'>\n\n						<p intro='typewriter'>The trouble with computers, of course, is that they're very sophisticated idiots. They do exactly what you tell them at amazing speed. Even if you order them to kill you.</p>\n\n						<p class='author'>\n							<cite><a href='http://en.wikiquote.org/wiki/Fourth_Doctor'>Doctor Who</a></cite>\n							, 1975\n						</p>\n					</blockquote>\n				</div>\n			{{/()}}\n\n			{{#( stage === 10 )}}\n				<div class='quote_2'>\n					<blockquote intro='fade' outro='fade'>\n						<p intro='typewriter'>Computers are incredibly fast, accurate and stupid; humans are incredibly slow, inaccurate and brilliant; together they are powerful beyond imagination</p>\n\n						<p class='author'>\n							<cite><a href='http://www.benshoemate.com/2008/11/30/einstein-never-said-that/'>not Einstein</a></cite>\n						</p>\n					</blockquote>\n				</div>\n			{{/()}}\n		</div>\n	{{/()}}\n</div>\n\n<!-- TODO source -->",images:["http://www.bbc.co.uk/doctorwho/classic/gallery/fourthdoctor/images/340/23.jpg"],data:{points:[{name:"Monday",value:20},{name:"Tuesday",value:55},{name:"Wednesday",value:45},{name:"Thursday",value:76},{name:"Friday",value:15},{name:"Saturday",value:90},{name:"Sunday",value:65}]}},{styles:".container {\n	padding: 4em 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}",stages:3,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Understanding</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The best visualisations are self-explanatory.</p>\n		</div>\n\n		{{#( stage >= 1 )}}\n		<div class='middle' intro='fade' outro='fade'>\n			<div class='image contain' style='background-image: url(files/images/radar.gif);'></div>\n		</div>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n		<div class='bottom' intro='fade' outro='fade'>\n			<p>Prefer familiar chart types, <em>in general</em>.</p>\n		</div>\n		{{/()}}\n	</div>\n</div>",images:["files/images/radar.gif"]},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(0,0,0,0.8);\n	color: white;\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Interactivity increases cognitive load</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='container'>\n		<div class='top'>\n			<p>We now have two things to worry about &ndash; the visualisation, and the <strong>user interface</strong> or UI.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://cars.about.com/od/buick/ig/2010-Buick-LaCrosse-photos/2010-Buick-LaCrosse-controls.htm -->\n			<div class='image {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://0.tqn.com/d/cars/1/0/e/u/1/ag_10lacrosse_buttons.jpg);'>\n			<div class='caption'><p>Bad UI design costs lives!</p></div>\n			</div>\n		</div>\n	</div>\n</div>",images:["http://0.tqn.com/d/cars/1/0/e/u/1/ag_10lacrosse_buttons.jpg"]},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>UI design is a rapidly-evolving field</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='container'>\n		<div class='top'>\n			<p>Just as with data visualisation, we have to consider which interactions are <strong>familiar</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://www.letsunlockiphone.com/ios-7-vs-ios-6-compare-ios-firmwares/ -->\n			<div class='image contain {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://www.letsunlockiphone.com/wp-content/uploads/ios-6-vs-ios-7-lock-screen.jpg);'>\n			</div>\n		</div>\n	</div>\n</div>",images:["http://www.letsunlockiphone.com/wp-content/uploads/ios-6-vs-ios-7-lock-screen.jpg"]},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.latin {\n	font-family: Georgia;\n	font-weight: normal;\n	font-style: italic;\n}\n\niframe {\n	width: 100%;\n	height: 100%;\n}",stages:"function () {\n\n	var aspectRatio = 16 / 9;\n\n	return [\n\n		// stage 0 - setup\n		function () {\n			return {\n				do: function ( ractive ) {\n					var resizeHandler;\n\n					resizeHandler = function () {\n						var clientWidth, clientHeight, d, horizontalPadding, verticalPadding;\n\n						console.log( ractive.nodes.video_container );\n\n						clientWidth = ractive.nodes.video_container.clientWidth;\n						clientHeight = ractive.nodes.video_container.clientHeight;\n\n						if ( ( clientWidth / clientHeight ) > aspectRatio ) {\n							// need vertical bars\n							horizontalPadding = 0;\n\n							d = clientWidth - ( clientHeight * aspectRatio );\n							verticalPadding = d / 2;\n						} else {\n							// need horizontal bars\n							verticalPadding = 0;\n							\n							d = clientHeight - ( clientWidth / aspectRatio );\n							horizontalPadding = d / 2;\n						}\n\n						ractive.nodes.video_container.style.padding = horizontalPadding + 'px ' + verticalPadding + 'px';\n					};\n\n					window.addEventListener( 'resize', resizeHandler );\n					ractive.on( 'teardown', function () {\n						window.removeEventListener( 'resize', resizeHandler );\n					});\n\n					resizeHandler();\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		},\n\n		// stage 1 - show facebook video\n		null\n	];\n}",slide:"<div class='header'>\n	<h1>Aliveness</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The word <strong>animation</strong> comes from the Latin <strong class='latin'>animō</strong> &ndash; to give life.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='video_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				<iframe src=\"//www.youtube.com/embed/HiqbNxRurFA?start=19\" frameborder=\"0\" allowfullscreen></iframe>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.visible {\n	opacity: 1;\n\n	-webkit-transition: opacity 0.2s;\n	-moz-transition: opacity 0.2s;\n	-ms-transition: opacity 0.2s;\n	-o-transition: opacity 0.2s;\n	transition: opacity 0.2s;\n}",stages:"function () {\n\n	return [\n\n		null,\n\n		// stage 1 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					\n					var chart = new Highcharts.Chart({\n						chart: {\n							renderTo: 'chart_container'\n						},\n						title: {\n							text: 'Combination chart'\n						},\n						xAxis: {\n							categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n						},\n						tooltip: {\n							formatter: function() {\n								var s;\n								if (this.point.name) { // the pie chart\n									s = ''+\n										this.point.name +': '+ this.y +' fruits';\n								} else {\n									s = ''+\n										this.x  +': '+ this.y;\n								}\n								return s;\n							}\n						},\n						labels: {\n							items: [{\n								html: 'Total fruit consumption',\n								style: {\n									left: '40px',\n									top: '8px',\n									color: 'black'\n								}\n							}]\n						},\n						series: [{\n							type: 'column',\n							name: 'Jane',\n							data: [3, 2, 1, 3, 4]\n						}, {\n							type: 'column',\n							name: 'John',\n							data: [2, 3, 5, 7, 6]\n						}, {\n							type: 'column',\n							name: 'Joe',\n							data: [4, 3, 3, 9, 0]\n						}, {\n							type: 'spline',\n							name: 'Average',\n							data: [3, 2.67, 3, 6.33, 3.33],\n							marker: {\n								lineWidth: 2,\n								lineColor: Highcharts.getOptions().colors[3],\n								fillColor: 'white'\n							}\n						}, {\n							type: 'pie',\n							name: 'Total consumption',\n							data: [{\n								name: 'Jane',\n								y: 13,\n								color: Highcharts.getOptions().colors[0] // Jane's color\n							}, {\n								name: 'John',\n								y: 23,\n								color: Highcharts.getOptions().colors[1] // John's color\n							}, {\n								name: 'Joe',\n								y: 19,\n								color: Highcharts.getOptions().colors[2] // Joe's color\n							}],\n							center: [100, 80],\n							size: 100,\n							showInLegend: false,\n							dataLabels: {\n								enabled: false\n							}\n						}]\n					});\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		}\n	];\n}",slide:"<div class='header'>\n	<h1>Animation can be gratuitous and gimmicky...</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>Ideally, animation should convey that the data being visualised, or the state of the interactive, is <strong>changing</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='chart_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				\n			</div>\n		</div>\n	</div>\n</div>",highcharts:"$(function () {\n	$('#container').highcharts({\n		chart: {\n		},\n		title: {\n			text: 'Combination chart'\n		},\n		xAxis: {\n			categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n		},\n		tooltip: {\n			formatter: function() {\n				var s;\n				if (this.point.name) { // the pie chart\n					s = ''+\n						this.point.name +': '+ this.y +' fruits';\n				} else {\n					s = ''+\n						this.x  +': '+ this.y;\n				}\n				return s;\n			}\n		},\n		labels: {\n			items: [{\n				html: 'Total fruit consumption',\n				style: {\n					left: '40px',\n					top: '8px',\n					color: 'black'\n				}\n			}]\n		},\n		series: [{\n			type: 'column',\n			name: 'Jane',\n			data: [3, 2, 1, 3, 4]\n		}, {\n			type: 'column',\n			name: 'John',\n			data: [2, 3, 5, 7, 6]\n		}, {\n			type: 'column',\n			name: 'Joe',\n			data: [4, 3, 3, 9, 0]\n		}, {\n			type: 'spline',\n			name: 'Average',\n			data: [3, 2.67, 3, 6.33, 3.33],\n			marker: {\n				lineWidth: 2,\n				lineColor: Highcharts.getOptions().colors[3],\n				fillColor: 'white'\n			}\n		}, {\n			type: 'pie',\n			name: 'Total consumption',\n			data: [{\n				name: 'Jane',\n				y: 13,\n				color: Highcharts.getOptions().colors[0] // Jane's color\n			}, {\n				name: 'John',\n				y: 23,\n				color: Highcharts.getOptions().colors[1] // John's color\n			}, {\n				name: 'Joe',\n				y: 19,\n				color: Highcharts.getOptions().colors[2] // Joe's color\n			}],\n			center: [100, 80],\n			size: 100,\n			showInLegend: false,\n			dataLabels: {\n				enabled: false\n			}\n		}]\n	});\n});"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\niframe {\n	width: 100%;\n	height: 100%;\n	border: 1px solid #eee;\n	box-shadow: 1px 1px 3px rgba(0,0,0,0.6);\n}",slide:"<div class='header'>\n	<h1>...and bad for performance</h1>\n</div>\n\n<div class='content'>\n	<iframe src='http://pitchfork.com/features/cover-story/reader/daft-punk/'></iframe>\n</div>"},{styles:"iframe {\n	width: 100%;\n	height: 100%;\n	/*border: 1px solid #eee;*/\n}",slide:"<div class='header'>\n	<h1>Case study: Remittances</h1>\n</div>\n\n<div class='content'>\n	<iframe frameborder='0' src='https://docs.google.com/spreadsheet/pub?key=0AgS_UxBggDCMdG9aNTExWHYzclNYbzdnWDg1enVtMnc&output=html&widget=true'></iframe>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.time.com/time/interactive/0,31813,1737566,00.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.time.com/time/interactive/0,31813,1737566,00.html'>The Flow of Money: Mapping World Remittances</a> &ndash; time.com</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.torre.nl/remittances/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.torre.nl/remittances/'>Remittance flows</a> &ndash; visualizing.org</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://thereandhere.org/remittances.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://thereandhere.org/remittances.html'>Remittances by Country of Origin</a> &ndash; thereandhere.org</p>\n	</div>\n</div>"},{styles:"iframe {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n}",slide:'<iframe src="//www.youtube.com/embed/vVX-PrBRtTY?start=44" frameborder="0" allowfullscreen></iframe>'},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 1em 2em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.fade-bottom:after {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n	content: ' ';\n	display: block;\n	width: 100%;\n	height: 3em;\n	background-color: rgba(255,255,255,0.5);\n\n	background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */\n	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */\n	background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */\n	background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */\n	background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */\n	background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */\n}\n\n.fade-top:before {\n	position: absolute;\n	left: 0;\n	top: 0;\n	content: ' ';\n	display: block;\n	width: 100%;\n	height: 3em;\n	background-color: rgba(255,255,255,0.5);\n\n	background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6+ */\n	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */\n	background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */\n	background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Opera 11.10+ */\n	background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* IE10+ */\n	background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C */\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(255,255,255,0.95);\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n	border-top: 1px solid #333;\n	border-bottom: 1px solid #333;\n}",slide:"<div class='container'>\n	<div class='columns-outer'>\n		<div class='columns-inner' intro='fade' outro='fade'>\n			<div intro='fade' class='column3'>\n				\n				<div class='image fade-bottom' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 0;'></div>\n			</div>\n\n			<div intro='fade:{\"delay\":100}' class='column3'>\n				\n				<div class='image fade-top fade-bottom' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 50%;'>\n					\n					<div class='caption'><p><a href='http://xkcd.com/977/'>xkcd.com/977</a></p></div>\n				</div>\n			</div>\n\n			<div intro='fade:{\"delay\":200}' class='column3'>\n				\n				<div class='image fade-top' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 100%;'></div>\n			</div>\n\n		</div>\n	</div>\n</div>",images:["http://imgs.xkcd.com/comics/map_projections.png"]},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://peoplemov.in/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://peoplemov.in/'>Immigration flows across the world</a> &ndash; http://peoplemov.in/</p>\n	</div>\n</div>"},{stages:8,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Our ambitions</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<p>We aimed to produce a visualisation that:</p>\n\n	<ul>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>was geographical</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>showed inflows and outflows simultaneously</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>had animated arrows, not static straight lines, making the direction of flow clear</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>included migration data as context...</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade'>...but avoided information overload</li>\n		{{/()}}\n\n		{{#( stage >= 6 )}}\n			<li intro='fade'>used colour for explanatory, rather than merely aesthetic, value</li>\n		{{/()}}\n\n		{{#( stage >= 7 )}}\n			<li intro='fade'>incorporated case studies and additional context</li>\n		{{/()}}\n	</ul>\n</div>"},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 0.5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",slide:"<div class='container' intro='fade' outro='fade'>\n	<div class='image contain' style='background-image: url(files/images/remittances.png);'></div>\n</div>",images:["files/images/remittances.png"]},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 0.5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(0,0,0,0.8);\n	color: white;\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n}",slide:"<div class='container' intro='fade' outro='fade'>\n	<div class='image contain' style='background-image: url(http://i.dailymail.co.uk/i/pix/2013/01/31/article-2271455-174691D9000005DC-842_964x579.jpg);'>\n		\n		<div class='caption'><p>FAIL</p></div>\n	</div>\n</div>",images:["http://i.dailymail.co.uk/i/pix/2013/01/31/article-2271455-174691D9000005DC-842_964x579.jpg"]},{styles:".previous-example-container iframe {\n	border: none;\n	box-shadow: none;\n}",slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://static.guim.co.uk/interactivestore/2013/6/9/1370806749349/342760/index.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.guardian.co.uk/global-development/interactive/2013/jan/31/remittances-money-migrants-home-interactive'>How much money do migrants send home?</a> &ndash; guardian.co.uk</p>\n	</div>\n</div>"},{styles:".question {\n	text-align: center;\n}\n\n.question p {\n	font-size: 3em;\n}",slide:"<div class='question'>\n	<p>\"How did you do the arrows?\"</p>\n</div>"},{styles:".black-bg {\n	background-color: black;\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	padding: 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nimg {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='black-bg' intro='fade' outro='fade'>\n	{{#( stage === 1 )}}\n		<img src='files/images/maths.svg' intro='fade:1200'>\n	{{/()}}\n</div>",images:["files/images/maths.svg"]},{styles:"iframe {\n	width: 100%;\n	height: 100%;\n	border: none;\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The centroids</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<iframe src='files/iframes/centroids/index.html'></iframe>\n</div>"},{styles:".demo {\n	float: right;\n}\n\nfigure {\n	float: left;\n	text-align: center;\n}\n\nfigure img {\n	width: 12em;\n	height: 12em;\n}",stages:8,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>SVG: scalable vector graphics</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	\n\n	<div class='demo'>\n		<figure>\n			<img src='files/images/svg-logo.png'>\n			<figcaption>bitmap</figcaption>\n		</figure>\n\n		<figure>\n			<img src='files/images/svg-logo.svg'>\n			<figcaption>vector</figcaption>\n		</figure>\n	</div>\n\n	<ul outro='fade'>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>Web standard supported pretty much everywhere (even IE!)</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>It's like HTML for graphics</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>Easy to create and manipulate &ndash; you don't need libraries</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>Part of the Document Object Model, which means it's perfect for interactivity</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade'>Adobe Illustrator and the open source <a href='http://inkscape.org/'>Inkscape</a> produce SVG</li>\n		{{/()}}\n\n		{{#( stage >= 6 )}}\n			<li intro='fade'>...but slow as molasses on old devices (e.g. iPad 1)...</li>\n		{{/()}}\n\n		{{#( stage >= 7 )}}\n			<li intro='fade'>...and decent tutorials are scarce. Google is your friend</li>\n		{{/()}}\n	</ul>\n</div>",images:["files/images/svg-logo.png","files/images/svg-logo.svg"]},{styles:"svg {\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	-o-user-select: none;\n	user-select: none;\n}\n\ncircle {\n	stroke: black;\n	stroke-width: 1;\n	fill: #aaa;\n	cursor: move;\n}\n\ntext {\n	text-anchor: middle;\n	font-size: 1.4em;\n	pointer-events: none;\n}\n\n.link {\n	stroke: rgb(201,83,0);\n	fill: none;\n	pointer-events: none;\n	opacity: 0.7;\n	marker-end: url(#arrow-end);\n	marker-start: url(#arrow-start);\n}\n\n.code {\n	font-family: 'Source Sans Pro', monospace;\n	text-anchor: start;\n}\n\n.home {\n	font-weight: bold;\n	fill: red;\n}\n\n.prime {\n	font-weight: bold;\n	fill: blue;\n}\n\n.control {\n	font-weight: bold;\n	fill: rgb(143,26,182);\n}\n\n.controls {\n	position: absolute;\n	left: 3em;\n	bottom: 3em;\n}\n\n.controls label {\n	display: block;\n	padding: 0.2em;\n}\n\n.controls input[type=\"checkbox\"] {\n	position: relative;\n	top: -0.2em;\n}\n\n.schematic {\n	stroke: #aaa;\n	stroke-width: 1;\n	fill: none;\n}\n\n.control-point.prime {\n	fill: rgb(143,26,182);\n	stroke-width: 2;\n}\n\n.shadows {\n	filter: url(#blur);\n	opacity: 0.15;\n}\n\n.shadow {\n	stroke: black;\n}\n\n.quote-container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 4em 10em 0 0;\n	background-color: rgba(255,255,255,0.8);\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nblockquote {\n	max-width: 20em;\n	float: right;\n	box-shadow: 4px 4px 10px rgba(0,0,0,0.2);\n}",stages:"function () {\n\n	var home, targets, newTargets, thinTargets, thickTargets, viewBox;\n\n	home = {\n		x: 450,\n		y: 300\n	};\n\n	targets = [\n		{ id: 'B', x: 700, y: 100, w: 2, prime: true }\n	];\n\n	newTargets = [\n		{ id: 'C', x: 100, y: 150, w: 2 },\n		{ id: 'D', x: 400, y: 400, w: 2 },\n		{ id: 'E', x: 800, y: 350, w: 2 },\n		{ id: 'F', x: 200, y: 250, w: 2 }\n	];\n\n	thinTargets = {\n		'targets.0.w': 2,\n		'targets.1.w': 2,\n		'targets.2.w': 2,\n		'targets.3.w': 2,\n		'targets.4.w': 2\n	};\n\n	thickTargets = {\n		'targets.0.w': 3.5,\n		'targets.1.w': 7,\n		'targets.2.w': 1,\n		'targets.3.w': 6,\n		'targets.4.w': 9\n	};\n\n	return [\n\n		// stage 0 - setup\n		function () {\n			return {\n				do: function ( ractive ) {\n					viewBox = new ViewBox( ractive.nodes.svg );\n\n					ractive.set({\n						home: home,\n						targets: targets,\n						outward: true,\n						m: 0,\n						showHints: true\n					});\n\n					ractive.on( 'drag', function ( event ) {\n						var move, cancel, keypath;\n\n						keypath = event.keypath || 'home';\n\n						move = function ( event ) {\n							var svgCoords = viewBox.getCoordsFromClient( event.clientX, event.clientY );\n\n							ractive.set( keypath + '.x', svgCoords.x );\n							ractive.set( keypath + '.y', svgCoords.y );\n						};\n\n						cancel = function () {\n							window.removeEventListener( 'mousemove', move );\n							window.removeEventListener( 'mouseup', cancel );\n						}\n\n						window.addEventListener( 'mousemove', move );\n						window.addEventListener( 'mouseup', cancel );\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 1 - show additional targets\n		function () {\n			return {\n				do: function ( ractive ) {\n					targets.push.apply( targets, newTargets );\n				},\n				undo: function ( ractive ) {\n					targets.splice( 1 );\n				}\n			}\n		},\n\n		// stage 2 - show variable width lines\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( thickTargets );\n				},\n				redo: function ( ractive ) {\n					ractive.set( thickTargets );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( thinTargets );\n				}\n			}\n		},\n\n		// stage 3 - show Watkins quote\n		null,\n\n		// stage 4 - show curves\n		null,\n\n		// stage 5 - show arrowheads\n		null,\n\n		// stage 6 - show moved arrowheads\n		null,\n\n		// stage 7 - show moved arrowheads with hidden target circles\n		null,\n\n		// stage 8 - show inward arrowheads\n		null\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Lines</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<svg id='svg' viewBox='0 0 1000 500'>\n\n		<defs>\n			<filter id=\"blur\">\n				<feGaussianBlur stdDeviation=\"4\"/>\n		    </filter>\n\n			{{#( stage === 5 )}}\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='2' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path intro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n\n			{{#( stage === 6 || stage === 7 )}}\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='12' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path outro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n\n			{{#( stage === 8 )}}\n			<marker id='arrow-start' viewBox='0 0 14 14' refX='4' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path intro='fade' outro='fade' d='M 12 2 L 2 7 L 12 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n		</defs>\n\n\n\n		<!-- shadows -->\n		{{#shadows}}\n			<g class='shadows'>\n			{{#targets:i}}\n				<line intro='fade' outro='fade' class='shadow' x1='{{home.x}}' y1='{{home.y}}' x2='{{x}}' y2='{{y}}' stroke-width='{{w}}'/>\n			{{/targets}}\n			</g>\n		{{/shadows}}\n\n\n		<!-- A -->\n		<g transform='translate({{home.x}},{{home.y}})'>\n			<circle r='5' proxy-mousedown='drag'/>\n			<text class='home' y='30'>A</text>\n		</g>\n\n		\n		<!-- lines -->\n		{{#( stage <= 3 )}}\n			{{#targets:i}}\n				<g transform='translate({{x}},{{y}})' intro='fade' outro='fade'>\n					<circle r='5' proxy-mousedown='drag' class='{{( stage === 6 ? \"invisible\" : \"visible\" )}}'/>\n					<text class='{{( prime ? \"prime\" : \"\" )}}' y='36'>{{id}}</text>\n				</g>\n\n				<line intro='fade' outro='fade' class='link' x1='{{home.x}}' y1='{{home.y}}' x2='{{x}}' y2='{{y}}' stroke-width='{{w}}'/>\n			{{/targets}}\n\n			{{# targets[0] }}\n				<text intro='fade' outro='fade' x='0' y='30' class='code'>\n					&lt;line x1='<tspan class='home'>{{( Math.round( home.x ) )}}</tspan>' y1='<tspan class='home'>{{( Math.round( home.y ) )}}</tspan>' x2='<tspan class='prime'>{{( Math.round( x ) )}}</tspan>' y2='<tspan class='prime'>{{( Math.round( y ) )}}</tspan>{{#( stage >= 2 )}} <tspan intro='fade'>stroke-width='{{( w.toFixed(1) )}}</tspan>{{/()}}'/&gt;\n				</text>\n			{{/ targets[0] }}\n		{{/()}}\n\n\n		<!-- curves -->\n		{{#( stage >= 4 )}}\n			{{#targets:i}}\n				\n				{{#showHints}}\n					<polyline\n						intro='fade'\n						outro='fade'\n						class='schematic'\n						points='{{home.x}},{{home.y}} {{( ( x + home.x ) / 2 )}},{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}}, {{x}},{{y}}'\n					/>\n\n					<circle\n						intro='fade'\n						outro='fade'\n						class='control-point {{( .prime ? \"prime\" : \"\" )}}'\n						cx='{{( ( x + home.x ) / 2 )}}'\n						cy='{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}}'\n						r='{{( .prime ? 5 : 3 )}}'\n					/>\n				{{/showHints}}\n\n				<g transform='translate({{x}},{{y}})' intro='fade' outro='fade'>\n					<circle r='5' proxy-mousedown='drag' class='{{( stage === 6 ? \"invisible\" : \"visible\" )}}'/>\n\n					<text class='{{( prime ? \"prime\" : \"\" )}}' y='36'>{{id}}</text>\n				</g>\n\n				<path intro='fade' outro='fade'\n				      class='link' stroke-width='{{w}}'\n				      d='M{{home.x}},{{home.y}} Q{{( ( x + home.x ) / 2 )}},{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}} {{x}},{{y}}'/>\n			{{/targets}}\n\n			{{# targets[0] }}\n				<text intro='fade' outro='fade' x='0' y='30' class='code'>\n					&lt;path d='M<tspan class='home'>{{( Math.round( home.x ) )}}</tspan>,<tspan class='home'>{{( Math.round( home.y ) )}}</tspan> Q<tspan class='control'>{{( Math.round( ( x + home.x ) / 2 ) )}}</tspan>,<tspan class='control'>{{( Math.round( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) ) )}}</tspan> <tspan class='prime'>{{( Math.round( x ) )}}</tspan>,<tspan class='prime'>{{( Math.round( y ) )}}</tspan>'/&gt;\n				</text>\n			{{/ targets[0] }}\n		{{/()}}\n\n\n		\n	</svg>\n\n	{{#( stage === 3 )}}\n	<div class='quote-container' intro='fade' outro='fade'>\n		<blockquote>\n			<p intro='typewriter'>I had previously received an experimental conviction...that the curve line also is in all nature an indication of life, and hence the line of beauty, or of pleasurable sensation and emotion to the race of men.</p>\n\n			<p class='author' intro='fade' outro='fade'>\n				<cite><a href='http://openlibrary.org/books/OL25408214M/A_treatise_on_the_leading_causes_of_pleasure_and_delight_in_the_human_mind'>A treatise on the leading causes of pleasure and delight in the human mind</a></cite>\n				&ndash; Watkins 1841\n			</p>\n		</blockquote>\n	</div>\n	{{/()}}\n\n	{{#( stage >= 4 )}}\n		<div class='controls' intro='fade' outro='fade'>\n			<label><input type='checkbox' checked='{{showHints}}'> show hints</label>\n			<label><input type='checkbox' checked='{{shadows}}'> show shadows</label>\n			<label><input type='range' value='{{m}}' min='-1' max='1' step='0.01'> lift ({{m}})</label>\n		</div>\n	{{/()}}\n</div>"},{styles:".slide {\n	/*position: absolute;\n	left: 0;\n	top: 0;\n	width: 100%;\n	height: 100%;*/\n	/*background-color: rgb(152,188,219);*/\n	background-color: rgb(0,74,131);\n	color: white;\n}\n\n.header, .content {\n	padding-right: 14em;\n}\n\n.floating-equation {\n	position: absolute;\n	top: -50%;\n	left: -50%;\n	width: 200%;\n	height: 200%;\n	opacity: 0.1;\n	background: white url(files/images/bezier.png) no-repeat 50% 50%;\n	background-size: 70% auto;\n\n	/*-webkit-filter: blur(2px);*/\n\n	-webkit-animation: 120s infinite float ease-in-out;\n}\n\n.main-image-container {\n	position: absolute;\n	width: 12em;\n	height: 100%;\n	bottom: 0;\n	right: 0;\n	background-color: rgba(255,255,255,0.7);\n	box-shadow: -2px 0 8px 2px rgba(0,0,0,0.1);\n}\n\n.main-image {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 0;\n}\n\n@-webkit-keyframes float {\n	0% {\n		-webkit-transform: translate(-50px,0px) scale(1) rotate(-4deg);\n	}\n\n	25% {\n		-webkit-transform: translate(-150px,0px) scale(1.2) rotate(-5deg);\n	}\n\n	50% {\n		-webkit-transform: translate(-150px,-100px) scale(1.4) rotate(4deg);\n	}\n\n	75% {\n		-webkit-transform: translate(-100px,-100px) scale(1.2) rotate(-6deg);\n	}\n\n	100% {\n		-webkit-transform: translate(-50px,0px) scale(1) rotate(-4deg);\n	}\n}",stages:5,slide:"<div class='floating-equation' intro='fade' outro='fade'>\n	<!--<img src='files/images/bezier.png'>-->\n</div>\n\n\n\n<div class='header' intro='fade' outro='fade'>\n	<h1>Meet Pierre Bézier</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	\n	<ul outro='fade'>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>Bézier didn't invent the Bézier curve...</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>...but he did patent it!</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>He was preceded by rival auto engineer Paul de Casteljau</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>Luckily, 'Bézier curve' is much easier to pronounce than 'de Casteljau curve'</li>\n		{{/()}}\n	</ul>\n</div>\n\n\n\n<div class='main-image-container' intro='fade' outro='fade'>\n	<img class='main-image' src='files/images/pierre.gif'>\n</div>",images:["files/images/pierre.gif","files/images/bezier.png"]},{styles:".content {\n	padding-bottom: 5em;\n	padding-right: 12em;\n}\n\nsvg {\n	width: 100%;\n	height: 100%;\n\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	-o-user-select: none;\n	user-select: none;\n}\n\nsvg * {\n	pointer-events: none;\n}\n\ntext {\n	text-anchor: middle;\n	alignment-baseline: middle;\n	font-size: 1.4em;\n}\n\n.node {\n	fill: #aaa;\n	stroke: black;\n	stroke-width: 1;\n	cursor: move;\n	pointer-events: fill;\n}\n\n.intermediate-node {\n	fill: #666;\n	stroke: black;\n	stroke-width: 1;\n}\n\n.controls {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 2em;\n	padding: 0 5em;\n	z-index: 2;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.slider {\n	position: relative;\n	width: 100%;\n	padding: 0 3.5em 0 0;\n	display: block;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.slider span {\n	position: absolute;\n	width: 4em;\n	top: -0.3em;\n	right: 0;\n	text-align: right;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.slider input {\n	width: 100%;\n	cursor: ew-resize;\n}\n\n.guide-vector, .guide-curve {\n	stroke: #ddd;\n	stroke-width: 1.5;\n	fill: none;\n}\n\n.intermediate-vector {\n	stroke: rgb(152,188,219);\n	stroke-width: 4;\n}\n\n.main-curve {\n	stroke: rgb(201,83,0);\n	stroke-width: 5;\n	fill: none;\n}\n\n.trajectory {\n	stroke: black;\n	opacity: 0.5;\n	stroke-width: 2;\n	stroke-dasharray: 5,5;\n	marker-end: url(#arrow-end);\n}\n\n.trajectory-hint {\n	fill: rgba(0,0,0,0.5);\n	stroke: black;\n	stroke-width: 1;\n}\n\n.cross {\n	stroke: black;\n	opacity: 0.5;\n	stroke-width: 2;\n	stroke-dasharray: 2,2;\n}\n\n.sidebar-controls-outer {\n	position: absolute;\n	right: 0;\n	top: 0;\n	width: 17em;\n	height: 100%;\n	padding: 1em 5em 6em 0;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.sidebar-controls-inner {\n	width: 100%;\n	height: 100%;\n	background-color: #f9f9f9;\n	padding: 1em;\n	box-shadow: inset 1px 1px 5px rgba(0,0,0,0.1);\n	overflow-y: auto;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.sidebar-controls-inner input[type=\"range\"] {\n	width: 100%;\n}\n\nlabel {\n	display: block;\n	padding: 0.2em 0;\n}\n\n.result, .approximation {\n	fill: rgba(201,83,0,0.8);\n}\n\n.result-outline, .approximation-outline {\n	fill: none;\n	stroke: black;\n	stroke-width: 1;\n}",stages:"function () {\n\n	var viewBox, state, Statesman;\n\n	Statesman = require( 'Statesman' );\n\n	state = new Statesman({\n		A: { x: 300, y: 400 },\n		B: { x: 700, y: 400 },\n		Q: { x: 500, y: 100 },\n\n		exaggeration: 50,\n\n		t: 0\n	});\n\n	state.compute({\n		'tAQ.x': '${A.x} + ( ${t} * ( ${Q.x} - ${A.x} ) )',\n		'tAQ.y': '${A.y} + ( ${t} * ( ${Q.y} - ${A.y} ) )',\n\n		'tQB.x': '${Q.x} + ( ${t} * ( ${B.x} - ${Q.x} ) )',\n		'tQB.y': '${Q.y} + ( ${t} * ( ${B.y} - ${Q.y} ) )',\n\n		'Z.x'  : '${tAQ.x} + ( ${t} * ( ${tQB.x} - ${tAQ.x} ) )',\n		'Z.y'  : '${tAQ.y} + ( ${t} * ( ${tQB.y} - ${tAQ.y} ) )',\n\n		direction: {\n			dependsOn: [ 'tAQ', 'tQB' ],\n			get: function ( tAQ, tQB ) {\n				var dx, dy, magnitude, x, y;\n\n				dx = tQB.x - tAQ.x;\n				dy = tQB.y - tAQ.y;\n\n				magnitude = Math.sqrt( ( dx * dx ) + ( dy * dy ) );\n\n				x = dx / magnitude;\n				y = dy / magnitude;\n\n				return {\n					x: x,\n					y: y\n				};\n			}\n		},\n\n		'normal.x': '-${direction.y}',\n		'normal.y': ' ${direction.x}',\n\n		'arrowhead.center.x': '${Z.x} - ( ${arrowhead.size} * ${direction.x} )',\n		'arrowhead.center.y': '${Z.y} - ( ${arrowhead.size} * ${direction.y} )',\n\n		'arrowhead.po.x': '${arrowhead.center.x} + ( ${arrowhead.size} * -${normal.x} )',\n		'arrowhead.po.y': '${arrowhead.center.y} + ( ${arrowhead.size} * -${normal.y} )',\n		'arrowhead.so.x': '${arrowhead.center.x} + ( ${arrowhead.size} * ${normal.x} )',\n		'arrowhead.so.y': '${arrowhead.center.y} + ( ${arrowhead.size} * ${normal.y} )',\n\n		'arrowhead.pi.x': '${arrowhead.center.x} + ( 0.5 * ${arrowhead.size} * -${normal.x} )',\n		'arrowhead.pi.y': '${arrowhead.center.y} + ( 0.5 * ${arrowhead.size} * -${normal.y} )',\n		'arrowhead.si.x': '${arrowhead.center.x} + ( 0.5 * ${arrowhead.size} * ${normal.x} )',\n		'arrowhead.si.y': '${arrowhead.center.y} + ( 0.5 * ${arrowhead.size} * ${normal.y} )',\n\n\n\n		\n		// midpoint\n		midpoint_t: '${t} / 2',\n\n		'midpoint_tAQ.x': '${A.x} + ( ${midpoint_t} * ( ${Q.x} - ${A.x} ) )',\n		'midpoint_tAQ.y': '${A.y} + ( ${midpoint_t} * ( ${Q.y} - ${A.y} ) )',\n\n		'midpoint_tQB.x': '${Q.x} + ( ${midpoint_t} * ( ${B.x} - ${Q.x} ) )',\n		'midpoint_tQB.y': '${Q.y} + ( ${midpoint_t} * ( ${B.y} - ${Q.y} ) )',\n\n		'midpoint_Z.x'  : '${midpoint_tAQ.x} + ( ${midpoint_t} * ( ${midpoint_tQB.x} - ${midpoint_tAQ.x} ) )',\n		'midpoint_Z.y'  : '${midpoint_tAQ.y} + ( ${midpoint_t} * ( ${midpoint_tQB.y} - ${midpoint_tAQ.y} ) )',\n\n		midpoint_direction: {\n			dependsOn: [ 'midpoint_tAQ', 'midpoint_tQB' ],\n			get: function ( midpoint_tAQ, midpoint_tQB ) {\n				var dx, dy, magnitude, x, y;\n\n				dx = midpoint_tQB.x - midpoint_tAQ.x;\n				dy = midpoint_tQB.y - midpoint_tAQ.y;\n\n				magnitude = Math.sqrt( ( dx * dx ) + ( dy * dy ) );\n\n				x = dx / magnitude;\n				y = dy / magnitude;\n\n				return {\n					x: x,\n					y: y\n				};\n			}\n		},\n\n		'midpoint_normal.x': '-${midpoint_direction.y}',\n		'midpoint_normal.y': ' ${midpoint_direction.x}',\n\n		'approximation_midpoint_port.x': '${midpoint_Z.x} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'approximation_midpoint_port.y': '${midpoint_Z.y} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n		'approximation_midpoint_starboard.x': '${midpoint_Z.x} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'approximation_midpoint_starboard.y': '${midpoint_Z.y} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n\n		'midpoint_port.x': '${tAQ.x} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'midpoint_port.y': '${tAQ.y} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n		'midpoint_starboard.x': '${tAQ.x} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'midpoint_starboard.y': '${tAQ.y} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n\n		'arrowhead.size': '${varyThickness} ? ( ${t} * ${thickness} ) : ${thickness}'\n	});\n\n	return [\n\n		// stage 0\n		function () {\n			return {\n				do: function ( ractive ) {\n					viewBox = new ViewBox( ractive.nodes.svg );\n\n					ractive.debug = true;\n\n					ractive.set( state.get() );\n					ractive.set({\n						showNodes: true,\n						showLabels: true,\n						showGuideVectors: true,\n						showGuideCurve: true,\n						showIntermediateCurve: true,\n\n						t: 0,\n						thickness: 30\n					});\n\n					ractive.on( 'drag', function ( event, point ) {\n						var move, cancel;\n\n						move = function ( event ) {\n							var changes, svgCoords = viewBox.getCoordsFromClient( event.clientX, event.clientY );\n\n							changes = {};\n							changes[ point + '.x' ] = svgCoords.x;\n							changes[ point + '.y' ] = svgCoords.y;\n\n							state.set( changes );\n						};\n\n						cancel = function () {\n							window.removeEventListener( 'mousemove', move );\n							window.removeEventListener( 'mouseup', cancel );\n						}\n\n						window.addEventListener( 'mousemove', move );\n						window.addEventListener( 'mouseup', cancel );\n					});\n\n					state.on( 'change', function ( changeHash ) {\n						ractive.set( changeHash );\n					});\n\n					ractive.observe({\n						t: function ( t ) {\n							state.set( 't', t );\n						},\n						thickness: function ( t ) {\n							state.set( 'thickness', t );\n						},\n						varyThickness: function ( vary ) {\n							state.set( 'varyThickness', vary );\n						}\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 1 - animate t\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( 't', 1, {\n						duration: 2000,\n						easing: 'easeInOut',\n						complete: function () {\n							ractive.animate( 't', 0, {\n								duration: 2000,\n								easing: 'easeInOut'\n							});\n						}\n					});\n				},\n				redo: function () {\n					// noop\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 2 - show intermediate points\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showIntermediatePoints: true,\n						showIntermediateVectors: true\n					});\n\n					ractive.animate( 't', 0.25 );\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showIntermediatePoints: true,\n						showIntermediateVectors: true,\n						t: 0.25\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 3 - show trajectory\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( 'showTrajectory', true );\n				},\n				undo: function ( ractive ) {\n					ractive.set( 'showTrajectory', false );\n				}\n			}\n		},\n\n		// stage 4 - show trajectory hint\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( 'showTrajectoryHint', true );\n\n					ractive.animate( 't', 0.25 );\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: true,\n						t: 0.25\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set( 'showTrajectoryHint', false );\n				}\n			}\n		},\n\n		// stage 5 - hide trajectory hint, show arrowhead base and crossbars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: false,\n						showArrowheadBase: true,\n						showCrossbars: true\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: true,\n						showArrowheadBase: false,\n						showCrossbars: false\n					});\n				}\n			}\n		},\n\n		// stage 6 - show approximation\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: false,\n						showGuideVectors: false,\n						showGuideCurve: false,\n						showIntermediatePoints: false,\n						showIntermediateVectors: false,\n						showIntermediateCurve: false,\n						showTrajectory: false,\n						showTrajectoryHint: false,\n						showArrowheadBase: false,\n						showCrossbars: false,\n						showApproximationOutline: false,\n						showApproximation: false,\n						showResultOutline: false,\n						showResult: false\n					}, function () {\n						ractive.animate({\n							A: { x: 200, y: 350 },\n							B: { x: 800, y: 300 },\n							Q: { x: 500, y: 200 }\n						}, {\n							duration: 800,\n							easing: 'easeInOut',\n							complete: function () {\n								state.set({\n									A: { x: 200, y: 350 },\n									B: { x: 800, y: 300 },\n									Q: { x: 500, y: 200 },\n									t: 0.75\n								});\n\n								ractive.set( 'showApproximation', true );\n							}\n						})\n					})\n\n					\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: false,\n						showGuideVectors: false,\n						showGuideCurve: false,\n						showIntermediatePoints: false,\n						showIntermediateVectors: false,\n						showIntermediateCurve: false,\n						showTrajectory: false,\n						showTrajectoryHint: false,\n						showArrowheadBase: false,\n						showCrossbars: false,\n						showApproximationOutline: false,\n						showApproximation: true,\n						showResultOutline: false,\n						showResult: false\n					});\n\n					state.set({\n						A: { x: 200, y: 350 },\n						B: { x: 800, y: 300 },\n						Q: { x: 500, y: 200 },\n						t: 0.75\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: true,\n						showGuideVectors: true,\n						showGuideCurve: true,\n						showIntermediatePoints: true,\n						showIntermediateVectors: true,\n						showIntermediateCurve: true,\n						showTrajectory: true,\n						showTrajectoryHint: false,\n						showArrowheadBase: true,\n						showCrossbars: true,\n						showApproximationOutline: false,\n						showApproximation: false,\n						showResultOutline: false,\n						showResult: false\n					});\n\n					state.set({\n						A: { x: 200, y: 350 },\n						B: { x: 800, y: 300 },\n						Q: { x: 500, y: 200 },\n						t: 0.75\n					});\n				}\n			}\n		}\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The quadratic Bézier curve</h1>\n</div>\n\n<div class='content'>\n	<svg id='svg' viewBox='100 0 800 500'>\n\n\n		<defs>\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='7' refY='7' markerUnits='strokeWidth' markerWidth='12' markerHeight='9' orient='auto'>\n				<path outro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='black'/>\n			</marker>\n\n			<marker id='arrow-start' viewBox='0 0 14 14' refX='7' refY='7' markerUnits='strokeWidth' markerWidth='12' markerHeight='9' orient='auto'>\n				<path intro='fade' outro='fade' d='M 12 2 L 2 7 L 12 12 z' fill='black'/>\n			</marker>\n		</defs>\n\n\n		{{#showGuideVectors}}\n			<!-- vector AQ -->\n			<line intro='fade' outro='fade' class='guide-vector' x1='{{A.x}}' y1='{{A.y}}' x2='{{Q.x}}' y2='{{Q.y}}'/>\n\n			<!-- vector QB -->\n			<line intro='fade' outro='fade' class='guide-vector' x1='{{Q.x}}' y1='{{Q.y}}' x2='{{B.x}}' y2='{{B.y}}'/>\n		{{/showGuideVectors}}\n\n		<!-- vector t(AQ)t(QB) -->\n		{{#showIntermediateVectors}}\n			<line\n				intro='fade' outro='fade'\n				class='guide-vector'\n				x1='{{ tAQ.x }}'\n				y1='{{ tAQ.y }}'\n				x2='{{ tQB.x }}'\n				y2='{{ tQB.y }}'\n			/>\n		{{/showIntermediateVectors}}\n\n\n		<!-- direction of travel hint -->\n		{{#showTrajectoryHint}}\n			<g intro='fade' outro='fade'>\n				<polygon class='trajectory-hint' points='{{tAQ.x}},{{tAQ.y}} {{tQB.x}},{{tAQ.y}} {{tQB.x}},{{tQB.y}}'/>\n\n				<!-- x -->\n				<text x='{{( ( tAQ.x + tQB.x ) / 2 )}}' y='{{( tAQ.y + ( tQB.y > tAQ.y ? -20 : 20 ) )}}'>x</text>\n\n				<!-- y -->\n				<text x='{{( tQB.x + 20 )}}' y='{{( ( tAQ.y + tQB.y ) / 2 )}}'>y</text>\n			</g>\n		{{/showTrajectoryHint}}\n\n\n		<!-- curve AQB -->\n		{{#showGuideCurve}}\n			<path intro='fade' outro='fade' class='guide-curve' d='M{{A.x}},{{A.y}} Q{{Q.x}},{{Q.y}} {{B.x}},{{B.y}}'/>\n		{{/showGuideCurve}}\n\n\n		<!-- vector At(AQ) -->\n		{{#showIntermediateVectors}}\n			<line intro='fade' outro='fade' class='intermediate-vector' x1='{{A.x}}' y1='{{A.y}}' x2='{{ tAQ.x }}' y2='{{ tAQ.y }}' />\n\n			<!-- vector t(AQ)t(t(AQ)t(QB)) -->\n			<line\n				intro='fade' outro='fade'\n				class='intermediate-vector'\n				x1='{{ tAQ.x }}'\n				y1='{{ tAQ.y }}'\n				x2='{{ Z.x }}'\n				y2='{{ Z.y }}'\n			/>\n		{{/showIntermediateVectors}}\n\n\n\n		<!-- curve At(AQ)Z -->\n		{{#showIntermediateCurve}}\n			<path intro='fade' outro='fade' class='main-curve' d='M{{A.x}},{{A.y}} Q{{tAQ.x}},{{tAQ.y}} {{Z.x}},{{Z.y}}'/>\n		{{/showIntermediateCurve}}\n		\n\n		\n		<!-- point A -->\n		<g transform='translate({{A.x}},{{A.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:A'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='40'>A</text>{{/showLabels}}\n		</g>\n\n		<!-- point B -->\n		<g transform='translate({{B.x}},{{B.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:B'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='40'>B</text>{{/showLabels}}\n		</g>\n\n		<!-- point Q -->\n		<g transform='translate({{Q.x}},{{Q.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:Q'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='-40'>Q</text>{{/showLabels}}\n		</g>\n\n\n\n		{{#showIntermediatePoints}}\n			<!-- point t(AQ) -->\n			<g intro='fade' outro='fade' transform='translate({{ tAQ.x }},{{ tAQ.y }})'>\n				<circle class='intermediate-node' r='5'/>\n				{{#showLabels}}<text intro='fade' outro='fade' x='-20' style='text-anchor: end;'>t(AQ)</text>{{/showLabels}}\n			</g>\n\n\n			<!-- point t(QB) -->\n			<g intro='fade' outro='fade' transform='translate({{ tQB.x }},{{ tQB.y }})'>\n				<circle class='intermediate-node' r='5'/>\n				{{#showLabels}}<text intro='fade' outro='fade' x='20' style='text-anchor: start;'>t(QB)</text>{{/showLabels}}\n			</g>\n\n			<!-- point t(t(AQ)t(QB)) -->\n			<g intro='fade' outro='fade' transform='translate({{ Z.x }},{{ Z.y }})'>\n				<circle class='intermediate-node' r='5'/>\n			</g>\n		{{/showIntermediatePoints}}\n\n\n\n\n\n\n\n		<!-- direction of travel -->\n		{{#showTrajectory}}\n		<line\n			intro='fade' outro='fade'\n			class='trajectory'\n			x1='{{Z.x}}' y1='{{Z.y}}'\n			x2='{{( Z.x + ( exaggeration * direction.x ) )}}'\n			y2='{{( Z.y + ( exaggeration * direction.y ) )}}'\n		/>\n		{{/showTrajectory}}\n\n\n\n		<!-- arrowhead center -->\n		{{#showArrowheadBase}}\n			<circle intro='fade' outro='fade' fill='red' r='5' cx='{{arrowhead.center.x}}' cy='{{arrowhead.center.y}}'/>\n		{{/showArrowheadBase}}\n\n		{{#showCrossbars}}\n			<line\n				intro='fade' outro='fade'\n				class='cross'\n				x1='{{arrowhead.po.x}}' y1='{{arrowhead.po.y}}'\n				x2='{{arrowhead.so.x}}' y2='{{arrowhead.so.y}}'\n			/>\n\n\n			<!-- midpoint -->\n			<line\n				intro='fade' outro='fade'\n				class='cross'\n				x1='{{approximation_midpoint_port.x}}' y1='{{approximation_midpoint_port.y}}'\n				x2='{{approximation_midpoint_starboard.x}}' y2='{{approximation_midpoint_starboard.y}}'\n			/>\n\n			<circle intro='fade' outro='fade' fill='red' r='5' cx='{{midpoint_Z.x}}' cy='{{midpoint_Z.y}}'/>\n		{{/showCrossbars}}\n\n\n		{{#showApproximationOutline}}\n			<path intro='fade' outro='fade' class='approximation-outline' d='M{{A.x}},{{A.y}} Q{{approximation_midpoint_port.x}},{{approximation_midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{approximation_midpoint_starboard.x}},{{approximation_midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showApproximationOutline}}\n\n		{{#showApproximation}}\n			<path intro='fade' outro='fade' class='approximation' d='M{{A.x}},{{A.y}} Q{{approximation_midpoint_port.x}},{{approximation_midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{approximation_midpoint_starboard.x}},{{approximation_midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showApproximation}}\n\n		{{#showResultOutline}}\n			<path intro='fade' outro='fade' class='result-outline' d='M{{A.x}},{{A.y}} Q{{midpoint_port.x}},{{midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{midpoint_starboard.x}},{{midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showResultOutline}}\n\n		{{#showResult}}\n			<path intro='fade' outro='fade' class='result' d='M{{A.x}},{{A.y}} Q{{midpoint_port.x}},{{midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{midpoint_starboard.x}},{{midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showResult}}\n\n	</svg>\n\n	<div class='sidebar-controls-outer'>\n		<div class='sidebar-controls-inner'>\n			<h3>Show</h3>\n\n			<label><input type='checkbox' checked='{{showNodes}}'> nodes</label>\n			<label><input type='checkbox' checked='{{showLabels}}'> labels</label>\n			<label><input type='checkbox' checked='{{showGuideVectors}}'> guide vectors</label>\n			<label><input type='checkbox' checked='{{showGuideCurve}}'> guide curve</label>\n			<label><input type='checkbox' checked='{{showIntermediatePoints}}'> intermediate points</label>\n			<label><input type='checkbox' checked='{{showIntermediateVectors}}'> intermediate vectors</label>\n			<label><input type='checkbox' checked='{{showIntermediateCurve}}'> intermediate curve</label>\n			<label><input type='checkbox' checked='{{showTrajectory}}'> trajectory</label>\n			<label><input type='checkbox' checked='{{showTrajectoryHint}}'> trajectory hint</label>\n			<label><input type='checkbox' checked='{{showArrowheadBase}}'> arrowhead base</label>\n			<label><input type='checkbox' checked='{{showCrossbars}}'> cross bars</label>\n			<!--<label><input type='checkbox' checked='{{showApproximationOutline}}'> approximation outline</label>-->\n			<label><input type='checkbox' checked='{{showApproximation}}'> approximation</label>\n			<!--<label><input type='checkbox' checked='{{showResultOutline}}'> result outline</label>-->\n			<label><input type='checkbox' checked='{{showResult}}'> result</label>\n\n			<h3>Thickness</h3>\n			<input type='range' min='1' max='70' step='0.1' value='{{thickness}}'>\n			<label><input type='checkbox' checked='{{varyThickness}}'> vary with time</label>\n		</div>\n	</div>\n\n	<div class='controls'>\n		<label class='slider'><input type='range' value='{{t}}' min='0' max='1' step='0.001'/> <span>t = {{( t.toFixed( 2 ) )}}</span></label>\n	</div>\n</div>"},{styles:".slide {\n	color: white;\n}\n\n.background {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background-color: black;\n}\n\n.background-image {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background: url(files/images/takeaway.jpg) no-repeat 50% 50%;\n	background-size: cover;\n	opacity: 0.4;\n}",stages:6,slide:"<div class='background' intro='fade' outro='fade'></div>\n<div class='background-image' intro='fade:{\"delay\":500}' outro='fade'></div>\n\n<div class='header' intro='fade' outro='fade'>\n	<h1>Takeaways</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<ul>\n		{{#( stage >= 1 )}}\n			<li intro='fade' outro='fade'>Don't settle for merely informing your audience &ndash; delight them, with presentations that are <em>beautiful</em>, <em>understandable</em>, and <em>alive</em></li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade' outro='fade'>Computers are stupid, and lack aesthetic judgment. We have to guide them. Don't rely on the default settings!</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade' outro='fade'>Tricky problems are the only ones worth solving</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade' outro='fade'>Look everywhere for inspiration, not just best practice in your own field</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade' outro='fade'>Learn SVG!</li>\n		{{/()}}\n	</ul>\n</div>",images:["files/images/takeaway.jpg"]},{styles:".content {\n	text-align: center;\n}\n\nh1 {\n	display: inline-block;\n	font-size: 3em;\n	margin: 0 0 2em 0;\n	padding: 0 0 0.1em 0;\n	border-bottom: 1px solid #eee;\n}\n\nh2 {\n	margin: 0.5em 0 0 0;\n}",slide:"<div class='content' intro='fade' outro='fade'>\n	<h1 class='end'>Thank you</h1>\n\n	<p class='link'>slides: <a href='http://rich-harris.co.uk/engineering-delight'>rich-harris.co.uk/engineering-delight</a></p>\n	<p class='credit'><a href='http://twitter.com/rich_harris'>@rich_harris</a></p>\n</div>"}]}
}()),define("controllers/router",[],function(){var t=/#\/([0-9]+)/;return function(n){var e;n.state.set("slideNum",0),e=function(){var e;(e=t.exec(window.location.hash))&&n.state.set("slideNum",+e[1])},window.addEventListener("hashchange",e),e(),n.state.observe("slideNum",function(t){isNaN(t)||(window.location.hash="/"+t)})}}),function(t){var n,e,i,r,o,a,s,l,d,c,h,u,p,f,g,m,v,y,w,b,x,k,_,A,N,O,z,C,S,E,M,L,T,j=t.document||null,F={},$={},B={},Q={},R=function(){},I={},P=/^\s+/,q=/\s+$/,V="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",D=1,H=2,Z=3,U=4,W=5,G=6,J=7,Y=8,X=9,K=10,tn=11,nn=12,en=20,rn=21,on=22,an=23,sn=24,ln=26,dn=30,cn=31,hn=32,un=33,pn=34,fn=35,gn=36,mn=40,vn={unset:!0},yn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),g=Object.defineProperty,m=Object.defineProperties}catch(wn){g=function(t,n,e){t[n]=e.value},m=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&g(t,e,n[e])}}try{Object.create(null),v=Object.create,y=function(){return Object.create(null)}}catch(wn){v=function(){var t=function(){};return function(n,e){var i;return t.prototype=n,i=new t,e&&Object.defineProperties(i,e),i}}(),y=function(){return{}}}var bn,xn,kn,_n=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})};!function(){var t;j&&(t=j.createElement("div"),void 0!==t.style.transition?(xn="transition",kn="transitionend",bn=!0):void 0!==t.style.webkitTransition?(xn="webkitTransition",kn="webkitTransitionEnd",bn=!0):bn=!1)}(),function(t){var n=function(t,n,e){var i;if("string"==typeof n&&c(e)){if(i=t.get(n),void 0===i&&(i=0),c(i))t.set(n,i+e);else if(t.debug)throw new Error("Cannot add to a non-numeric value")}else if(t.debug)throw new Error("Bad arguments")};t.add=function(t,e){n(this,t,void 0===e?1:e)},t.subtract=function(t,e){n(this,t,void 0===e?-1:-e)},t.toggle=function(t){var n;if("string"==typeof t)n=this.get(t),this.set(t,!n);else if(this.debug)throw new Error("Bad arguments")}}(F),function(t){var e,i;t.animate=function(t,n,i){var r,o,a;if("object"==typeof t){i=n||{},a=[];for(r in t)t.hasOwnProperty(r)&&(a[a.length]=e(this,r,t[r],i));return{stop:function(){for(;a.length;)a.pop().stop()}}}return i=i||{},o=e(this,t,n,i),{stop:function(){o.stop()}}},i={stop:R},e=function(t,e,r,o){var a,s,l,d,c;if(c=t.get(e),h(c,r))return i;for(d=C.animations.length;d--;)C.animations[d].keypath===e&&C.animations[d].stop();return o.easing&&(a="function"==typeof o.easing?o.easing:t.easing&&t.easing[o.easing]?t.easing[o.easing]:n.easing[o.easing],"function"!=typeof a&&(a=null)),s=void 0===o.duration?400:o.duration,l=new k({keypath:e,from:c,to:r,root:t,duration:s,easing:a,step:o.step,complete:o.complete}),C.push(l),t._animations[t._animations.length]=l,l}}(F),F.bind=function(t){var n=this._bound;-1===n.indexOf(t)&&(n[n.length]=t,t.init(this))},F.cancelFullscreen=function(){n.cancelFullscreen(this.el)},F.fire=function(t){var n,e,i,r=this._subs[t];if(r)for(n=Array.prototype.slice.call(arguments,1),e=0,i=r.length;i>e;e+=1)r[e].apply(this,n)},F.get=function(t){var n,e,i,r,o,s,d,c,h;if(!t)return this.data;if(n=this._cache,l(t)){if(!t.length)return this.data;i=t.slice(),r=i.join("."),h=!0}else{if(n.hasOwnProperty(t)&&n[t]!==vn)return n[t];i=a(t),r=i.join(".")}return!n.hasOwnProperty(r)||n[r]===vn||void 0===n[r]&&h?this._evaluators[r]?(c=this._evaluators[r].value,n[r]=c,c):(o=i.pop(),s=i.join("."),d=i.length?this.get(i):this.data,null!==d&&"object"==typeof d&&d!==vn?((e=this._cacheMap[s])?-1===e.indexOf(r)&&(e[e.length]=r):this._cacheMap[s]=[r],c=d[o],this.modifyArrays&&("("===r.charAt(0)||!l(c)||c._ractive&&c._ractive.setting||S(c,r,this)),n[r]=c,c):void 0):n[r]};var An,Nn,On,zn,Cn,Sn,En;An=function(t){if(t.keypath)zn(t);else{var n=t.root._pendingResolution.indexOf(t);-1!==n&&t.root._pendingResolution.splice(n,1)}},Nn=function(t,n){var e,i;if(t.modifyArrays&&"("!==n.charAt(0)&&(e=t._cache[n],l(e)&&!e._ractive.setting&&E(e,n,t)),t._cache[n]=vn,i=t._cacheMap[n])for(;i.length;)Nn(t,i.pop())},On=function(t){var n,e,i,r,o,s,l,d;for(s=t.root,l=t.keypath,d=t.priority,n=s._deps[d]||(s._deps[d]={}),e=n[l]||(n[l]=[]),e[e.length]=t,i=a(l);i.length;)i.pop(),r=i.join("."),o=s._depsMap[r]||(s._depsMap[r]=[]),void 0===o[l]&&(o[l]=0,o[o.length]=l),o[l]+=1,l=r},zn=function(t){var n,e,i,r,o,s,l;for(o=t.root,s=t.keypath,l=t.priority,n=o._deps[l][s],n.splice(n.indexOf(t),1),e=a(s);e.length;)e.pop(),i=e.join("."),r=o._depsMap[i],r[s]-=1,r[s]||(r.splice(r.indexOf(s),1),r[s]=void 0),s=i},Cn=function(t,n,e){var i;for(i=0;i<t._deps.length;i+=1)Mn(t,n,i,e)};var Mn=function(t,n,e,i){var r,o,a,s;if(r=t._deps[e]){if(o=r[n])for(a=o.length;a--;)o[a].update();if(!i&&(s=t._depsMap[n]))for(a=s.length;a--;)Mn(t,s[a],e)}},Ln=function(t,n,e){var i,r,o;for(o=n.length,i=0;i<t._deps.length;i+=1)if(t._deps[i])for(r=o;r--;)Mn(t,n[r],i,e)};Sn=function(t,n,e){var i,r,o,s,l,d;if("."===n)return e[e.length-1];if("."===n.charAt(0))return e[e.length-1]+n;for(i=a(n),r=i.pop(),e=e.concat();e.length;)if(o=e.pop(),s=a(o),l=t.get(s.concat(i)),"object"==typeof l&&null!==l&&l.hasOwnProperty(r)){d=o+"."+n;break}return d||void 0===t.get(n)||(d=n),d},En=function(t){for(var n,e;t._defEvals.length;)n=t._defEvals.pop(),n.update().deferred=!1;for(;t._defAttrs.length;)e=t._defAttrs.pop(),e.update().deferred=!1},F.link=function(t){var n=this;return function(e){n.set(t,e)}},function(t){var n,e;t.observe=function(t,e,i){var r,o=[];if("object"==typeof t){i=e;for(r in t)t.hasOwnProperty(r)&&(e=t[r],o[o.length]=n(this,r,e,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}return n(this,t,e,i)},n=function(t,n,i,r){var o;return o=new e(t,n,i,r),r&&r.init===!1||o.update(),On(o),{cancel:function(){zn(o)}}},e=function(t,n,e,i){this.root=t,this.keypath=n,this.callback=e,this.priority=0,this.context=i&&i.context?i.context:t},e.prototype={update:function(){var t;if(t=this.root.get(this.keypath,!0),!h(t,this.value)){try{this.callback.call(this.context,t,this.value)}catch(n){if(this.root.debug)throw n}this.value=t}}}}(F),F.off=function(t,n){var e,i;n||(t?this._subs[t]=[]:this._subs={}),e=this._subs[t],e&&(i=e.indexOf(n),-1!==i&&e.splice(i,1))},F.on=function(t,n){var e,i,r=this;if("object"==typeof t){e=[];for(i in t)t.hasOwnProperty(i)&&(e[e.length]=this.on(i,t[i]));return{cancel:function(){for(;e.length;)e.pop().cancel()}}}return this._subs[t]?this._subs[t].push(n):this._subs[t]=[n],{cancel:function(){r.off(t,n)}}},F.render=function(t){var n,e;if(n=t.el?u(t.el):this.el,!n)throw new Error("You must specify a DOM element to render to");t.append||(n.innerHTML=""),this._transitionManager=e=Qn(this,t.complete),this.fragment=new w({descriptor:this.template,root:this,owner:this,parentNode:n}),n.appendChild(this.fragment.docFrag),this.ready=!0,this._transitionManager=null,e.ready=!0,e.active||e.complete()},F.requestFullscreen=function(){n.requestFullscreen(this.el)},function(t){var n,e;t.set=function(t,i,r){var o,s,l,c,h,u,p;if(s=[""],o=[],d(t)&&(r=i),u=this._transitionManager,this._transitionManager=p=Qn(this,r),d(t))for(l in t)t.hasOwnProperty(l)&&(h=a(l),c=h.join("."),i=t[l],n(this,c,h,i,o,s));else h=a(t),c=h.join("."),n(this,c,h,i,o,s);return o.length&&this._pendingResolution.length&&e(this),s.length&&Ln(this,s,!0),o.length&&Ln(this,o),En(this),this._transitionManager=u,p.ready=!0,p.active||p.complete(),this.setting||(this.setting=!0,"object"==typeof t?this.fire("set",t):this.fire("set",t,i),this.setting=!1),this},n=function(t,n,e,i,r,o){var a,s,l,d;if(d=e.slice(),a=t.get(n),a!==i){for(l=t.data;e.length>1;)s=e.shift(),l[s]||(l[s]=/^\s*[0-9]+\s*$/.test(e[0])?[]:{}),l=l[s];s=e[0],l[s]=i}else if("object"!=typeof i)return;for(Nn(t,n),r[r.length]=n;d.length>1;)d.pop(),n=d.join("."),-1===o.indexOf(n)&&(o[o.length]=n)},e=function(t){var n,e,i;for(n=t._pendingResolution.length;n--;)e=t._pendingResolution.splice(n,1)[0],(i=Sn(t,e.ref,e.contextStack))?e.resolve(i):t._pendingResolution[t._pendingResolution.length]=e}}(F),F.teardown=function(t){var n,e,i;for(this.fire("teardown"),i=this._transitionManager,this._transitionManager=e=Qn(this,t),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(n in this._cache)Nn(this,n);for(;this._bound.length;)this.unbind(this._bound.pop());this._transitionManager=i,e.ready=!0,e.active||e.complete()},F.toggleFullscreen=function(){n.isFullscreen(this.el)?this.cancelFullscreen():this.requestFullscreen()},F.unbind=function(t){var n,e=this._bound;n=e.indexOf(t),-1!==n&&(e.splice(n,1),t.teardown(this))},F.update=function(t,n){var e,i;return"function"==typeof t&&(n=t),i=this._transitionManager,this._transitionManager=e=Qn(this,n),Nn(this,t||""),Cn(this,t||""),En(this),this._transitionManager=i,e.ready=!0,e.active||e.complete(),"string"==typeof t?this.fire("update",t):this.fire("update"),this},$.backbone=function(t,n){var e,i,r,o,a,s,l;return n&&(n+=".",a=new RegExp("^"+n.replace(/\./g,"\\.")),s=n.length),{init:function(d){n?(l=function(t){var e,i;i={};for(e in t)t.hasOwnProperty(e)&&(i[n+e]=t[e]);return i},o=function(t){e||(i=!0,d.set(l(t.changed)),i=!1)},r=function(n,r){i||a.test(n)&&(e=!0,t.set(n.substring(s),r),e=!1)}):(o=function(t){e||(i=!0,d.set(t.changed),i=!1)},r=function(n,r){i||(e=!0,t.set(n,r),e=!1)}),t.on("change",o),d.on("set",r),d.set(n?l(t.attributes):t.attributes)},teardown:function(n){t.off("change",o),n.off("set",r)}}},$.statesman=function(t,n){var e,i,r,o,a,s,l;return n&&(n+=".",a=new RegExp("^"+n.replace(/\./g,"\\.")),s=n.length,l=function(t){var e,i;if(t){i={};for(e in t)t.hasOwnProperty(e)&&(i[n+e]=t[e]);return i}}),{init:function(d){var c;n?(o=function(t,r){var o;e||(i=!0,"object"==typeof t?(o=l(t),d.set(o)):d.set(n+t,r),i=!1)},d.twoway&&(r=function(n,r){i||a.test(n)&&(e=!0,t.set(n.substring(s),r),e=!1)})):(o=function(t,n){e||(i=!0,"object"==typeof t?d.set(t):d.set(t,n),i=!1)},d.twoway&&(r=function(n,r){i||(e=!0,t.set(n,r),e=!1)})),t.on("change",o),d.twoway&&d.on("set",r),c=n?l(t.get()):t.get(),c&&d.set(n?l(t.get()):t.get())},teardown:function(n){t.off("change",o),n.off("set",r)}}},e={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},B.tap=function(t,n){var e,i,r,o;return r=5,o=400,e=function(t){var e,i,a,s,l,d;i=t.clientX,a=t.clientY,e=this,s=function(t){n({node:e,original:t}),d()},l=function(t){(Math.abs(t.clientX-i)>=r||Math.abs(t.clientY-a)>=r)&&d()},d=function(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s)},window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),setTimeout(d,o)},t.addEventListener("mousedown",e),i=function(t){var e,i,a,s,l,d,c,h;1===t.touches.length&&(s=t.touches[0],i=s.clientX,a=s.clientY,e=this,l=s.identifier,c=function(t){var i;i=t.changedTouches[0],i.identifier!==l&&h(),t.preventDefault(),n({node:e,original:t}),h()},d=function(t){var n;(1!==t.touches.length||t.touches[0].identifier!==l)&&h(),n=t.touches[0],(Math.abs(n.clientX-i)>=r||Math.abs(n.clientY-a)>=r)&&h()},h=function(){window.removeEventListener("touchmove",d),window.removeEventListener("touchend",c),window.removeEventListener("touchcancel",h)},window.addEventListener("touchmove",d),window.addEventListener("touchend",c),window.addEventListener("touchcancel",h),setTimeout(h,o))},t.addEventListener("touchstart",i),{teardown:function(){t.removeEventListener("mousedown",e),t.removeEventListener("touchstart",i)}}},function(){var t,e,r,o,a,s,l,c,h,u,p,f,g;i=function(t){var e,i;return e=this,i=function(t){u(this,i,t||{})},i.prototype=v(e.prototype),e!==n&&o(i,e),s(i,t),l(i),c(i,t),h(i),i.extend=e.extend,i},p=["data","partials","transitions","eventDefinitions"],f=["el","template","complete","modifyArrays","twoway","lazy","append","preserveWhitespace","sanitize"],g=p.concat(f),o=function(t,n){p.forEach(function(i){n[i]&&(t[i]=e(n[i]))}),f.forEach(function(e){void 0!==n[e]&&(t[e]=n[e])})},a=function(t,n){return/_super/.test(t)?function(){var e=this._super;this._super=n,t.apply(this,arguments),this._super=e}:t},s=function(t,n){var e,i;p.forEach(function(e){var i=n[e];i&&(t[e]?r(t[e],i):t[e]=i)}),f.forEach(function(e){void 0!==n[e]&&(t[e]=n[e])});for(e in n)n.hasOwnProperty(e)&&!t.prototype.hasOwnProperty(e)&&-1===g.indexOf(e)&&(i=n[e],t.prototype[e]="function"==typeof i&&"function"==typeof t.prototype[e]?a(i,t.prototype[e]):i)},l=function(t){var e;if("string"==typeof t.template){if(!n.parse)throw new Error(V);if("#"===t.template.charAt(0)){if(e=document.getElementById(t.template.substring(1)),!e||"SCRIPT"!==e.tagName)throw new Error("Could not find template element ("+t.template+")");t.template=n.parse(e.innerHTML,t)}else t.template=n.parse(t.template,t)}},c=function(t,n){d(t.template)&&(t.partials||(t.partials={}),r(t.partials,t.template.partials),n.partials&&r(t.partials,n.partials),t.template=t.template.template)},h=function(t){var e,i;if(t.partials)for(e in t.partials)if(t.partials.hasOwnProperty(e)){if("string"==typeof t.partials[e]){if(!n.parse)throw new Error(V);i=n.parse(t.partials[e],t)}else i=t.partials[e];t.partials[e]=i}},u=function(i,r,o){!o.template&&r.template&&(o.template=r.template),p.forEach(function(n){o[n]?t(o[n],r[n]):r[n]&&(o[n]=e(r[n]))}),f.forEach(function(t){void 0===o[t]&&void 0!==r[t]&&(o[t]=r[t])}),n.call(i,o),i.init&&i.init.call(i,o)},t=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])},e=function(t){var n,e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r=function(t,n){var e;for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}}(),r=function(t,e){return c(t)&&c(e)?n.interpolators.number(+t,+e):l(t)&&l(e)?n.interpolators.array(t,e):d(t)&&d(e)?n.interpolators.object(t,e):function(){return e}},o={number:function(t,n){var e=n-t;return e?function(n){return t+n*e}:function(){return t}},array:function(t,e){var i,r,o,a;for(i=[],r=[],a=o=Math.min(t.length,e.length);a--;)r[a]=n.interpolate(t[a],e[a]);for(a=o;a<t.length;a+=1)i[a]=t[a];for(a=o;a<e.length;a+=1)i[a]=e[a];return function(t){for(var n=o;n--;)i[n]=r[n](t);return i}},object:function(t,e){var i,r,o,a,s=[];o={},r={};for(a in t)t.hasOwnProperty(a)&&(e.hasOwnProperty(a)?(s[s.length]=a,r[a]=n.interpolate(t[a],e[a])):o[a]=t[a]);for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(o[a]=e[a]);return i=s.length,function(t){for(var n,e=i;e--;)n=s[e],o[n]=r[n](t);return o}}};var Tn=y();m(Tn,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}},eventDefinitions:{enumerable:!0,value:{}}}),n=function(t){var e,i,r,o,a,s;for(e in Tn)t.hasOwnProperty(e)||(t[e]="object"==typeof Tn[e]?{}:Tn[e]);if(m(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n,e;return n=0|16*Math.random(),e="x"==t?n:8|3&n,e.toString(16)})},_subs:{value:y()},_cache:{value:{}},_cacheMap:{value:y()},_deps:{value:[]},_depsMap:{value:y()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_proxies:{value:y()},_customProxies:{value:y()},_evaluators:{value:y()},_bound:{value:[]},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}}}),this.modifyArrays=t.modifyArrays,this.twoway=t.twoway,this.lazy=t.lazy,this.debug=t.debug,this.el=u(t.el),this.data=t.data||{},this.partials={},this.transitions=t.transitions,this.eventDefinitions=t.eventDefinitions,t.bindings)if(l(t.bindings))for(r=0;r<t.bindings.length;r+=1)this.bind(t.bindings[r]);else this.bind(t.bindings);if(o=t.template,"string"==typeof o){if(!n.parse)throw new Error(V);if("#"===o.charAt(0)){if(a=j.getElementById(o.substring(1)),!a)throw new Error("Could not find template element ("+o+")");s=n.parse(a.innerHTML,t)}else s=n.parse(o,t)}else s=o;if(d(s)&&(this.partials=s.partials,s=s.template),s&&1===s.length&&"string"==typeof s[0]&&(s=s[0]),this.template=s,t.partials)for(e in t.partials)if(t.partials.hasOwnProperty(e)){if(i=t.partials[e],"string"==typeof i){if(!n.parse)throw new Error(V);i=n.parse(i,t)}this.partials[e]=i}for(e in this.partials)this.partials.hasOwnProperty(e)&&1===this.partials[e].length&&"string"==typeof this.partials[e][0]&&(this.partials[e]=this.partials[e][0]);this.el&&this.render({el:this.el,append:t.append,complete:t.complete})},function(){var t,n,i,r;t=function(t,n){var e,i={};for(e=n.length;e--;)i[n[e]]=t[n[e]];return i},n=function(t,n,e,i){for(var r,o=n.length;o--;)r=n[o],t.style[r]=e&&e[r]?"function"==typeof e[r]?e[r](i):e[r]:0},i=function(t,n){var e;if(!n)return t;for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},r=function(r,o,a,s){return"string"==typeof r&&(r=[r]),function(l,d,c,h,u){var p,f,g,m,v,y,w,b,x,k,_;c=jn(c),y=c.duration||o.duration,e=_n(c.easing||o.easing),w=(c.delay||o.delay||0)+(c.stagger||o.stagger||0)*h.i,b=u?a:s,x=u?s:a,f=window.getComputedStyle(l),v=l.getAttribute("style"),u?(k=l.style.position,_=l.style.visibility,l.style.position="absolute",l.style.visibility="hidden",setTimeout(function(){g=t(f,r),b=a,x=i(g,s),l.style.position=k,l.style.visibility=_,n(l,r,b,c),setTimeout(m,0)},w)):setTimeout(function(){g=t(f,r),b=i(g,s),x=a,n(l,r,b,c),setTimeout(m,0)},w),m=function(){l.style[xn+"Duration"]=y/1e3+"s",l.style[xn+"Properties"]=r.map(_n).join(","),l.style[xn+"TimingFunction"]=e,p=function(){l.removeEventListener(kn,p),u&&l.setAttribute("style",v||""),d()},l.addEventListener(kn,p),n(l,r,x,c)}}},Q.slide=r(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","overflowY"],{duration:400,easing:"easeInOut"},{overflowY:"hidden"},{overflowY:"hidden"}),Q.fade=r("opacity",{duration:300,easing:"linear"}),Q.fly=r(["opacity","left","position"],{duration:400,easing:"easeOut"},{position:"relative",left:"-500px"},{position:"relative",left:0})}();var jn=function(t){return"fast"===t?{duration:200}:"slow"===t?{duration:600}:c(t)?{duration:+t}:t||{}};Q.typewriter=function(t,n,e){var i,r,o,a,s,l,d,c;e=jn(e),l=t.innerText,d=l.length,r=e.duration||(e.speed?1e3*d/e.speed:30*d),o=t.getAttribute("style"),a=window.getComputedStyle(t),t.style.visibility="hidden",setTimeout(function(){var n,r,o;r=a.width,n=a.height,o=a.visibility,setTimeout(function(){i=Date.now(),t.style.width=r,t.style.height=n,t.style.visibility="visible",console.log(r),console.log(n),s=!0,c()},e.delay||0)}),c=function(){var e,a,h,u;return e=Date.now(),a=e-i,a>r?(t.innerText=l,t.setAttribute("style",o||""),s=!1,n(),void 0):(h=a/r,u=Math.round(h*d),t.innerText=l.substr(0,u),p(c),void 0)}},function(t){var n,e,i,r;if(j){if(t.fullscreenEnabled=j.fullscreenEnabled||j.mozFullScreenEnabled||j.webkitFullscreenEnabled,!t.fullscreenEnabled)return t.requestFullscreen=t.cancelFullscreen=R,void 0;r=document.createElement("div"),r.requestFullscreen?n="requestFullscreen":r.mozRequestFullScreen?n="mozRequestFullScreen":r.webkitRequestFullscreen&&(n="webkitRequestFullscreen"),t.requestFullscreen=function(t){t[n]&&t[n]()},j.cancelFullscreen?e="cancelFullscreen":j.mozCancelFullScreen?e="mozCancelFullScreen":j.webkitCancelFullScreen&&(e="webkitCancelFullScreen"),t.cancelFullscreen=function(){j[e]()},void 0!==j.fullscreenElement?i="fullscreenElement":void 0!==document.mozFullScreenElement?i="mozFullScreenElement":void 0!==document.webkitFullscreenElement&&(i="webkitFullscreenElement"),t.isFullscreen=function(t){return t===j[i]}}}(n),k=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=n.interpolate(this.from,this.to),this.running=!0},k.prototype={tick:function(){var t,n,e,i,r;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),r=this.root._animations.indexOf(this),-1===r&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(n=this.easing?this.easing(t/this.duration):t/this.duration,e=this.interpolator(n),this.root.set(this.keypath,e),this.step&&this.step(n,e),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(t,1)}},C={animations:[],tick:function(){var n,e;for(n=0;n<this.animations.length;n+=1)e=this.animations[n],e.tick()||this.animations.splice(n--,1);this.animations.length?t.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){C.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,n,e){var i;if(e.requestAnimationFrame)return p=e.requestAnimationFrame,f=e.cancelAnimationFrame,void 0;for(i=0;i<t.length&&!p;++i)p=e[t[i]+"RequestAnimationFrame"],f=e[t[i]+"CancelAnimationFrame"]||e[t[i]+"CancelRequestAnimationFrame"];p||(p=function(t){var i,r,o;return i=Date.now(),r=Math.max(0,16-(i-n)),o=e.setTimeout(function(){t(i+r)},r),n=i+r,o}),f||(f=function(t){e.clearTimeout(t)})}(["ms","moz","webkit","o"],0,t),function(){var t,n,e,i,r,o;S=function(t,e,i){var r,o,a;t._ractive?(r=t._ractive.roots,o=t._ractive.keypathsByGuid,o[i._guid]||(r[r.length]=i,o[i._guid]=[]),a=o[i._guid],-1===a.indexOf(e)&&(a[a.length]=e)):(g(t,"_ractive",{value:{roots:[i],keypathsByGuid:{}},configurable:!0}),t._ractive.keypathsByGuid[i._guid]=[e],n(t))},E=function(t,n,i){var r,o,a,s;if(!t._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=t._ractive.roots,o=t._ractive.keypathsByGuid,!o[i._guid])throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(a=o[i._guid],s=a.indexOf(n),-1===s)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");a.splice(s,1),a.length||(r.splice(r.indexOf(i),1),o[i._guid]=null),r.length||e(t)},t=function(t,n,e){var i,r,o,s,l,d;d=t._ractive.keypathsByGuid,i=function(t){for(var n=t.length;n--;)r(t[n])},r=function(t){var n=t._transitionManager;t._transitionManager=Qn(t,R),o(t,d[t._guid]),t._transitionManager=n},o=function(t,n){for(var e=n.length;e--;)s(t,n[e])},s=function(t,i){var r,o,s,d,c,h,u;for(Nn(t,i),c=[],h=[],u=0;u<t._deps.length;u+=1)if(r=t._deps[u],r&&(o=r[i])){for(l(t,i,o,c,h),En(t);c.length;)c.pop().smartUpdate(n,e);for(;h.length;)h.pop().update()}for(En(t),d=[],s=a(i);s.length;)s.pop(),d[d.length]=s.join(".");d[d.length]=i+".length",Ln(t,d,!0)},l=function(t,n,e,i,r){var o,a;for(o=e.length;o--;)a=e[o],a.type===dn?a.update():a.keypath===n&&a.type===U?i[i.length]=a:r[r.length]=a},i(t._ractive.roots)},i=[],o=["pop","push","reverse","shift","sort","splice","unshift"],o.forEach(function(n){var e=function(){var e=Array.prototype[n].apply(this,arguments);return this._ractive.setting=!0,t(this,n,arguments),this._ractive.setting=!1,e};g(i,n,{value:e})}),r={},r.__proto__?(n=function(t){t.__proto__=i},e=function(t){delete t._ractive,t.__proto__=Array.prototype}):(n=function(t){var n,e;for(n=o.length;n--;)e=o[n],g(t,e,{value:i[e]})},e=function(t){var n;for(n=o.length;n--;)delete t[o[n]];delete t._ractive})}(),function(t){var n,e;x=function(t,i,r,o,a){var s,l;for(this.root=t,this.keypath=i,this.fn=e(r,o.length),this.values=[],this.refs=[],s=o.length;s--;)l=o[s],l[0]?this.values[s]=l[1]:this.refs[this.refs.length]=new n(t,l[1],this,s,a);this.selfUpdating=this.refs.length<=1,this.update()},x.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var t;try{t=this.fn.apply(null,this.values)}catch(n){if(this.root.debug)throw n;t=void 0}return h(t,this.value)||(Nn(this.root,this.keypath),this.root._cache[this.keypath]=t,Cn(this.root,this.keypath),this.value=t),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();Nn(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var t=this.refs.length;t--;)this.refs[t].update();this.deferred&&(this.update(),this.deferred=!1)}},n=function(t,n,e,i,r){this.evaluator=e,this.keypath=n,this.root=t,this.argNum=i,this.type=dn,this.priority=r,this.value=e.values[i]=t.get(n),On(this)},n.prototype={update:function(){var t=this.root.get(this.keypath);h(t,this.value)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this.value=t)},teardown:function(){zn(this)}},e=function(n,e){var i,r;if(n=n.replace(/❖/g,"_"),t[n])return t[n];for(r=[];e--;)r[e]="_"+e;return i=new Function(r.join(","),"return("+n+")"),t[n]=i,i}}({});var Fn;!function(){var t,n;Fn=function(n){var e,i,r,o,a;for(this.root=n.root,this.mustache=n,this.args=[],this.scouts=[],e=n.descriptor.x,a=n.parentFragment.indexRefs,this.str=e.s,r=this.unresolved=e.r?e.r.length:0,r||this.init(),i=0;r>i;i+=1)o=e.r[i],a&&void 0!==a[o]?this.resolveRef(i,!0,a[o]):this.scouts[this.scouts.length]=new t(this,o,n.contextStack,i)},Fn.prototype={init:function(){this.keypath=n(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(t,n,e){this.args[t]=[n,e],--this.unresolved||this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new x(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},t=function(t,n,e,i){var r,o;o=this.root=t.root,r=Sn(o,n,e),r?t.resolveRef(i,!1,r):(this.ref=n,this.argNum=i,this.resolver=t,this.contextStack=e,o._pendingResolution[o._pendingResolution.length]=this)},t.prototype={resolve:function(t){this.keypath=t,this.resolver.resolveRef(this.argNum,!1,t)},teardown:function(){this.keypath||An(this)}},n=function(t,n){var e;return e=t.replace(/❖([0-9]+)/g,function(t,e){return n[e][1]}),"("+e.replace(/[\.\[\]]/g,"-")+")"}}();var $n,Bn=function(t,e,i,r,o){var a,s,l,d,c;"string"==typeof t?a=t:(a=t.n,t.a?s=t.a:t.d&&(l=new b({descriptor:t.d,root:e,owner:i,contextStack:parentFragment.contextStack}),s=l.toJson(),l.teardown())),c=e.transitions[a]||n.transitions[a],c&&(d=e._transitionManager,d.push(),c.call(e,i.node,d.pop,s,d.info,o))};!function(){var t,e;$n=function(i,r){var o,a;if(a=t(i,r))return a;if(a=t(n,r))return a;if(o=j.getElementById(r),o&&"SCRIPT"===o.tagName){if(!n.parse)throw new Error(V);n.partials[r]=n.parse(o.innerHTML)}return a=n.partials[r],a?e(a):(i.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+r+'"'),[])},t=function(t,i){if(t.partials[i]){if("string"==typeof t.partials[i]){if(!n.parse)throw new Error(V);t.partials[i]=n.parse(t.partials[i])}return e(t.partials[i])}},e=function(t){return 1===t.length&&"string"==typeof t[0]?t[0]:t}}(),O=function(t,n){var e,i,r,o,a;if(t.owner=n.owner,t.root=n.root,t.parentNode=n.parentNode,t.contextStack=n.contextStack||[],t.owner.type===U&&(t.index=n.index),t.owner.parentFragment&&(o=t.owner.parentFragment.indexRefs)){t.indexRefs=y();for(a in o)t.indexRefs[a]=o[a]}for(n.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[n.indexRef]=n.index),t.items=[],r={parentFragment:t},e=n.descriptor?n.descriptor.length:0,i=0;e>i;i+=1)r.descriptor=n.descriptor[i],r.index=i,t.items[t.items.length]=t.createItem(r)},_=function(t,n){var e,i,r;r=t.parentFragment=n.parentFragment,t.root=r.root,t.contextStack=r.contextStack,t.descriptor=n.descriptor,t.index=n.index||0,t.priority=n.descriptor.p||0,r.parentNode&&(t.parentNode=r.parentNode),t.type=n.descriptor.t,n.descriptor.r&&(r.indexRefs&&void 0!==r.indexRefs[n.descriptor.r]?(i=r.indexRefs[n.descriptor.r],t.indexRef=n.descriptor.r,t.refIndex=i,t.render(t.refIndex)):(e=Sn(t.root,n.descriptor.r,t.contextStack),e?t.resolve(e):(t.ref=n.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),n.descriptor.x&&(t.expressionResolver=new Fn(t))},A=function(){var t;t=this.root.get(this.keypath,!0),h(t,this.value)||(this.render(t),this.value=t)},N=function(t){this.keypath=t,On(this),this.update(),this.expressionResolver&&(this.expressionResolver=null)},function(){var t,n,e;z=function(i,r){var o;return o={descriptor:i.descriptor.f,root:i.root,parentNode:i.parentNode,owner:i},i.descriptor.n?(e(i,r,!0,o),void 0):(l(r)?t(i,r,o):d(r)?n(i,o):e(i,r,!1,o),void 0)},t=function(t,n,e){var i,r;if(n.length<t.length)for(r=t.fragments.splice(n.length,t.length-n.length);r.length;)r.pop().teardown(!0);else if(n.length>t.length)for(i=t.length;i<n.length;i+=1)e.contextStack=t.contextStack.concat(t.keypath+"."+i),e.index=i,t.descriptor.i&&(e.indexRef=t.descriptor.i),t.fragments[i]=t.createFragment(e);t.length=n.length},n=function(t,n){t.length||(n.contextStack=t.contextStack.concat(t.keypath),n.index=0,t.fragments[0]=t.createFragment(n),t.length=1)},e=function(t,n,e,i){var r,o,a;if(o=l(n)&&0===n.length,r=e?o||!n:n&&!o){if(t.length||(i.contextStack=t.contextStack,i.index=0,t.fragments[0]=t.createFragment(i),t.length=1),t.length>1)for(a=t.fragments.splice(1);a.length;)a.pop().teardown(!0)}else t.length&&(t.teardownFragments(!0),t.length=0)}}(),function(){var t,e,i,r,o,a,s,l,d;e={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},t=function(t,n){var e,i=[];for(e=j.createElement("div"),e.innerHTML=t;e.firstChild;)i[i.length]=e.firstChild,n.appendChild(e.firstChild);return i},w=function(n){return this.docFrag=j.createDocumentFragment(),"string"==typeof n.descriptor?(this.nodes=t(n.descriptor,this.docFrag),void 0):(O(this,n),void 0)},w.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case H:return new s(t,this.docFrag);case U:return new d(t,this.docFrag);case Z:return new l(t,this.docFrag);case J:return new r(t,this.docFrag);case Y:return new o(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(t){var n;if(t&&this.nodes)for(;this.nodes.length;)n=this.nodes.pop(),n.parentNode.removeChild(n);else if(this.items)for(;this.items.length;)this.items.pop().teardown(t)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(t){var n=t.index;return this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?null:this.owner.findNextNode(this)}},o=function(t,n){var e,i=this.parentFragment=t.parentFragment;this.type=Y,this.name=t.descriptor.r,e=$n(i.root,t.descriptor.r),this.fragment=new w({descriptor:e,root:i.root,parentNode:i.parentNode,contextStack:i.contextStack,owner:this}),n.appendChild(this.fragment.docFrag)},o.prototype={findNextNode:function(){return this.parentFragment.findNextNode(this)},teardown:function(t){this.fragment.teardown(t)}},i=function(t,n){this.type=D,this.node=j.createTextNode(t.descriptor),this.parentNode=t.parentFragment.parentNode,n.appendChild(this.node)},i.prototype={teardown:function(t){t&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},r=function(t,n){var e,i,r,o,s,l,d,c,h,u,p,f;if(this.type=J,e=this.parentFragment=t.parentFragment,i=this.descriptor=t.descriptor,this.root=f=e.root,this.parentNode=e.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],i.a&&i.a.xmlns){if(r=i.a.xmlns,"string"!=typeof r)throw new Error("Namespace attribute cannot contain mustaches")
}else r="svg"===i.e.toLowerCase()?yn.svg:this.parentNode.namespaceURI;if(this.node=j.createElementNS(r,i.e),i.f&&("string"==typeof i.f&&this.node.namespaceURI===yn.html?this.node.innerHTML=i.f:(this.fragment=new w({descriptor:i.f,root:f,parentNode:this.node,contextStack:e.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),i.v)for(o in i.v)if(i.v.hasOwnProperty(o))for(s=o.split("-"),l=s.length;l--;)this.addEventProxy(s[l],i.v[o],e.contextStack);this.attributes=[],u=[];for(c in i.a)i.a.hasOwnProperty(c)&&(h=i.a[c],d=new a({element:this,name:c,value:void 0===h?null:h,root:f,parentNode:this.node,contextStack:e.contextStack}),this.attributes[this.attributes.length]=d,d.isBindable&&u.push(d),d.isTwowayNameAttr?p=d:d.update());for(;u.length;)u.pop().bind(this.root.lazy);p&&(p.updateViewModel(),p.update()),n.appendChild(this.node),i.t1&&Bn(i.t1,f,this,e.contextStack,!0)},r.prototype={addEventProxy:function(t,e,i){var r,o,a,s,l,d,c,h=this.root;if(this.node._ractive||g(this.node,"_ractive",{value:{keypath:i.length?i[i.length-1]:"",index:this.parentFragment.indexRefs}}),r="string"==typeof e?e:e.n,c=t+"="+r,e.a?o=e.a:e.d&&(a=!0,o=new b({descriptor:e.d,root:this.root,owner:this,contextStack:i}),this.proxyFrags||(this.proxyFrags=[]),this.proxyFrags[this.proxyFrags.length]=o),void 0!==o){if(this.node._ractive[c])throw new Error("You cannot have two proxy events with the same trigger event ("+c+")");this.node._ractive[c]={dynamic:a,payload:o}}return(s=h.eventDefinitions[t]||n.eventDefinitions[t])?(h._customProxies[c]||(h._customProxies[c]=function(t){var n,e;if(!t.node)throw new Error("Proxy event definitions must fire events with a `node` property");t.keypath=t.node._ractive.keypath,t.context=h.get(t.keypath),t.index=t.node._ractive.index,t.node._ractive[c]&&(n=t.node._ractive[c],e=n.dynamic?n.payload.toJson():n.payload),h.fire(r,t,e)}),d=h._customProxies[c],l=s(this.node,d),this.customEventListeners[this.customEventListeners.length]=l,void 0):(void 0!==this.node["on"+t]&&h.debug&&console&&console.warn&&console.warn("Invalid event handler ("+t+")"),h._proxies[c]||(h._proxies[c]=function(t){var n,e,i={node:this,original:t,keypath:this._ractive.keypath,context:h.get(this._ractive.keypath),index:this._ractive.index};this._ractive&&this._ractive[c]&&(n=this._ractive[c],e=n.dynamic?n.payload.toJson():n.payload),h.fire(r,i,e)}),d=h._proxies[c],this.eventListeners[this.eventListeners.length]={n:t,h:d},this.node.addEventListener(t,d),void 0)},teardown:function(t){var n,e=this;for(e.fragment&&e.fragment.teardown(!1);e.attributes.length;)e.attributes.pop().teardown();for(;e.eventListeners.length;)n=e.eventListeners.pop(),e.node.removeEventListener(n.n,n.h);for(;e.customEventListeners.length;)e.customEventListeners.pop().teardown();if(this.proxyFrags)for(;this.proxyFrags.length;)this.proxyFrags.pop().teardown();this.descriptor.t2&&Bn(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),t&&this.root._transitionManager.nodesToDetach.push(this.node)},firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){}},a=function(t){var n,i,r,o,a,s,l,d,c,h,u;if(n=t.name,i=t.value,r=n.indexOf(":"),-1!==r&&(o=n.substr(0,r),"xmlns"!==o&&(n=n.substring(r+1),this.namespace=yn[o],!this.namespace)))throw'Unknown namespace ("'+o+'")';if(null===i||"string"==typeof i)return this.namespace?t.parentNode.setAttributeNS(this.namespace,n,i):t.parentNode.setAttribute(n,i),"id"===n.toLowerCase()&&(t.root.nodes[i]=t.parentNode),this.name=n,this.value=i,void 0;for(this.root=t.root,this.element=t.element,this.parentNode=t.parentNode,this.name=n,this.lcName=n.toLowerCase(),this.namespace||t.parentNode.namespaceURI!==yn.html||(l=this.lcName,d=e[l]||l,void 0!==t.parentNode[d]&&(this.propertyName=d),("boolean"==typeof t.parentNode[d]||"value"===d)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new b({descriptor:i,root:this.root,owner:this,contextStack:t.contextStack}),this.selfUpdating=!0,c=this.fragment.items.length;c--;)if(h=this.fragment.items[c],h.type!==D){if(h.type!==H){this.selfUpdating=!1;break}if(u){this.selfUpdating=!1;break}u=!0}this.root.twoway&&(a=this.element.descriptor.e.toLowerCase(),s=!("name"!==d&&"value"!==d&&"checked"!==d||"input"!==a&&"textarea"!==a&&"select"!==a)),s&&(this.isBindable=!0,"name"===d&&(this.isTwowayNameAttr=!0)),this.ready=!0},a.prototype={bind:function(t){var n,e,i,r,o=this,a=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==H||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;if(this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===a.tagName&&"value"===this.propertyName)for(n=a.getElementsByTagName("option"),r=n.length,i=0;r>i;i+=1)if(e=n[i],e.hasAttribute("selected")){this.root.set(this.keypath,e.value);break}"checkbox"===a.type||"radio"===a.type?"name"===this.propertyName?(a.name="{{"+this.keypath+"}}",this.updateViewModel=function(){a.checked&&o.root.set(o.keypath,a.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){o.root.set(o.keypath,a.checked)}):this.updateViewModel=function(){var t;t=a.value,"0"===t?t=0:""!==t&&(t=+t||t),o.root.set(o.keypath,t)},this.updateViewModel&&(this.twoway=!0,a.addEventListener("change",this.updateViewModel),a.addEventListener("click",this.updateViewModel),a.addEventListener("blur",this.updateViewModel),t||(a.addEventListener("keyup",this.updateViewModel),a.addEventListener("keydown",this.updateViewModel),a.addEventListener("keypress",this.updateViewModel),a.addEventListener("input",this.updateViewModel)))},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,"name"===this.propertyName&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var t,n;if(!this.ready)return this;if(this.twoway){if(n=this.lcName,t=this.interpolator.value,"name"===n&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=t===this.parentNode.value?!0:!1,this;if(j.activeElement===this.parentNode)return this}if(t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=t,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=this.parentNode),this.parentNode.setAttribute(this.name,t),this.value=t}return this}},s=function(t,n){this.type=H,this.node=j.createTextNode(""),n.appendChild(this.node),_(this,t)},s.prototype={update:A,resolve:N,teardown:function(t){An(this),t&&this.parentNode.removeChild(this.node)},render:function(t){this.node.data=void 0===t?"":t},firstNode:function(){return this.node}},l=function(t,n){this.type=Z,this.nodes=[],this.docFrag=j.createDocumentFragment(),this.initialising=!0,_(this,t),n.appendChild(this.docFrag),this.initialising=!1},l.prototype={update:A,resolve:N,teardown:function(t){if(t)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());An(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(n){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());return void 0===n?(this.nodes=[],void 0):(this.nodes=t(n,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),void 0)}},d=function(t,n){this.type=U,this.fragments=[],this.length=0,this.docFrag=j.createDocumentFragment(),this.initialising=!0,_(this,t),n.appendChild(this.docFrag),this.initialising=!1},d.prototype={update:A,resolve:N,smartUpdate:function(t,n){var e;("push"===t||"unshift"===t||"splice"===t)&&(e={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(e.indexRef=this.descriptor.i)),this[t]&&this[t](e,n)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(t,n){var e,i,r;for(e=this.length,i=e+n.length,r=e;i>r;r+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+r),t.index=r,this.fragments[r]=this.createFragment(t);this.length+=n.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(t,n){this.splice(t,[0,0].concat(new Array(n.length)))},splice:function(t,n){var e,i,r,o,a,s,l,d,h;if(n.length&&(s=+(n[0]<0?this.length+n[0]:n[0]),i=Math.max(0,n.length-2),r=void 0!==n[1]?n[1]:this.length-s,o=i-r)){if(0>o){for(l=s-o,a=s;l>a;a+=1)this.fragments[a].teardown(!0);this.fragments.splice(s,-o)}else{for(l=s+o,e=this.fragments[s]?this.fragments[s].firstNode():this.parentFragment.findNextNode(this),d=[s,0].concat(new Array(o)),this.fragments.splice.apply(this.fragments,d),a=s;l>a;a+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+a),t.index=a,this.fragments[a]=this.createFragment(t);this.parentNode.insertBefore(this.docFrag,e)}this.length+=o,h=s+i,c(this.root,this,h,this.length,o)}},teardown:function(t){this.teardownFragments(t),An(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(;this.fragments.length;)this.fragments.shift().teardown(t)},render:function(t){z(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var n=new w(t);return this.docFrag.appendChild(n.docFrag),n}};var c=function(t,n,e,i,r){var o,a,s,l,d,c,u;for(s=n.descriptor.i,o=e;i>o;o+=1)a=n.fragments[o],l=o-r,d=o,c=n.keypath+"."+(o-r),u=n.keypath+"."+o,a.index+=r,h(a,s,l,d,r,c,u);En(t)},h=function(t,n,e,i,r,o,a){var s,l,d;for(t.indexRefs&&void 0!==t.indexRefs[n]&&(t.indexRefs[n]=i),s=t.contextStack.length;s--;)d=t.contextStack[s],d.substr(0,o.length)===o&&(t.contextStack[s]=d.replace(o,a));for(s=t.items.length;s--;)switch(l=t.items[s],l.type){case J:u(l,n,e,i,r,o,a);break;case Y:h(l.fragment,n,e,i,r,o,a);break;case U:case H:case Z:p(l,n,e,i,r,o,a)}},u=function(t,n,e,i,r,o,a){var s,l;for(s=t.attributes.length;s--;)l=t.attributes[s],l.fragment&&(h(l.fragment,n,e,i,r,o,a),l.twoway&&l.updateBindings());if(t.proxyFrags)for(s=t.proxyFrags.length;s--;)h(t.proxyFrags[s],n,e,i,r,o,a);t.node._ractive&&(t.node._ractive.keypath.substr(0,o.length)===o&&(t.node._ractive.keypath=t.node._ractive.keypath.replace(o,a)),t.node._ractive.index[n]=i),t.fragment&&h(t.fragment,n,e,i,r,o,a)},p=function(t,n,e,i,r,o,a){var s;if(t.descriptor.x&&(t.keypath&&zn(t),t.expressionResolver&&t.expressionResolver.teardown(),t.expressionResolver=new Fn(t)),t.keypath?t.keypath.substr(0,o.length)===o&&(zn(t),t.keypath=t.keypath.replace(o,a),On(t)):t.indexRef===n&&(t.refIndex=i,t.render(i)),t.fragments)for(s=t.fragments.length;s--;)h(t.fragments[s],n,e,i,r,o,a)}}(),function(){var t,n,e,i;b=function(t){O(this,t)},b.prototype={createItem:function(r){if("string"==typeof r.descriptor)return new t(r.descriptor);switch(r.descriptor.t){case H:return new n(r);case Z:return new e(r);case U:return new i(r);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var t,n;for(t=this.items.length,n=0;t>n;n+=1)this.items[n].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===H&&(t=this.items[0].value,void 0!==t)?t:this.toString()},toString:function(){return this.items.join("")},toJson:function(){var t,n;t=this.toString();try{n=JSON.parse(t)}catch(e){n=t}return n}},t=function(t){this.type=D,this.text=t},t.prototype={toString:function(){return this.text},teardown:function(){}},n=function(t){this.type=H,_(this,t)},n.prototype={update:A,resolve:N,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){An(this)},toString:function(){return void 0===this.value?"":this.value}},e=n,i=function(t){this.type=U,this.fragments=[],this.length=0,_(this,t)},i.prototype={update:A,resolve:N,teardown:function(){this.teardownFragments(),An(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){z(this,t),this.parentFragment.bubble()},createFragment:function(t){return new b(t)},toString:function(){return this.fragments.join("")}}}();var Qn=function(t,n){var e;return e={active:0,info:{i:0},push:function(){e.active+=1,e.info.i+=1},pop:function(){e.active-=1,!e.active&&e.ready&&e.complete()},complete:function(){var i,r;for(i=e.nodesToDetach.length;i--;)r=e.nodesToDetach.pop(),r.parentNode.removeChild(r);n&&n.call(t)},nodesToDetach:[]}};a=function(t){var n,e,i,r,o;if(I[t])return I[t].concat();for(i=[],r=t,e=0;r.length;){if(n=r.indexOf(".",e),-1===n)o=r,r="";else{if("\\"===r.charAt(n-1)&&"\\"!==r.charAt(n-2)){e=n+1;continue}o=r.substr(0,n),e=0}/\[/.test(o)?i=i.concat(o.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=o,r=r.substring(n+1)}return I[t]=i,i.concat()},s=Object.prototype.toString,l=function(t){return"[object Array]"===s.call(t)},h=function(t,n){return null===t&&null===n?!0:"object"==typeof t||"object"==typeof n?!1:t===n},c=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},d=function(t){return"[object Object]"===s.call(t)&&"function"!=typeof t},u=function(t){var n;if("undefined"!=typeof window){if(!t)throw new Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(n=j.getElementById(t),!n&&j.querySelector&&(n=j.querySelector(t)),n.tagName))return n;if(t[0]&&t[0].tagName)return t[0];throw new Error("Could not find container element")}},M=function(t){var n,e,i,r;for(n=0;n<t.length;n+=1)e=t[n],i=t[n-1],r=t[n+1],(e.mustacheType===X||e.mustacheType===K)&&(t.splice(n,1),i&&r&&i.type===D&&r.type===D&&(i.value+=r.value,t.splice(n,1)),n-=1);return t},L=function(t){var n,e,i;for(i="";t.length;){if(n=t.indexOf("<!--"),e=t.indexOf("-->"),-1===n&&-1===e){i+=t;break}if(-1!==n&&-1===e)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==e&&-1===n||n>e)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=t.substr(0,n),t=t.substring(e+3)}return i},T=function(t){var n,e,i,r,o,a;for(o=/^\s*\r?\n/,a=/\r?\n\s*$/,n=2;n<t.length;n+=1)e=t[n],i=t[n-1],r=t[n-2],e.type===D&&i.type===tn&&r.type===D&&a.test(r.value)&&o.test(e.value)&&(i.mustacheType!==H&&i.mustacheType!==Z&&(r.value=r.value.replace(a,"\n")),e.value=e.value.replace(o,""),""===e.value&&t.splice(n--,1));return t};var Rn;!function(){var t,n,e,i,r,o,a,s,l,c,h,u;Rn=function(t,n,e,i){var o,a;return o={pos:0,tokens:t||[],next:function(){return o.tokens[o.pos]},options:e},a=new r(o,n,i)},t=function(t,r,o){return t.next()?n(t,o)||e(t,r,o)||i(t,r,o):null},n=function(t,n){var e=t.next();return e.type===D?(t.pos+=1,new o(e,n)):null},e=function(t,n,e){var i=t.next();return i.type===tn||i.type===Z?i.mustacheType===U||i.mustacheType===W?new s(i,t,n,e):new a(i,t,n):null},i=function(t,n,e){var i,r=t.next();return r.type===nn?(i=new l(r,t,n,e),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(i.lcTag)?null:i):null},h=function(t){var n,e,i,r="";if(!t)return"";for(e=0,i=t.length;i>e;e+=1){if(n=t[e].toString(),n===!1)return!1;r+=n}return r},u=function(t,n){var e,i;return n||(e=h(t),e===!1)?i=t.map(function(t){return t.toJson(n)}):e},r=function(n,e,i){var r,o;for(r=this.items=[],o=t(n,e,i);null!==o;)r[r.length]=o,o=t(n,e,i)},r.prototype={toJson:function(t){var n=u(this.items,t);return n},toString:function(){var t=h(this.items);return t}},function(){var t,n,e;o=function(t,n){this.type=D,this.text=n?t.value:t.value.replace(e," ")},o.prototype={toJson:function(){return this.decoded||(this.decoded=n(this.text))},toString:function(){return this.text}},t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},n=function(n){var e;return e=n.replace(/&([a-zA-Z]+);/,function(n,e){return t[e]?String.fromCharCode(t[e]):n}),e=e.replace(/&#x([0-9]+);/,function(t,n){return String.fromCharCode(parseInt(n,16))}),e=e.replace(/&#([0-9]+);/,function(t,n){return String.fromCharCode(n)})},e=/\s+/g}(),function(){a=function(t,n,e){this.type=t.type===Z?Z:t.mustacheType,t.ref&&(this.ref=t.ref),t.expression&&(this.expr=new c(t.expression)),this.priority=e,n.pos+=1},a.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.x=this.expr.toJson()),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}},s=function(n,e,i,r){var o;for(this.ref=n.ref,this.indexRef=n.indexRef,this.priority=i||0,this.inverted=n.mustacheType===W,n.expression&&(this.expr=new c(n.expression)),e.pos+=1,this.items=[],o=e.next();o;){if(o.mustacheType===G){if(o.ref===this.ref||o.expr&&this.expr){e.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=t(e,this.priority+1,r),o=e.next()}},s.prototype={toJson:function(t){var n;return this.json?this.json:(n={t:U},this.ref&&(n.r=this.ref),this.indexRef&&(n.i=this.indexRef),this.inverted&&(n.n=!0),this.expr&&(n.x=this.expr.toJson()),this.items.length&&(n.f=u(this.items,t)),this.priority&&(n.p=this.priority),this.json=n,n)},toString:function(){return!1}}}(),function(){var n,e,i,r,o,a,s,d,c,p,f,g,m,v;l=function(e,i,r,a){var l,d,h,u,f,g,v;if(this.lcTag=e.name.toLowerCase(),this.priority=r=r||0,this.tag=o[this.lcTag]?o[this.lcTag]:this.lcTag,i.pos+=1,a=a||"pre"===this.lcTag,e.attrs&&(h=m(e.attrs),d=h.attrs,u=h.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(d=d.filter(p)),f=function(t){var n=t.name.toLowerCase();return{name:s[n]?s[n]:n,value:Rn(t.value,r+1)}},g=function(t){var n,e,i,o;if(o=function(){throw new Error("Illegal proxy event")},t.name&&t.value||o(),n={domEventName:t.name},e=t.value,e[0].type!==D&&o(),i=e[0].value.indexOf(":"),-1===i)e.length>1&&o(),n.name=e[0].value;else{if(n.name=e[0].value.substr(0,i),e[0].value=e[0].value.substring(i+1),e[0].value||e.shift(),1===e.length&&e[0].type===D)try{n.args=JSON.parse(e[0].value)}catch(a){n.args=e[0].value}n.dynamicArgs=Rn(e,r+1)}return n},d.length&&(this.attributes=d.map(f)),u.length&&(this.proxies=u.map(g)),h.intro&&(this.intro=g(h.intro)),h.outro&&(this.outro=g(h.outro))),e.selfClosing&&(this.selfClosing=!0),-1!==n.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=c[this.lcTag],this.items=[],l=i.next();l&&l.mustacheType!==G;){if(l.type===nn){if(l.closing){l.name.toLowerCase()===this.lcTag&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(l.name.toLowerCase()))break}this.items[this.items.length]=t(i,this.priority+1),l=i.next()}a||(v=this.items[0],v&&v.type===D&&(v.text=v.text.replace(P,""),v.text||this.items.shift()),v=this.items[this.items.length-1],v&&v.type===D&&(v.text=v.text.replace(q,""),v.text||this.items.pop()))}},l.prototype={toJson:function(t){var n,e,i,r,o,a;if(n={t:J,e:this.tag},this.attributes&&this.attributes.length)for(n.a={},a=this.attributes.length,o=0;a>o;o+=1){if(e=this.attributes[o].name,n.a[e])throw new Error("You cannot have multiple elements with the same name");void 0===this.attributes[o].value&&(i=null),i=u(this.attributes[o].value.items,t),n.a[e]=i}if(this.items&&this.items.length&&(n.f=u(this.items,t)),this.proxies&&this.proxies.length)for(n.v={},a=this.proxies.length,o=0;a>o;o+=1)r=this.proxies[o],n.v[r.domEventName]=r.args?{n:r.name,a:r.args}:r.dynamicArgs?{n:r.name,d:u(r.dynamicArgs.items,t)}:r.name;return this.intro&&(n.t1=this.intro.args?{n:this.intro.name,a:this.intro.args}:this.intro.dynamicArgs?{n:this.intro.name,d:u(this.intro.dynamicArgs.items,t)}:this.intro.name),this.outro&&(n.t2=this.outro.args?{n:this.outro.name,a:this.outro.args}:this.outro.dynamicArgs?{n:this.outro.name,d:u(this.outro.dynamicArgs.items,t)}:this.outro.name),this.json=n,n},toString:function(){var t,i,r,o,a,s,l,d;if(void 0!==this.str)return this.str;if(-1===e.indexOf(this.tag.toLowerCase()))return this.str=!1;if(l=h(this.items),l===!1)return this.str=!1;if(this.proxies||this.intro||this.outro)return this.str=!1;if(d=-1!==n.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(i=0,r=this.attributes.length;r>i;i+=1){if(a=this.attributes[i].name.toLowerCase(),-1!==a.indexOf(":"))return this.str=!1;if("id"===a||"intro"===a||"outro"===a)return this.str=!1;if(o=" "+this.attributes[i].name,void 0!==this.attributes[i].value){if(s=this.attributes[i].value.toString(),s===!1)return this.str=!1;""!==s&&(o+="=",o+=/[\s"'=<>`]/.test(s)?'"'+s.replace(/"/g,"&quot;")+'"':s)}t+=o}return this.selfClosing&&!d?(t+="/>",this.str=t):(t+=">",d?this.str=t:(t+=l,t+="</"+this.tag+">",this.str=t))}},n="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),e="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),d="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),r="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),a="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),i=function(t){for(var n={},e=t.length;e--;)n[t[e].toLowerCase()]=t[e];return n},o=i(r),s=i(a),c={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},p=function(t){return"on"!==t.name.substr(0,2)},f=function(t){return"proxy-"!==t.name.substr(0,6)},g=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1},m=function(t){var n,e,i,r,o,a;for(i={},n=[],e=[],o=t.length,r=0;o>r;r+=1)if(a=t[r],"intro"===a.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=a}else if("outro"===a.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=a}else"proxy-"===a.name.substr(0,6)?(a.name=a.name.substring(6),e[e.length]=a):n[n.length]=a;return i.attrs=n,i.proxies=e,i},v=/^([a-zA-Z_$][a-zA-Z_$0-9]*)(?::(.+))?$/}(),function(){var t,n;c=function(e){this.refs=[],t(e,this.refs),this.str=n(e,this.refs)},c.prototype={toJson:function(){return{r:this.refs,s:this.str}}},t=function(n,e){var i;if(n.t===dn&&-1===e.indexOf(n.n)&&e.unshift(n.n),n.o)if(d(n.o))t(n.o,e);else for(i=n.o.length;i--;)t(n.o[i],e);n.x&&t(n.x,e),n.r&&t(n.r,e)},n=function(t,e){var i=function(t){return n(t,e)};switch(t.t){case sn:case ln:case en:return t.v;case rn:return"'"+t.v.replace(/'/g,"\\'")+"'";case on:return"["+t.m.map(i).join(",")+"]";case un:return("typeof"===t.s?"typeof ":t.s)+n(t.o,e);case gn:return n(t.o[0],e)+t.s+n(t.o[1],e);case mn:return n(t.x,e)+"("+(t.o?t.o.map(i).join(","):"")+")";case pn:return"("+n(t.x,e)+")";case hn:return n(t.x,e)+n(t.r,e);case cn:return t.n?"."+t.n:"["+n(t.x,e)+"]";case fn:return n(t.o[0],e)+"?"+n(t.o[1],e)+":"+n(t.o[2],e);case dn:return"❖"+e.indexOf(t.n);default:throw new Error("Could not stringify expression token. This error is unexpected")}}}()}();var In;!function(){var t,n,e,i,r,o,a,s,l,d,c,h,u,p,f,g,m,v,y,w,b,x,k;In=function(t){var n=i(t)||r(t)||o(t)||a(t);return n},k=function(t,n){var e=t.remaining().substr(0,40);throw 40===e.length&&(e+="..."),new Error('Tokenizer failed: unexpected string "'+e+'" (expected '+n+")")},t=function(t,n){var e;return e=t.str.substr(t.pos,n.length),e===n?(t.pos+=n.length,n):null},n=function(t){return function(n){var e=t.exec(n.str.substring(n.pos));return e?(n.pos+=e[0].length,e[1]||e[0]):null}},e=function(t){var n=P.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[0]):null},l=n(/^[^\s=]+/),d=function(n){var i,r,o;return t(n,"=")?(i=n.pos,e(n),(r=l(n))?(e(n),(o=l(n))?(e(n),t(n,"=")?[r,o]:(n.pos=i,null)):(n.pos=i,null)):(n.pos=i,null)):null},c=n(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),h=function(n){var e,i,r,o,a;if(e=n.pos,o=t(n,".")||"",a=c(n)||"",o&&!a)return o;if(i=o+a,!i)return null;for(r=u(n);null!==r;)i+=r,r=u(n);return i},u=function(t){return p(t)||f(t)},p=n(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),f=function(t){var n=g(t);return n?"."+n:null},g=n(/^\[(0|[1-9][0-9]*)\]/),m=function(t){var n,e,i,r,o;if(n=t.pos,e="",i=b(t),i&&(e+=i),r=v(t),r&&(e+=r),e)for(o=m(t);o;)e+=o,o=m(t);return e},v=n(/^[^\\']+/),y=function(t){var n,e,i,r,o;if(n=t.pos,e="",i=b(t),i&&(e+=i),r=w(t),r&&(e+=r),!e)return"";for(o=y(t);""!==o;)e+=o;return e},w=n(/^[^\\"]+/),b=function(t){var n,e="";for(n=x(t);n;)e+=n,n=x(t);return e||null},x=function(n){var e;return t(n,"\\")?(e=n.str.charAt(n.pos),n.pos+=1,e):null},function(){var o,a,l,c;i=function(n){var i,r=n.pos;return t(n,n.delimiters[0])?(i=d(n))?t(n,n.delimiters[1])?(n.delimiters=i,{type:tn,mustacheType:K}):(n.pos=r,null):(i=o(n),null===i?(n.pos=r,null):(e(n),t(n,n.delimiters[1])||k(n,'"'+n.delimiters[1]+'"'),i)):null},r=function(n){var i,r=n.pos;return t(n,n.tripleDelimiters[0])?(i=d(n))?t(n,n.delimiters[1])?(n.tripleDelimiters=i,{type:K}):(n.pos=r,null):(e(n),i=o(n,!0),null===i?(n.pos=r,null):(e(n),t(n,n.tripleDelimiters[1])?i:(n.pos=r,null))):null},o=function(n,i){var r,o,d,c,u,p,f;if(r=n.pos,o={type:i?Z:tn},!i&&(d=a(n),o.mustacheType=d||H,d===X&&(p=n.remaining(),f=p.indexOf(n.delimiters[1]),-1!==f)))return n.pos+=f,o;if(e(n),t(n,"("))e(n),c=s(n),e(n),t(n,")")||k(n,'")"'),o.expression=c;else if(o.ref=h(n),!o.ref)return n.pos=r,null;return u=l(n),null!==u&&(o.indexRef=u),o},c={"#":U,"^":W,"/":G,">":Y,"!":X,"&":H},a=function(t){var n=c[t.str.charAt(t.pos)];return n?(t.pos+=1,n):null},l=n(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){var r,a,s,l,d,c,h,u,p,f,g,v,w,b;o=function(t){return r(t)||a(t)},r=function(n){var e,i,r;return e=n.pos,t(n,"<")?(i={type:nn},i.name=s(n),i.name?(r=l(n),r&&(i.attrs=r),t(n,"/")&&(i.selfClosing=!0),t(n,">")?i:(n.pos=e,null)):(n.pos=e,null)):null},a=function(n){var e,i;if(e=n.pos,!t(n,"<"))return null;if(i={type:nn,closing:!0},!t(n,"/"))throw new Error("Unexpected character "+n.remaining().charAt(0)+' (expected "/")');if(i.name=s(n),!i.name)throw new Error("Unexpected character "+n.remaining().charAt(0)+" (expected tag name)");if(!t(n,">"))throw new Error("Unexpected character "+n.remaining().charAt(0)+' (expected ">")');return i},s=n(/^[a-zA-Z][a-zA-Z0-9]*/),l=function(t){var n,i,r;if(n=t.pos,e(t),r=d(t),!r)return t.pos=n,null;for(i=[];null!==r;)i[i.length]=r,e(t),r=d(t);return i},d=function(t){var n,e,i;return(e=c(t))?(n={name:e},i=h(t),i&&(n.value=i),n):null},c=n(/^[^\s"'>\/=]+/),h=function(n){var i,r;
return i=n.pos,e(n),t(n,"=")?(r=g(n)||w(n)||u(n),null===r?(n.pos=i,null):r):(n.pos=i,null)},f=n(/^[^\s"'=<>`]+/),p=function(t){var n,e,i;return n=t.pos,(e=f(t))?(-1!==(i=e.indexOf(t.delimiters[0]))&&(e=e.substr(0,i),t.pos=n+e.length),{type:D,value:e}):null},u=function(t){var n,e;for(n=[],e=i(t)||p(t);null!==e;)n[n.length]=e,e=i(t)||p(t);return n.length?n:null},v=function(t){var n,e,i;return n=t.pos,(e=m(t))?(-1!==(i=e.indexOf(t.delimiters[0]))&&(e=e.substr(0,i),t.pos=n+e.length),{type:D,value:e}):null},g=function(n){var e,r,o;if(e=n.pos,!t(n,"'"))return null;for(r=[],o=i(n)||v(n);null!==o;)r[r.length]=o,o=i(n)||v(n);return t(n,"'")?r:(n.pos=e,null)},b=function(t){var n,e,i;return n=t.pos,(e=y(t))?(-1!==(i=e.indexOf(t.delimiters[0]))&&(e=e.substr(0,i),t.pos=n+e.length),{type:D,value:e}):null},w=function(n){var e,r,o;if(e=n.pos,!t(n,'"'))return null;for(r=[],o=i(n)||b(n);null!==o;)r[r.length]=o,o=i(n)||b(n);return t(n,'"')?r:(n.pos=e,null)}}(),function(){a=function(t){var n,e;return n=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(e){var i=t.str.indexOf(e,t.pos);-1!==i&&(n=Math.min(i,n))}),n===t.pos?null:(e=t.str.substring(t.pos,n),t.pos=n,{type:D,value:e})}}(),function(){var i,r,o,a,l,d,h,u,p,f,g,v,w,b,x,_,A,N,O,z,C,S,E,M,L,T,j;s=function(t){var n,e;return n=t.pos,e=f(t)},i=function(n){var r,o,a,l;if(r=n.pos,e(n),a=s(n),null===a)return null;if(o=[a],e(n),t(n,",")){if(l=i(n),null===l)return n.pos=r,null;o=o.concat(l)}return o},a=function(n){var i,r;return i=n.pos,t(n,"(")?(e(n),(r=s(n))?(e(n),t(n,")")?{t:pn,x:r}:(n.pos=i,null)):(n.pos=i,null)):null},l=function(t){return A(t)||x(t)||a(t)},d=function(t){var n,e,i;if(n=l(t),!n)return null;if(e=_(t),!e)return n;for(;null!==e;)i={t:hn,x:n,r:e},n=i,e=_(t);return i},h=function(n){var r,o,a,s;return(o=d(n))?(r=n.pos,t(n,"(")?(e(n),a=i(n),e(n),t(n,")")?(s={t:mn,x:o},a&&(s.o=a),s):(n.pos=r,o)):o):null},r=function(n,i){return function(r){var o,a;return t(r,n)?(o=r.pos,e(r),a=s(r),a||k(r,"an expression"),{s:n,o:a,t:un}):i(r)}},function(){var t,n,e,i,o;for(i="! ~ + - typeof".split(" "),o=h,t=0,n=i.length;n>t;t+=1)e=r(i[t],o),o=e;u=o}(),o=function(n,i){return function(r){var o,a,l;return(a=i(r))?(o=r.pos,e(r),t(r,n)?(e(r),l=s(r),l?{t:gn,s:n,o:[a,l]}:(r.pos=o,a)):(r.pos=o,a)):null}},function(){var t,n,e,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=u,t=0,n=i.length;n>t;t+=1)e=o(i[t],r),r=e;p=r}(),f=function(n){var i,r,o,a;return(r=p(n))?(i=n.pos,e(n),t(n,"?")?(e(n),(o=s(n))?(e(n),t(n,":")?(e(n),a=s(n),a?{t:fn,o:[r,o,a]}:(n.pos=i,r)):(n.pos=i,r)):(n.pos=i,r)):(n.pos=i,r)):null},g=n(/^[0-9]+/),v=n(/^[eE][\-+]?[0-9]+/),w=n(/^\.[0-9]+/),b=n(/^(0|[1-9][0-9]*)/),x=function(n){var e,i,r;return i=t(n,".")||"",e=c(n)||"",r=i+e,r?{t:dn,n:r}:null},_=function(n){var i,r,o;if(i=n.pos,e(n),t(n,".")){if(e(n),r=c(n))return{t:cn,n:r};k("a property name")}return t(n,"[")?(e(n),o=s(n),o||k("an expression"),e(n),t(n,"]")||k('"]"'),{t:cn,x:o}):null},A=function(t){var n=z(t)||O(t)||E(t)||C(t)||S(t)||N(t);return n},N=function(n){var i,r;return i=n.pos,e(n),t(n,"[")?(r=expressionList(n),t(n,"]")?{t:on,o:r}:(n.pos=i,null)):(n.pos=i,null)},O=function(t){var n=t.remaining();return"true"===n.substr(0,4)?(t.pos+=4,{t:sn,v:"true"}):"false"===n.substr(0,5)?(t.pos+=5,{t:sn,v:"false"}):null},j=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,E=function(t){var n,e,i;return n=t.pos,(e=c(t))?(i=j.exec(e))?(t.pos=n+i[0].length,{t:ln,v:i[0]}):(t.pos=n,null):null},z=function(t){var n,e;return n=t.pos,(e=w(t))?{t:en,v:e}:(e=b(t),null===e?null:(e+=w(t)||"",e+=v(t)||"",{t:en,v:e}))},S=function(n){var i,r;return i=n.pos,e(n),t(n,"{")?(r=M(n),e(n),t(n,"}")?{t:an,m:r}:(n.pos=i,null)):(n.pos=i,null)},M=function(n){var e,i,r,o;return e=n.pos,r=L(n),null===r?null:(i=[r],t(n,",")?(o=M(n),o?i.concat(o):(n.pos=e,null)):i)},L=function(n){var i,r,o;return i=n.pos,e(n),r=T(n),null===r?(n.pos=i,null):(e(n),t(n,":")?(e(n),o=s(n),null===o?(n.pos=i,null):{t:KEY_VALUE_PAIR,k:r,v:o}):(n.pos=i,null))},T=function(t){return c(t)||C(t)||z(t)},C=function(n){var e,i;return e=n.pos,t(n,'"')?(i=y(n),t(n,'"')?{t:rn,v:i}:(n.pos=e,null)):t(n,"'")?(i=m(n),t(n,"'")?{t:rn,v:i}:(n.pos=e,null)):null}}()}();var Pn;!function(){var t,n,e,i;t=/^\s*$/,n=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,e=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,Pn=function(e,r){var o,a,s,l;return r=r||{},n.test(e)?i(e,r):(r.sanitize===!0&&(r.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),o=qn(e,r),r.preserveWhitespace||(l=o[0],l&&l.type===D&&t.test(l.value)&&o.shift(),l=o[o.length-1],l&&l.type===D&&t.test(l.value)&&o.pop()),a=Rn(o,0,r,r.preserveWhitespace),s=a.toJson(),"string"==typeof s?[s]:s)},i=function(t,i){var r,o,a,s,l,d;for(a={},r="",o=t;l=n.exec(o);){if(s=l[1],r+=o.substr(0,l.index),o=o.substring(l.index+l[0].length),d=e.exec(o),!d||d[1]!==s)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");a[s]=Pn(o.substr(0,d.index),i),o=o.substring(d.index+d[0].length)}return{template:Pn(r,i),partials:a}}}();var qn=function(t,n){var e,i,r,o,a;for(n=n||{},e={str:L(t),pos:0,delimiters:n.delimiters||["{{","}}"],tripleDelimiters:n.tripleDelimiters||["{{{","}}}"],remaining:function(){return e.str.substring(e.pos)}},i=[];e.pos<e.str.length;){if(r=In(e),null===r&&e.remaining())throw o=e.str.substr(0,e.pos).substr(-20),20===o.length&&(o="..."+o),a=e.remaining().substr(0,20),20===a.length&&(a+="..."),new Error("Could not parse template: "+(o?o+"<- ":"")+"failed at character "+e.pos+" ->"+a);i[i.length]=r}return T(i),M(i),i};n.prototype=F,n.adaptors=$,n.eventDefinitions=B,n.partials={},n.easing=e,n.extend=i,n.interpolate=r,n.interpolators=o,n.parse=Pn,n.transitions=Q,"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define("Ractive",[],function(){return n}):t.Ractive=n}(this),define("controllers/Slide",["Ractive"],function(Ractive){var Slide=function(data,el){var stages,fn,i;if(this.html=data.slide,this.css=data.styles,this.data=data.data,stages=data.stages,this.el=el,void 0!==stages)if(isNaN(+stages))try{fn=eval("("+stages+")"),this.stages=fn(this),this.numStages=this.stages.length}catch(err){console.error(err.message||err)}else this.numStages=stages;else this.numStages=0;if(this.stages)for(i=this.numStages;i--;)"function"==typeof this.stages[i]&&(this.stages[i]=this.stages[i](this))};return Slide.prototype={enter:function(t){var n,e;if(document.getElementById("SlideStyle").innerHTML=this.css||"",this.ractive=new Ractive({el:this.el,template:this.html,data:this.data}),t){if(this.stages)for(e=this.stages.length,n=0;e>n;n+=1)this.stages[n]&&this.stages[n].redo?this.stages[n].redo(this.ractive,this):this.stages[n]&&this.stages[n].do&&this.stages[n].do(this.ractive,this);this.ractive.set("stage",this.numStages-1),this.currentStage=this.numStages-1}else this.stages&&this.stages[0]&&this.stages[0].do(this.ractive,this),this.ractive.set("stage",0),this.currentStage=0},exit:function(){var t=this;return new Promise(function(n){console.log("tearing down"),t.ractive.teardown(function(){console.log("teardown complete"),n.resolve()})})},next:function(){return this.currentStage<this.numStages-1?(this.currentStage+=1,this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].do(this.ractive,this),this.ractive.set("stage",this.currentStage),!0):!1},prev:function(){return this.currentStage>0?(this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].undo(this.ractive,this),this.currentStage-=1,this.ractive.set("stage",this.currentStage),!0):!1}},Slide}),define("controllers/controller",["./router","./Slide"],function(t,n){var e,i,r,o,a,s;return i=37,r=38,o=39,a=40,s=function(t){for(var n=t.length;n--;)console.log('preloading "%s"',t[n]),(new Image).src=t[n]},e=function(t,e,i,r){var o,a;a=e[i],a&&(o=new n(a,t.el),o.enter(r),t.currentSlide=o,a.images&&s(a.images)),e[i+1]&&e[i+1].images&&s(e[i+1].images)},function(n){var s,l,d,c;s=n.data.slides,n.state.observe("slideNum",function(t,i){var r=1===i-t;n.currentSlide?n.currentSlide.exit().then(function(){e(n,s,t,r)}):e(n,s,t,r)}),c=function(){var t=n.state.get("slideNum");s[t+1]&&n.state.add("slideNum")},d=function(){var t=n.state.get("slideNum");s[t-1]&&n.state.subtract("slideNum")},l=function(t){t.which===a||t.which===o?(t.preventDefault(),n.currentSlide.next()||c()):(t.which===r||t.which===i)&&(t.preventDefault(),n.currentSlide.prev()||d())},window.addEventListener("keydown",l),t(n)}}),define("app",["domReady","Statesman","data","controllers/controller"],function(t,n,e,i){var r;return r={data:e,state:new n},t(function(){r.el=document.getElementById("container"),/chrome/i.test(navigator.userAgent)?i(r):r.el.innerHTML="<p class='browser-warning'>This presentation requires browser features that only currently exist in <a href='http://google.com/chrome'>Chrome</a>. Sorry.</p>"}),window.app=r,r}),function(){require.config({baseUrl:"js",paths:{Ractive:"lib/Ractive",Statesman:"lib/Statesman"},urlArgs:"bust="+Date.now()}),require(["app"])}(),define("main",function(){})}();