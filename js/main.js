/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! Statesman - v0.2.0 - 2013-07-04
* The JavaScript state management library

* 
* Copyright (c) 2013 Rich Harris; MIT Licensed */

/*! Ractive - v0.3.0 - 2013-07-06
* Faster, easier, better interactive web development

* http://rich-harris.github.com/Ractive/
* Copyright (c) 2013 Rich Harris; Licensed MIT */

// These are a subset of the easing equations found at
// https://raw.github.com/danro/easing-js - license info
// follows:

// --------------------------------------------------
// easing.js v0.5.4
// Generic set of easing functions with AMD support
// https://github.com/danro/easing-js
// This code may be freely distributed under the MIT license
// http://danro.mit-license.org/
// --------------------------------------------------
// All functions adapted from Thomas Fuchs & Jeremy Kahn
// Easing Equations (c) 2003 Robert Penner, BSD license
// https://raw.github.com/danro/easing-js/master/LICENSE
// --------------------------------------------------

!function(){var requirejs,require,define;!function(n){function t(n,t){return v.call(n,t)}function e(n,t){var e,i,r,a,o,s,l,d,c,h,u=t&&t.split("/"),p=g.map,f=p&&p["*"]||{};if(n&&"."===n.charAt(0))if(t){for(u=u.slice(0,u.length-1),n=u.concat(n.split("/")),d=0;d<n.length;d+=1)if(h=n[d],"."===h)n.splice(d,1),d-=1;else if(".."===h){if(1===d&&(".."===n[2]||".."===n[0]))break;d>0&&(n.splice(d-1,2),d-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((u||f)&&p){for(e=n.split("/"),d=e.length;d>0;d-=1){if(i=e.slice(0,d).join("/"),u)for(c=u.length;c>0;c-=1)if(r=p[u.slice(0,c).join("/")],r&&(r=r[i])){a=r,o=d;break}if(a)break;!s&&f&&f[i]&&(s=f[i],l=d)}!a&&s&&(a=s,o=l),a&&(e.splice(0,o,a),n=e.join("/"))}return n}function i(t,e){return function(){return c.apply(n,y.call(arguments,0).concat([t,e]))}}function r(n){return function(t){return e(t,n)}}function a(n){return function(t){p[n]=t}}function o(e){if(t(f,e)){var i=f[e];delete f[e],m[e]=!0,d.apply(n,i)}if(!t(p,e)&&!t(m,e))throw new Error("No "+e);return p[e]}function s(n){var t,e=n?n.indexOf("!"):-1;return e>-1&&(t=n.substring(0,e),n=n.substring(e+1,n.length)),[t,n]}function l(n){return function(){return g&&g.config&&g.config[n]||{}}}var d,c,h,u,p={},f={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(n,t){var i,a=s(n),l=a[0];return n=a[1],l&&(l=e(l,t),i=o(l)),l?n=i&&i.normalize?i.normalize(n,r(t)):e(n,t):(n=e(n,t),a=s(n),l=a[0],n=a[1],l&&(i=o(l))),{f:l?l+"!"+n:n,n:n,pr:l,p:i}},u={require:function(n){return i(n)},exports:function(n){var t=p[n];return"undefined"!=typeof t?t:p[n]={}},module:function(n){return{id:n,uri:"",exports:p[n],config:l(n)}}},d=function(e,r,s,l){var d,c,g,v,y,b,w=[];if(l=l||e,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],l),c=v.f,"require"===c)w[y]=u.require(e);else if("exports"===c)w[y]=u.exports(e),b=!0;else if("module"===c)d=w[y]=u.module(e);else if(t(p,c)||t(f,c)||t(m,c))w[y]=o(c);else{if(!v.p)throw new Error(e+" missing "+c);v.p.load(v.n,i(l,!0),a(c),{}),w[y]=p[c]}g=s.apply(p[e],w),e&&(d&&d.exports!==n&&d.exports!==p[e]?p[e]=d.exports:g===n&&b||(p[e]=g))}else e&&(p[e]=s)},requirejs=require=c=function(t,e,i,r,a){return"string"==typeof t?u[t]?u[t](e):o(h(t,e).f):(t.splice||(g=t,e.splice?(t=e,e=i,i=null):t=n),e=e||function(){},"function"==typeof i&&(i=r,r=a),r?d(n,t,e,i):setTimeout(function(){d(n,t,e,i)},4),c)},c.config=function(n){return g=n,g.deps&&c(g.deps,g.callback),c},define=function(n,e,i){e.splice||(i=e,e=[]),t(p,n)||t(f,n)||(f[n]=[n,e,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("domReady",[],function(){function n(n){var t;for(t=0;t<n.length;t+=1)n[t](d)}function t(){var t=c;l&&t.length&&(c=[],n(t))}function e(){l||(l=!0,o&&clearInterval(o),t())}function i(n){return l?n(d):c.push(n),i}var r,a,o,s="undefined"!=typeof window&&window.document,l=!s,d=s?document:null,c=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(window.attachEvent){window.attachEvent("onload",e),a=document.createElement("div");try{r=null===window.frameElement}catch(h){}a.doScroll&&r&&window.external&&(o=setInterval(function(){try{a.doScroll(),e()}catch(n){}},30))}"complete"===document.readyState&&e()}return i.version="2.0.1",i.load=function(n,t,e,r){r.isBuild?e(null):i(e)},i}),function(n){var t,e,i,r,a,o,s,l,d,c,h,u,p,f,g,m,v,y,b,w,x={},k={},_={};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),b=Object.defineProperty,w=Object.defineProperties}catch(A){b=function(n,t,e){n[t]=e.value},w=function(n,t){var e;for(e in t)t.hasOwnProperty(e)&&b(n,e,t[e])}}!function(){var n=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(e,i,r){var a,o,s,l;return r=r||"",a=[],o=e.replace(n,function(n,t){return-1===a.indexOf(t)&&(a[a.length]=r+t),'m.get("'+t+'")'}),s=new Function("utils","var m=this;try{return "+o+"}catch(e){return undefined}"),l=s.bind?s.bind(i,t.utils):function(){return s.call(i,t.utils)},{getter:l,triggers:a}}}(),t=function(n){w(this,{data:{value:n||{},writable:!0},subs:{value:{},writable:!0},cache:{value:{}},cacheMap:{value:{}},deps:{value:{}},depsMap:{value:{}},refs:{value:{}},refsMap:{value:{}},computed:{value:{}},subsets:{value:{}},deferred:{value:[]},changes:{value:null,writable:!0},upstreamChanges:{value:null,writable:!0},changeHash:{value:null,writable:!0}})},x.add=function(n,t){var e=this.get(n);void 0===t&&(t=1),s(e)&&s(t)&&this.set(n,+e+(void 0===t?1:+t))},function(n){var t,e,i,a;n.compute=function(n,e){var i,r,a;if("object"==typeof n){i={};for(r in n)n.hasOwnProperty(r)&&(a=new t(this,r,n[r]),i[r]=a.value);return i}return a=new t(this,n,e),a.value},t=function(n,t,a){var o;if(n.computed[t]&&n.computed[t].teardown(),this.statesman=n,this.keypath=t,n.computed[t]=this,"string"==typeof a?a=r(a,n):("function"==typeof a&&(a=a()),i(t,a,n.debug)),this.signature=a,this.cache=a.cache,this.refs=[],o=a.dependsOn.length,this.cache)for(1===o&&(this.selfUpdating=!0);o--;)this.refs[o]=new e(this,a.dependsOn[o]);this.setting=!0,n.set(this.keypath,this.value=this.getter()),this.setting=!1},t.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.statesman.deferred.push(this),this.deferred=!0)},update:function(){var n;return n=this.getter(),o(n,this.value)||(this.setting=!0,c(this.statesman,this.keypath,n),this.setting=!1,this.value=n),this},getter:function(){var n,t,e;try{if(this.signature.compiled)e=this.signature.compiled();else if(t=[],this.cache){for(n=this.refs.length;n--;)t[n]=this.refs[n].value;e=this.signature.get.apply(this.context,t)}else{for(n=this.signature.dependsOn.length;n--;)t[n]=this.statesman.get(this.signature.dependsOn[n]);e=this.signature.get.apply(this.context,t)}}catch(i){if(this.statesman.debug)throw i;e=void 0}return this.override=!1,e},setter:function(n){if(this.signature.set)try{this.signature.set.call(this.context,n)}catch(t){if(this.statesman.debug)throw t}else if(this.signature.readonly){if(this.statesman.debug)throw new Error('You cannot overwrite a computed value ("'+this.keypath+'"), unless its readonly flag is set true')}else this.override=!0,this.setting=!0,this.statesman.set(this.keypath,n),this.setting=!1},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown(),this.statesman.computed[this.keypath]=null}},e=function(n,t){this.computed=n,this.statesman=n.statesman,this.keypath=t,this.value=this.statesman.get(t),v(this,!0)},e.prototype={update:function(){var n;n=this.statesman.get(this.keypath),o(n,this.value)||(this.value=n,this.computed.bubble())},teardown:function(){y(this,!0)}},a=[],i=function(n,t,e){if(!t.compiled){if(!t.get&&!t.set)throw new Error("Computed values must have either a get() or a set() method, or both");if(t.set||t.readonly===!1||(t.readonly=!0),t.dependsOn?"string"==typeof t.dependsOn&&(t.dependsOn=[t.dependsOn]):t.dependsOn=a,!t.dependsOn.length){if(t.cache&&e)throw new Error("Computed values with no dependencies must be uncached");t.cache=!1}t.cache!==!1&&(t.cache=!0)}if(-1!==t.dependsOn.indexOf(n))throw new Error('A computed value ("'+n+'") cannot depend on itself');return t}}(x),x.get=function(n){return h(this,n&&l(n))};var h=function(n,t,e,i){var r,a,o,s,l;return t?((r=n.computed[t])&&(i||r.cache||r.override||(n.cache[t]=r.getter())),n.cache.hasOwnProperty(t)?n.cache[t]:(e=e||t.split("."),a=e.pop(),o=e.join("."),s=h(n,o,e),"object"==typeof s&&s.hasOwnProperty(a)&&(l=s[a],n.cache[t]=l,n.cacheMap[o]||(n.cacheMap[o]=[]),n.cacheMap[o].push(t)),l)):n.data};!function(n){var t;n.observe=function(n,e,i){var r,a,o,s,l;if(l=!i||i.init!==!1,"function"==typeof n&&(i=e,e=n,n=""),"string"==typeof n)return r=new t(this,n,e,i),l?r.update():r.value=this.get(n),{cancel:function(){r.teardown()}};if("object"!=typeof n)throw new Error("Bad arguments to Statesman.prototype.observe()");i=e,a=[];for(o in n)n.hasOwnProperty(o)&&(a[a.length]=new t(this,o,n[o],i));if(s=a.length,l)for(;s--;)a[s].update();else for(;s--;)a[s].value=this.get(r.keypath);return{cancel:function(){for(s=a.length;s--;)a[s].teardown()}}},t=function(n,t,e,i){this.statesman=n,this.keypath=l(t),this.callback=e,this.context=i&&i.context?i.context:n,v(this)},t.prototype={update:function(){var n;if(n=h(this.statesman,this.keypath),!o(n,this.value)){try{this.callback.call(this.context,n,this.value)}catch(t){if(this.statesman.debug)throw t}this.value=n}},teardown:function(){y(this)}}}(x),x.removeComputedValue=function(n){return this.computed[n]&&this.computed[n].teardown(),this},x.reset=function(n){return this.data={},this.set(n,{silent:!0}),this.fire("reset"),p(this,""),this},function(n){var t,e,i=/^\s*[0-9]+\s*$/;n.set=function(n,t,i){var r,a,o,s;if(this.changes=[],this.upstreamChanges=[],this.changeHash={},"object"==typeof n){i=t;for(o in n)n.hasOwnProperty(o)&&(s=l(o),t=n[o],c(this,s,t))}else s=l(n),c(this,s,t);for(r=[],a=[];this.changes.length;)e(r,this.changes),e(a,this.upstreamChanges),g(this);return i&&i.silent?this:(f(this,a,!0),r.length&&f(this,r),r.length&&this.fire("change",this.changeHash),this)},c=function(n,e,i){var r,a,o;if((o=n.computed[e])&&!o.setting)return o.setter(i),void 0;if(r=h(n,e,null,!0),r!==i)t(n.data,e,i);else if("object"!=typeof i)return;for(u(n,e),n.changes[n.changes.length]=e,n.changeHash[e]=i,a=e.split(".");a.length&&(a.pop(),e=a.join("."),!n.upstreamChanges[e]);)n.upstreamChanges[e]=!0,n.upstreamChanges.push(e)},t=function(n,t,e){for(var r,a=t.split(".");a.length>1;)r=a.shift(),n[r]||(n[r]=i.test(a[0])?[]:{}),n=n[r];n[a[0]]=e},e=function(n,t){for(var e,i=t.length;i--;)e=t[i],n["_"+e]||(n["_"+e]=!0,n[n.length]=e)}}(x),x.subset=function(n){if(!n)throw"No subset path specified";return this.subsets[n]||(this.subsets[n]=new e(n,this)),this.subsets[n]},x.subtract=function(n,t){var e=this.get(n);void 0===t&&(t=1),s(e)&&s(t)&&this.set(n,+e-(void 0===t?1:+t))},x.toggle=function(n){this.set(n,!this.get(n))},u=function(n,t){var e=n.cacheMap[t];if(delete n.cache[t],e)for(;e.length;)u(n,e.pop())},s=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},p=function(n,t,e){var i,r,a;if(i=n.deps[t])for(r=i.length;r--;)i[r].update();if(!e&&(a=n.depsMap[t]))for(r=a.length;r--;)p(n,a[r])},f=function(n,t,e){var i;for(i=t.length;i--;)p(n,t[i],e)},g=function(n){var t,e,i,r,a;for(e=n.changes,i=n.upstreamChanges,n.changes=[],n.upstreamChanges=[],t=i.length;t--;)r=i[t],m(n,r,!0);for(t=e.length;t--;)r=e[t],m(n,r);for(;n.deferred.length;)a=n.deferred.pop(),a.update(),a.deferred=!1},m=function(n,t,e){var i,r,a;if(i=n.refs[t])for(a=i.length;a--;)i[a].update();if(!e&&(r=n.refsMap[t]))for(a=r.length;a--;)m(n,r[a])},v=function(n,t){var e,i,r,a,o,s,l,d;for(e=n.statesman,i=n.keypath,t?(l=e.refs,d=e.refsMap):(l=e.deps,d=e.depsMap),r=l[i]||(l[i]=[]),r[r.length]=n,a=i.split(".");a.length;)a.pop(),o=a.join("."),s=d[o]||(d[o]=[]),void 0===s[i]&&(s[i]=0,s[s.length]=i),s[i]+=1,i=o},y=function(n,t){var e,i,r,a,o,s,l,d;for(e=n.statesman,i=n.keypath,t?(l=e.refs,d=e.refsMap):(l=e.deps,d=e.depsMap),r=l[i],r.splice(r.indexOf(n),1),a=i.split(".");a.length;)a.pop(),o=a.join("."),s=d[o],s[i]-=1,s[i]||(s.splice(s.indexOf(i),1),s[i]=void 0),i=o},a={total:function(n){return n.reduce(function(n,t){return n+t})}},e=function(n,t){var e,i,r=this;this.path=n,this.pathDot=n+".",this.root=t,this.subs={},e=new RegExp("^"+this.pathDot.replace(".","\\.")),i=this.pathDot.length,this.root.on("change",function(n){var t,a,o,s;o={};for(a in n)n.hasOwnProperty(a)&&e.test(a)&&(t=a.substring(i),o[t]=n[a],s=!0);s&&r.fire("change",o)})},k.add=function(n,t){this.root.add(this.pathDot+n,t)},function(n){var t;n.compute=function(n,e){var i,r;if("object"==typeof n){i={};for(r in n)n.hasOwnProperty(r)&&(i[r]=t(this,r,n));return i}return t(this,n,e)},t=function(n,t,e){var i,a=n.pathDot;if("string"==typeof e)return e=r(e,n.root,a),n.root.compute(a+t,e);if("function"==typeof e&&(e=e()),e.dependsOn)for("string"==typeof e.dependsOn&&(e.dependsOn=[e.dependsOn]),i=e.dependsOn.length;i--;)e.dependsOn=a+e.dependsOn;return e.context||(e.context=n),n.root.compute(a+t,e)}}(k),k.get=function(n){return n?this.root.get(this.pathDot+n):this.root.get(this.path)},k.observe=function(n,t,e){var i,r;if("object"==typeof n){e=t,r={};for(i in n)n.hasOwnProperty(i)&&(r[this.pathDot+i]=n[i]);return e?e.context=e.context||this:e={context:this},this.root.observe(r,e)}return"function"==typeof n?(e=t,t=n,n=this.path):n=""===n?this.path:this.pathDot+n,e?e.context=e.context||this:e={context:this},this.root.observe(n,t,e)},k.removeComputedValue=function(n){return this.root.removeComputedValue(this.pathDot+n),this},k.reset=function(n){return this.root.set(this.path,n),this},k.set=function(n,t,e){var i,r;if("object"==typeof n){e=t,r={};for(i in n)n.hasOwnProperty(i)&&(r[this.pathDot+i]=n[i]);return this.root.set(r,e),this}return this.root.set(this.pathDot+n,t,e),this},k.subset=function(n){return this.root.subset(this.pathDot+n)},k.subtract=function(n,t){this.root.subtract(this.pathDot+n,t)},k.toggle=function(n){this.root.toggle(this.pathDot+n)},i={},i.on=function(n,t){var e,i,r,a=this;if("object"==typeof n){r=[];for(i in n)n.hasOwnProperty(i)&&(r[r.length]=this.on(i,n[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[n]||(this.subs[n]=[]),e=this.subs[n],e[e.length]=t,{cancel:function(){a.off(n,t)}}},i.once=function(n,t){var e,i,r,a,o=this;if("object"==typeof n){r=[];for(i in n)n.hasOwnProperty(i)&&(r[r.length]=this.once(i,n[i]));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}return this.subs[n]||(this.subs[n]=[]),e=this.subs[n],a=function(){t.apply(o,arguments),o.off(n,a)},e[e.length]=a,{cancel:function(){o.off(n,a)}}},i.off=function(n,t){var e,i;return n?t?(e=this.subs[n],e&&(i=e.indexOf(t),-1!==i&&e.splice(i,1),e.length||delete this.subs[n]),this):(delete this.subs[n],this):(this.subs={},this)},i.fire=function(n){var t,e,i,r;if(t=this.subs[n],!t)return this;for(i=t.length,e=Array.prototype.slice.call(arguments,1),r=0;i>r;r+=1)t[r].apply(this,e)},function(){var n=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;r=function(e,i,r){var a,o,s,l;return r=r||"",o=[],a=e.replace(n,function(n,t){return-1===o.indexOf(t)&&(o[o.length]=r+t),'m.get("'+r+t+'")'}),s=new Function("utils","var m=this;return "+a),l=s.bind?s.bind(i,t.utils):function(){return s.call(i,t.utils)},{compiled:l,dependsOn:o,cache:!!o.length}}}(),o=function(n,t){return null===n&&null===t?!0:"object"==typeof n||"object"==typeof t?!1:n===t},l=function(n){return _[n]||(_[n]=n.replace(/\[\s*([0-9]+)\s*\]/g,".$1"))},d=function(n,t){var e;for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},d(x,i),d(k,i),t.prototype=x,e.prototype=k,t.utils=a,"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("Statesman",[],function(){return t}):n.Statesman=t}(this),define("data",[],function(){return{slides:[{styles:"h1 {\n	font-size: 3em;\n	margin: 0;\n	padding: 0 0 0.1em 0;\n	border-bottom: 1px solid #eee;\n}\n\n.Hero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 50%;\n	padding: 0.5em 5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.SubHero {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	top: 50%;\n	padding: 0.5em 0.5em 0.5em 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",slide:"<div class='Hero' intro='fade'>\n	<h1>Engineering Delight</h1>\n</div>\n\n<div class='SubHero' intro='fade'>\n	<p><a href='http://twitter.com/rich_harris'>@rich_harris</a>, interactive developer</p>\n	<p>july 6 2013</p>\n</div>"},{styles:".background {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background: url(files/images/team.jpg) no-repeat 50% 50%;\n	background-size: cover;\n\n	-webkit-animation: alternate 60s infinite grow ease-in-out;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 0;\n	padding: 1em 2em;\n\n	color: white;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.caption h2, .caption p {\n	display: inline-block;\n	padding: 0.5em;\n	margin: 0;\n	float: left;\n}\n\n.caption h2 {\n	background-color: rgba(0,0,0,0.7);\n}\n\n.caption p {\n	clear: both;\n	background-color: rgba(0,0,0,0.7);\n}\n\n@-webkit-keyframes grow {\n	from {\n		-webkit-transform: scale(1);\n	}\n\n	to {\n		-webkit-transform: scale(1.2);\n	}\n}",slide:"<div class='background' intro='fade' outro='fade'></div>\n\n<div class='caption' intro='fade' outro='fade'>\n	<h2>The interactive team</h2>\n	<p>A small group of developers and designers producing <em>interactive journalism</em>.</p>\n</div>",images:["files/images/team.jpg"]},{styles:"iframe {\n	width: 200%;\n	height: 200%;\n	overflow: hidden;\n	border: 1px solid #eee;\n	box-shadow: 1px 1px 3px rgba(0,0,0,0.6);\n\n	-webkit-transform: translate(-50%,-50%) scale(0.5) translate(50%,50%);\n	-moz-transform: translate(-50%,-50%) scale(0.5) translate(50%,50%);\n	-ms-transform: translate(-50%,-50%) scale(0.5) translate(50%,50%);\n	-o-transform: translate(-50%,-50%) scale(0.5) translate(50%,50%);\n	transform: translate(-50%,-50%) scale(0.5) translate(50%,50%);\n}\n\n.iframe-container {\n	position: relative;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	padding-top: 2em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.iframe-container.invisible {\n	height: 0;\n	padding: 0;\n}\n\n.iframe-container-header {\n	position: absolute;\n	width: 100%;\n	height: 2em;\n	top: 0;\n	left: 0;\n\n	padding-top: 0.5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What is interactive journalism?</h1>\n</div>\n\n<div class='content'>\n\n	\n	<div class='iframe-container {{( stage === 1 ? \"visible\" : \"invisible\" )}}'>\n		<div class='iframe-container-header'>\n			<a href='http://www.bbc.co.uk/news/uk-22732218'>BBC: The last Dornier bomber</a>\n		</div>\n		<iframe src='http://www.bbc.co.uk/news/uk-22732218'></iframe>\n	</div>\n\n	<div class='iframe-container {{( stage === 2 ? \"visible\" : \"invisible\" )}}'>\n		<div class='iframe-container-header'>\n			<a href='http://www.newyorker.com/sandbox/news/marriage.html'>The New Yorker: Same-sex marriage</a>\n		</div>\n		<iframe src='http://www.newyorker.com/sandbox/news/marriage.html'></iframe>\n	</div>\n\n	<div class='iframe-container {{( stage === 3 ? \"visible\" : \"invisible\" )}}'>\n		<div class='iframe-container-header'>\n			<a href='http://interactive.guim.co.uk/2013/may/dunalley/'>The Guardian: Firestorm</a>\n		</div>\n		<iframe src='http://interactive.guim.co.uk/2013/may/dunalley/'></iframe>\n	</div>\n</div>"},{styles:".svg {\n	width: 100%;\n	height: 100%;\n}\n\ntext {\n	text-anchor: middle;\n	alignment-baseline: middle;\n	font-size: 3em;\n	fill: white;\n}",stages:"function () {\n\n	return [\n\n		// stage 1\n		null,\n\n		// stage 2\n		null,\n\n		null,\n\n		// stage 3\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					}, { easing: 'easeOut' });\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						'dataviz.cx': 600,\n						'interactives.cx': 1000\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						'dataviz.cx': 390,\n						'interactives.cx': 1210\n					}, { easing: 'easeOut' });\n				}\n			};\n		},\n\n		null\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>What does this have to with data visualisation?</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 1600 900'>\n		\n		<!-- data visualisation -->\n		{{#( stage >= 1 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{dataviz.cx}}' cy='450' r='400' fill='rgba(0,128,0,0.5)'/>\n			<text x='390' y='450'>dataviz</text>\n		</g>\n		{{/()}}\n		\n		<!-- interactives -->\n		{{#( stage >= 2 )}}\n		<g intro='fade' outro='fade'>\n			<circle cx='{{interactives.cx}}' cy='450' r='400' fill='rgba(201,83,0,0.5)'/>\n			<text x='1210' y='450'>interactives</text>\n		</g>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<g intro='fade' outro='fade'>\n			<text x='800' y='420'>interactive</text>\n			<text x='800' y='480'>dataviz</text>\n		</g>\n		{{/()}}\n	</svg>\n\n	{{#( stage >= 4 )}}\n	<div class='quote-container' intro='fade' outro='fade'>\n		<blockquote>\n			<figure style='width: 8em;'>\n				<img src='http://datadrivenjournalism.net/uploads/MurrayAlan_hedcut_newb.JPG' style='width: 8em; height: 10em;'>\n				<figcaption>Image: Wall Street Journal</figcaption>\n			</figure>\n\n			<div intro='typewriter'>\n				<p>We see in our work that a well-designed interactive work can have <strong>ten times the effect</strong> of a well-written report.</p>\n				<p>We want to use this in our efforts to inform the public and different decision-making processes</p>\n\n				<p class='author'><a href='http://datadrivenjournalism.net/news_and_analysis/Introducing_Fact_Tank_An_Interview_with_Pew_Research_Centers_Alan_Murray'>datadrivenjournalism.net</a> &ndash; Alan Murray, president, Pew Research Center</p>\n			</div>\n		</blockquote>\n	</div>\n	{{/()}}\n</div>",images:["http://datadrivenjournalism.net/uploads/MurrayAlan_hedcut_newb.JPG"],data:{dataviz:{cx:390},interactives:{cx:1210}}},{slide:"<div class='part-title' intro='fade' outro='fade'>\n	<div class='left'>\n		<h1>part one :</h1>\n		<span>&nbsp;</span>\n		<span>&nbsp;</span>\n	</div>\n\n	<div class='right'>\n		<span class='current'>DELIGHT</span>\n		<span>CASE STUDY</span>\n		<span>ENGINEERING</span>\n	</div>\n</div>"},{styles:"h3 {\n	text-align: center;\n	margin-top: 0;\n}\n\n.column-withheader {\n	padding-top: 2.5em;\n}\n\n.top-half {\n	padding: 0 6em;\n}",stages:5,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The nature of delight</h1>\n</div>\n\n<div class='content' outro='fade'>\n	{{#( stage === 1 )}}\n		<div class='centred' intro='fade' outro='fade' style='width: 40%;'>\n			<blockquote intro='typewriter'>\n				<p>all our pleasurable emotions and delightful sensations are to be referred, for their primary origin, to the perception of life</p>\n\n				<p class='author'>\n					<cite><a href='http://openlibrary.org/books/OL25408214M/A_treatise_on_the_leading_causes_of_pleasure_and_delight_in_the_human_mind'>A treatise on the leading causes of pleasure and delight in the human mind</a></cite>\n					&ndash; Watkins 1841\n				</p>\n			</blockquote>\n		</div>\n	</div>\n	{{/()}}\n\n	{{#( stage >= 2 )}}\n	<div class='centred' style='width: 100%; height: 80%; padding: 0 2em 2em 2em;'>\n		<div class='columns-outer'>\n			<div class='columns-inner'>\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>beauty</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/venus.jpg);'></div>\n				</div>\n\n				{{#( stage >= 3 )}}\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>understanding</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/archimedes.jpg);'></div>\n				</div>\n				{{/()}}\n\n				{{#( stage >= 4 )}}\n				<div intro='fade' class='column3 column-withheader'>\n					<div class='column3-header'>\n						<h3>aliveness</h3>\n					</div>\n					<div class='image' style='background-image: url(files/images/asimo.jpg);'></div>\n				</div>\n				{{/()}}\n			</div>\n		</div>\n	</div>\n	{{/()}}\n\n</div>",images:["files/images/venus.jpg","files/images/archimedes.jpg","files/images/asimo.jpg"]},{styles:".image-container {\n	float: right;\n	text-align: right;\n	padding-right: 2em;\n}\n\nimg {\n	width: 18em;\n	margin: 0 0 1em 1em;\n	display: block;\n}\n\n.background-image {\n	-webkit-animation: alternate 60s infinite grow ease-in-out;\n}\n\n@-webkit-keyframes grow {\n	from {\n		-webkit-transform: scale(1);\n	}\n\n	to {\n		-webkit-transform: scale(1.4);\n	}\n}\n\n.content p, .content ul {\n	font-size: 1.8em;\n}",stages:5,slide:"{{#( stage >= 4 )}}\n	<div class='background-image' style='background-image:url(files/images/hunting.jpg);' intro='fade' outro='fade'></div>\n	<div class='credit'>\n		<a href='http://www.freemages.co.uk/browse/photo-964-cave-painting-warriors.html'>Image: Jean-Pierre Malavialle</a>\n	</div>\n{{/()}}\n\n{{#( stage < 4 )}}\n<div class='header' intro='fade' outro='fade'>\n	<h1>The effect of emotion on learning</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<p><strong>Emotion</strong> enhances our ability to <strong>absorb and retain information</strong>.</p>\n	\n	{{#( stage >= 1 )}}\n	<ul>\n		<li intro='fade'>the more engaged we are, the easier it becomes to filter out distractions</li>\n\n		{{#( stage >= 2 )}}\n		<li intro='fade'>different physiological mechanisms come into play</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n		<li intro='fade'>we continue to think about enjoyable experiences after they've finished</li>\n		{{/()}}\n	</ul>\n	{{/()}}\n\n\n</div>\n{{/()}}",images:["files/images/homer.jpg"]},{slide:"<div class='interstitial' intro='fade' outro='fade'>\n	<div class='image' style='background-image:url(files/images/venus.jpg);'></div>\n	<h1>Beauty</h1>\n</div>"},{styles:".image {\n	position: absolute;\n}\n\n.small-copy {\n	font-size: 1.2em;\n}\n\n.centred {\n	width: 100%;\n	padding: 0 0 0 2em;\n	box-sizing: border-box;\n}",stages:4,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Information is beautiful</h1>\n</div>\n\n<!-- TODO - add some examples (the billion-dollar-o-gram?) -->\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='columns-outer'>\n		<div class='columns-inner'>\n			{{#( stage >= 1 )}}\n			<div class='column2' intro='fly' outro='fade'>\n				{{#( stage === 1 )}}\n					<div class='image contain' outro='fade' style='background-image: url(files/images/information-is-beautiful.jpg);'></div>\n				{{/()}}\n\n				{{#( stage >= 2 )}}\n					<div class='image contain' intro='fade' style='background-image: url(http://mccandless1.s3.amazonaws.com/info_700_2.jpg);'></div>\n				{{/()}}\n			</div>\n			{{/()}}\n\n			{{#( stage >= 3 )}}\n			<div class='column2' intro='fade'>\n				<div class='centred'>\n					<blockquote intro='typewriter'>\n						<img src='https://si0.twimg.com/profile_images/83855034/me_avatar2.jpg' style='float: right; margin: 0 0 1em 1em; width: 90px; height: 107px; border: 1px solid #ddd;'>\n\n						<p class='small-copy'>I usually do some hand-drawn sketches. Then I move onto screen work, creating images by hand in Adobe Illustrator CS4. It’s an amazingly powerful drawing package.</p>\n\n						<p class='small-copy'>Data visualization wise, it can output a few basic graphs, but otherwise, it doesn’t render data. That means, yes, I have to hand position every data point on every single image I create. And, yup, I am that anal.</p>\n\n						<p class='author'>\n							<cite><a href='http://www.los-list.com/blog/bookworm-david-mccandless/'>Lo's List interview</a></cite>\n							&ndash; David McCandless\n						</p>\n					</blockquote>\n				</div>\n			</div>\n			{{/()}}\n		</div>\n	</div>\n</div>",images:["files/images/information-is-beautiful.jpg","https://si0.twimg.com/profile_images/83855034/me_avatar2.jpg"]},{styles:"svg {\n	width: 100%;\n	height: 100%;\n\n	-webkit-transition: -webkit-filter 0.4s;\n}\n\n.axis {\n	fill: none;\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\ntext {\n	text-anchor: middle;\n}\n\n.label {\n	font-size: 0.8em;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.grid-line {\n	stroke: #ddd;\n	stroke-width: 2;\n}\n\n.grid-label {\n	alignment-baseline: middle;\n	color: #ddd;\n	text-anchor: end;\n}\n\n.direct-label {\n	fill: rgb(125,162,0);\n}\n\n.in-bar {\n	fill: white;\n	text-anchor: end;\n	alignment-baseline: middle;\n}\n\n.out-bar {\n	text-anchor: start;\n	alignment-baseline: middle;\n}\n\n.quote-container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	background-color: rgba(255,255,255,0.8);\n	padding: 0;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.quote_1 {\n	position: absolute;\n	top: 20%;\n	left: 20%;\n	width: 40em;\n	max-width: 50%;\n}\n\n.quote_2 {\n	position: absolute;\n	bottom: 20%;\n	right: 20%;\n	width: 40em;\n	max-width: 50%;\n	z-index: 2;\n}\n\n.source, .title {\n	text-anchor: start;\n}\n\n.title {\n	font-size: 2em;\n}\n\na {\n	fill: rgb(0,74,131);\n}\n\n.blurred {\n	/*-webkit-filter: blur(1px);*/\n}\n\n.centred {\n	width: 60%;\n}",stages:'function () {\n\n	var ufos = [\n		{ state_id: "IA", count: 491,  state_name: "Iowa" },\n		{ state_id: "WI", count: 909,  state_name: "Wisconsin" },\n		{ state_id: "WA", count: 3348, state_name: "Washington" },\n		{ state_id: "MO", count: 1203, state_name: "Missouri" },\n		{ state_id: "ND", count: 114,  state_name: "North Dakota" },\n		{ state_id: "NV", count: 714,  state_name: "Nevada" },\n		{ state_id: "IL", count: 2064, state_name: "Illinois" },\n		{ state_id: "MA", count: 909,  state_name: "Massachusetts" },\n		{ state_id: "GA", count: 989,  state_name: "Georgia" },\n		{ state_id: "FL", count: 2839, state_name: "Florida" },\n		{ state_id: "VA", count: 919,  state_name: "Virginia" },\n		{ state_id: "NY", count: 2413, state_name: "New York" },\n		{ state_id: "MT", count: 348,  state_name: "Montana" },\n		{ state_id: "ME", count: 412,  state_name: "Maine" },\n		{ state_id: "CA", count: 7595, state_name: "California" },\n		{ state_id: "NJ", count: 1128, state_name: "New Jersey" },\n		{ state_id: "OR", count: 1413, state_name: "Oregon" },\n		{ state_id: "CT", count: 614,  state_name: "Connecticut" },\n		{ state_id: "AZ", count: 2098, state_name: "Arizona" },\n		{ state_id: "AK", count: 234,  state_name: "Alaska" },\n		{ state_id: "MI", count: 1554, state_name: "Michigan" },\n		{ state_id: "ID", count: 362,  state_name: "Idaho" },\n		{ state_id: "TN", count: 875,  state_name: "Tennessee" },\n		{ state_id: "AL", count: 498,  state_name: "Alabama" },\n		{ state_id: "OH", count: 1684, state_name: "Ohio" },\n		{ state_id: "IN", count: 1052, state_name: "Indiana" },\n		{ state_id: "SD", count: 142,  state_name: "South Dakota" },\n		{ state_id: "KS", count: 507,  state_name: "Kansas" },\n		{ state_id: "NH", count: 353,  state_name: "New Hampshire" },\n		{ state_id: "TX", count: 3012, state_name: "Texas" },\n		{ state_id: "NC", count: 1220, state_name: "North Carolina" },\n		{ state_id: "SC", count: 586,  state_name: "South Carolina" },\n		{ state_id: "PA", count: 1800, state_name: "Pennsylvania" },\n		{ state_id: "LA", count: 455,  state_name: "Louisiana" },\n		{ state_id: "RI", count: 197,  state_name: "Rhode Island" },\n		{ state_id: "UT", count: 475,  state_name: "Utah" },\n		{ state_id: "CO", count: 1169, state_name: "Colorado" },\n		{ state_id: "KY", count: 687,  state_name: "Kentucky" },\n		{ state_id: "VT", count: 172,  state_name: "Vermont" },\n		{ state_id: "HI", count: 240,  state_name: "Hawaii" },\n		{ state_id: "NM", count: 637,  state_name: "New Mexico" },\n		{ state_id: "AR", count: 530,  state_name: "Arkansas" },\n		{ state_id: "MN", count: 753,  state_name: "Minnesota" },\n		{ state_id: "WV", count: 345,  state_name: "West Virginia" },\n		{ state_id: "MS", count: 321,  state_name: "Mississippi" },\n		{ state_id: "OK", count: 557,  state_name: "Oklahoma" },\n		{ state_id: "WY", count: 167,  state_name: "Wyoming" },\n		{ state_id: "MD", count: 611,  state_name: "Maryland" },\n		{ state_id: "NE", count: 324,  state_name: "Nebraska" },\n		{ state_id: "DE", count: 126,  state_name: "Delaware" },\n		{ state_id: "DC", count: 93,   state_name: "District of Columbia" }\n	];\n\n	ufos.forEach( function ( record, i ) {\n		record.pos = record.i = i;\n	})\n\n	ufos.sort( function ( a, b ) {\n		return b.count - a.count;\n	});\n\n	var sorted = ufos.map( function ( record, i ) {\n		var newRecord = {\n			state_name: record.state_name,\n			state_id: record.state_id,\n			count: record.count,\n			i: record.i,\n			pos: i\n		};\n\n		return newRecord;\n	});\n\n	var linearScale = function ( domain, range ) {\n		var d0 = domain[0], r0 = range[0], multiplier = ( range[1] - r0 ) / ( domain[1] - d0 );\n\n		return function ( num ) {\n			return r0 + ( multiplier * ( num - d0 ) );\n		};\n	};\n\n	var getGridLines = function ( num, min, max ) {\n		var array = [], i, scale = linearScale([ 0, num - 1 ], [ min, max ]);\n\n		i = num;\n		while ( i-- ) {\n			array[i] = scale( i );\n		}\n\n		return array;\n	};\n\n	var width, height, marginX, marginY, x1, x2, y1, y2, minCount, maxCount, xScale, yScale, gridLines;\n\n	width = 1600;\n	height = 800;\n	marginX = [ 70,  0 ];\n	marginY = [ 30, 50 ];\n\n	x1 = marginX[0];\n	x2 = width - marginX[1];\n	y1 = marginY[0];\n	y2 = height - marginY[1];\n\n	minCount = 93;\n	maxCount = 7595;\n\n	xScale = linearScale([ 0, ufos.length ], [ x1, x2 ]);\n	yScale = linearScale([ minCount, maxCount ], [ y1, y2 ]);\n\n	gridLines = getGridLines( 9, minCount, maxCount );\n\n	return [\n\n		// stage 0 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						x1: x1,\n						x2: x2,\n						y1: y1,\n						y2: y2,\n						width: width,\n						height: height,\n						xScale: xScale,\n						yScale: yScale,\n						minValue: minCount,\n						maxValue: maxCount,\n						ufos: ufos,\n						gridLines: gridLines,\n						barMargin: 0,\n						threshold: 8000,\n\n						r: 0,\n						g: 0,\n						b: 0,\n\n						badLabels: true\n					});\n				}\n			}\n		},\n\n		// stage 1 - fix labels\n		null,\n\n		// stage 2 - sane grid lines and minimum/maximum\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						minValue: 0,\n						maxValue: 8000,\n						gridLines: getGridLines( 9, 0, 8000 )\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						minValue: minCount,\n						maxValue: maxCount,\n						gridLines: gridLines\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				}\n			}\n		},\n\n		// stage 3 - sort data\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						ufos: sorted\n					}, {\n						duration: 1000,\n						easing: \'easeOut\'\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'ufos\', sorted );\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						ufos: ufos\n					}, {\n						duration: 400,\n						easing: \'easeOut\'\n					});\n				}\n			};\n		},\n\n		// stage 4 - add bar margins\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0.1 );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'barMargin\', 0.1 );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'barMargin\', 0 );\n				}\n			}\n		},\n\n		// stage 5 - make it green\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						r: 125,\n						g: 162,\n						b: 0\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.animate({\n						r: 0,\n						g: 0,\n						b: 0\n					});\n				}\n			}\n		},\n\n		// stage 6 - replace grid lines with bar labels\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( \'maxValue\', maxCount );\n				},\n				redo: function ( ractive ) {\n					ractive.set( \'maxValue\', maxCount );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( \'maxValue\', 8000 );\n				}\n			}\n		},\n\n		// stage 7 - rotate labels, place inside bars\n		null,\n\n		// stage 8 - place some labels outside bars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( \'threshold\', 5000 );\n				},\n				undo: function ( ractive ) {\n					ractive.set( \'threshold\', 8000 );\n				}\n			}\n		},\n\n		// stage 9 - doctor who quote\n		null,\n\n		// stage 10 - not einstein\n		null\n	];\n}',slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Computers do not have good aesthetic judgment</h1>\n</div>\n\n<div class='content'>\n	<svg viewBox='0 0 {{width}} {{height}}' class='{{( stage >= 9 ? \"blurred\" : \"\" )}}'>\n		<line class='axis' x1='{{x1}}' y1='{{y2}}' x2='{{x2}}' y2='{{y2}}'/>\n\n		<text class='title' x='{{( x1 + 150 )}}' y='{{( y1 + 20 )}}'>UFO sightings by state, 1995-2010</text>\n		<text class='source' x='{{( x1 + 150 )}}' y='{{( y1 + 50 )}}'>Source: <a xlink:href='http://www.infochimps.com/datasets/60000-documented-ufo-sightings-with-text-descriptions-and-metada'>infochimps.com</a></text>\n		\n\n		<!-- grid lines - only up to stage 6 -->\n		{{#( stage <= 5 )}}\n			<g class='grid-lines' intro='fade' outro='fade'>\n				{{#gridLines}}\n					<g transform='translate(0,{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( . - minValue ) ) ) )}})'>\n						<line class='grid-line' x1='{{x1}}' x2='{{x2}}' y1='0' y2='0'/>\n						<text class='grid-label' x='{{( x1 - 10 )}}'>{{( Math.round(.) )}}</text>\n					</g>\n				{{/gridLines}}\n			</g>\n		{{/()}}\n\n		<g class='points'>\n			{{#ufos}}\n				<rect\n					class='point'\n					x='{{( xScale( pos + barMargin ) )}}'\n					y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) )}}'\n					width='{{( ( 1 - 2 * barMargin ) * width / ufos.length )}}'\n					height='{{( ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) )}}'\n					fill='rgb({{( Math.round( r ) )}},{{( Math.round( g ) )}},{{( Math.round( b ) )}})'\n				/>\n			{{/ufos}}\n		</g>\n\n		<!-- stage 0 - state name labels -->\n		{{#( stage === 0 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos}}\n					<text x='{{( xScale( pos + 0.5 ) )}}'>{{state_name}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 1+ - state name labels -->\n		{{#( stage >= 1 )}}\n			<g intro='fade' outro='fade' transform='translate(0,{{( y2 + 30 )}})'>\n				{{#ufos:i}}\n					<text class='label' x='{{( xScale( pos + 0.5 ) )}}'>{{state_id}}</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n\n		<!-- stage 6 - direct labelling -->\n		{{#( stage === 6 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					<text\n						class='direct-label'\n						x='{{( xScale( pos + 0.5 ) )}}'\n						y='{{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 10 )}}'\n					>\n						{{count}}\n					</text>\n				{{/ufos}}\n			</g>\n		{{/()}}\n\n		<!-- stage 6 - direct labelling inside bar -->\n		{{#( stage >= 7 )}}\n			<g class='direct-labels' intro='fade' outro='fade'>\n				{{#ufos}}\n					{{#( count > threshold )}}\n						<text\n							class='direct-label in-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) + 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n\n					{{#( count <= threshold )}}\n						<text\n							class='direct-label out-bar'\n							transform='translate({{( xScale( pos + 0.55 ) )}}, {{( y1 + y2 - ( y1 + ( ( (y2 - y1) / ( maxValue - minValue ) ) * ( count - minValue ) ) ) - 5 )}}) rotate(270)'\n						>\n							{{count}}\n						</text>\n					{{/()}}\n				{{/ufos}}\n			</g>\n\n			<rect x='0' y='-100' width='200' height='100' fill='white' stroke='none'/>\n		{{/()}}\n\n\n	\n	</svg>\n\n	{{#( stage >= 9 )}}\n		<div class='quote-container' intro='fade'>\n			{{#( stage === 9 )}}\n				<div class='centred'>\n					<blockquote intro='fade' outro='fade'>\n						<figure style='width: 8em;'>\n							<img src='http://www.bbc.co.uk/doctorwho/classic/gallery/fourthdoctor/images/340/23.jpg' style='width: 8em; height: 6em;'>\n							<figcaption>Image: BBC</figcaption>\n						</figure>\n\n						<p intro='typewriter'>The trouble with computers, of course, is that they're very sophisticated idiots. They do exactly what you tell them at amazing speed. Even if you order them to kill you.</p>\n\n						<p class='author'>\n							<cite><a href='http://en.wikiquote.org/wiki/Fourth_Doctor'>Doctor Who</a></cite>\n							, 1975\n						</p>\n					</blockquote>\n				</div>\n			{{/()}}\n\n			{{#( stage === 10 )}}\n				<div class='centred'>\n					<blockquote intro='fade' outro='fade'>\n						<p intro='typewriter'>Computers are incredibly fast, accurate and stupid; humans are incredibly slow, inaccurate and brilliant; together they are powerful beyond imagination</p>\n\n						<p class='author'>\n							<cite><a href='http://www.benshoemate.com/2008/11/30/einstein-never-said-that/'>not Einstein</a></cite>\n						</p>\n					</blockquote>\n				</div>\n			{{/()}}\n		</div>\n	{{/()}}\n</div>\n\n<!-- TODO source -->",images:["http://www.bbc.co.uk/doctorwho/classic/gallery/fourthdoctor/images/340/23.jpg"],data:{points:[{name:"Monday",value:20},{name:"Tuesday",value:55},{name:"Wednesday",value:45},{name:"Thursday",value:76},{name:"Friday",value:15},{name:"Saturday",value:90},{name:"Sunday",value:65}]}},{slide:"<div class='interstitial' intro='fade' outro='fade'>\n	<div class='image' style='background-image:url(files/images/archimedes.jpg); background-position: 50% 10%;'></div>\n	<h1>Understanding</h1>\n</div>"},{styles:".container {\n	padding: 4em 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.strikeout {\n    position: relative;\n}\n.strikeout:after {\n    border-bottom: 4px solid rgba(200,0,0,0.8);\n    content: '';\n    left: -0.1em;\n    position: absolute;\n    right: -0.1em;\n    top: 50%;\n}",stages:3,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Avoid <span class='strikeout'>introducing unnecessary</span> complexity</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The best visualisations are self-explanatory.</p>\n		</div>\n\n		{{#( stage >= 1 )}}\n		<div class='middle' intro='fade' outro='fade'>\n			<div class='image contain' style='background-image: url(files/images/radar.gif);'></div>\n		</div>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n		<div class='bottom' intro='fade' outro='fade'>\n			<p>Prefer familiar chart types, <em>in general</em>.</p>\n		</div>\n		{{/()}}\n	</div>\n</div>",images:["files/images/radar.gif"]},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(0,0,0,0.8);\n	color: white;\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Interactivity increases cognitive load</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='container'>\n		<div class='top'>\n			<p>We now have two things to worry about &ndash; the visualisation, and the <strong>user interface</strong> or UI.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://cars.about.com/od/buick/ig/2010-Buick-LaCrosse-photos/2010-Buick-LaCrosse-controls.htm -->\n			<div class='image {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://0.tqn.com/d/cars/1/0/e/u/1/ag_10lacrosse_buttons.jpg);'>\n			<div class='caption'><p>Bad UI design costs lives!</p></div>\n			</div>\n		</div>\n	</div>\n</div>",images:["http://0.tqn.com/d/cars/1/0/e/u/1/ag_10lacrosse_buttons.jpg"]},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>UI design is a rapidly-evolving field</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<div class='container'>\n		<div class='top'>\n			<p>Just as with data visualisation, we have to consider which interactions are <strong>familiar</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<!-- http://www.letsunlockiphone.com/ios-7-vs-ios-6-compare-ios-firmwares/ -->\n			<div class='image contain {{( stage >= 1 ? \"visible\" : \"invisible\" )}}' style='background-image: url(http://www.letsunlockiphone.com/wp-content/uploads/ios-6-vs-ios-7-lock-screen.jpg);'>\n			</div>\n		</div>\n	</div>\n</div>",images:["http://www.letsunlockiphone.com/wp-content/uploads/ios-6-vs-ios-7-lock-screen.jpg"]},{slide:"<div class='interstitial' intro='fade' outro='fade'>\n	<div class='image' style='background-image:url(files/images/asimo.jpg);'></div>\n	<h1>Aliveness</h1>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.latin {\n	font-family: Georgia;\n	font-weight: normal;\n	font-style: italic;\n}\n\niframe {\n	width: 100%;\n	height: 100%;\n}",stages:"function () {\n\n	var aspectRatio = 16 / 9;\n\n	return [\n\n		// stage 0 - setup\n		function () {\n			return {\n				do: function ( ractive ) {\n					var resizeHandler;\n\n					resizeHandler = function () {\n						var clientWidth, clientHeight, d, horizontalPadding, verticalPadding;\n\n						console.log( ractive.nodes.video_container );\n\n						clientWidth = ractive.nodes.video_container.clientWidth;\n						clientHeight = ractive.nodes.video_container.clientHeight;\n\n						if ( ( clientWidth / clientHeight ) > aspectRatio ) {\n							// need vertical bars\n							horizontalPadding = 0;\n\n							d = clientWidth - ( clientHeight * aspectRatio );\n							verticalPadding = d / 2;\n						} else {\n							// need horizontal bars\n							verticalPadding = 0;\n							\n							d = clientHeight - ( clientWidth / aspectRatio );\n							horizontalPadding = d / 2;\n						}\n\n						ractive.nodes.video_container.style.padding = horizontalPadding + 'px ' + verticalPadding + 'px';\n					};\n\n					window.addEventListener( 'resize', resizeHandler );\n					ractive.on( 'teardown', function () {\n						window.removeEventListener( 'resize', resizeHandler );\n					});\n\n					resizeHandler();\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		},\n\n		// stage 1 - show facebook video\n		null\n	];\n}",slide:"<div class='header'>\n	<h1>Aliveness</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>The word <strong>animation</strong> comes from the Latin <strong class='latin'>animō</strong> &ndash; to give life.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='video_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				<iframe src=\"//www.youtube.com/embed/HiqbNxRurFA?start=19\" frameborder=\"0\" allowfullscreen></iframe>\n			</div>\n		</div>\n	</div>\n</div>"},{styles:".container {\n	padding: 3em 0 0 0;\n}\n\n.top {\n	position: absolute;\n	top: 0;\n	left: 0;\n}\n\n.bottom {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n}\n\n.middle {\n	width: 100%;\n	height: 100%;\n}\n\n.visible {\n	opacity: 1;\n\n	-webkit-transition: opacity 0.2s;\n	-moz-transition: opacity 0.2s;\n	-ms-transition: opacity 0.2s;\n	-o-transition: opacity 0.2s;\n	transition: opacity 0.2s;\n}",stages:"function () {\n\n	return [\n\n		null,\n\n		// stage 1 - show crap chart\n		function () {\n			return {\n				do: function ( ractive ) {\n					\n					var chart = new Highcharts.Chart({\n						chart: {\n							renderTo: 'chart_container'\n						},\n						title: {\n							text: 'Combination chart'\n						},\n						xAxis: {\n							categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n						},\n						tooltip: {\n							formatter: function() {\n								var s;\n								if (this.point.name) { // the pie chart\n									s = ''+\n										this.point.name +': '+ this.y +' fruits';\n								} else {\n									s = ''+\n										this.x  +': '+ this.y;\n								}\n								return s;\n							}\n						},\n						labels: {\n							items: [{\n								html: 'Total fruit consumption',\n								style: {\n									left: '40px',\n									top: '8px',\n									color: 'black'\n								}\n							}]\n						},\n						series: [{\n							type: 'column',\n							name: 'Jane',\n							data: [3, 2, 1, 3, 4]\n						}, {\n							type: 'column',\n							name: 'John',\n							data: [2, 3, 5, 7, 6]\n						}, {\n							type: 'column',\n							name: 'Joe',\n							data: [4, 3, 3, 9, 0]\n						}, {\n							type: 'spline',\n							name: 'Average',\n							data: [3, 2.67, 3, 6.33, 3.33],\n							marker: {\n								lineWidth: 2,\n								lineColor: Highcharts.getOptions().colors[3],\n								fillColor: 'white'\n							}\n						}, {\n							type: 'pie',\n							name: 'Total consumption',\n							data: [{\n								name: 'Jane',\n								y: 13,\n								color: Highcharts.getOptions().colors[0] // Jane's color\n							}, {\n								name: 'John',\n								y: 23,\n								color: Highcharts.getOptions().colors[1] // John's color\n							}, {\n								name: 'Joe',\n								y: 19,\n								color: Highcharts.getOptions().colors[2] // Joe's color\n							}],\n							center: [100, 80],\n							size: 100,\n							showInLegend: false,\n							dataLabels: {\n								enabled: false\n							}\n						}]\n					});\n				},\n				undo: function ( ractive ) {\n\n				}\n			}\n		}\n	];\n}",slide:"<div class='header'>\n	<h1>Animation can be gratuitous and gimmicky...</h1>\n</div>\n\n<div class='content'>\n	<div class='container'>\n		<div class='top' intro='fade' outro='fade'>\n			<p>Ideally, animation should convey that the data being visualised, or the state of the interactive, is <strong>changing</strong>.</p>\n		</div>\n\n		<div class='middle'>\n			<div id='chart_container' class='container {{( stage >= 1 ? \"visible\" : \"invisible\" )}}'>\n				\n			</div>\n		</div>\n	</div>\n</div>",highcharts:"$(function () {\n	$('#container').highcharts({\n		chart: {\n		},\n		title: {\n			text: 'Combination chart'\n		},\n		xAxis: {\n			categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']\n		},\n		tooltip: {\n			formatter: function() {\n				var s;\n				if (this.point.name) { // the pie chart\n					s = ''+\n						this.point.name +': '+ this.y +' fruits';\n				} else {\n					s = ''+\n						this.x  +': '+ this.y;\n				}\n				return s;\n			}\n		},\n		labels: {\n			items: [{\n				html: 'Total fruit consumption',\n				style: {\n					left: '40px',\n					top: '8px',\n					color: 'black'\n				}\n			}]\n		},\n		series: [{\n			type: 'column',\n			name: 'Jane',\n			data: [3, 2, 1, 3, 4]\n		}, {\n			type: 'column',\n			name: 'John',\n			data: [2, 3, 5, 7, 6]\n		}, {\n			type: 'column',\n			name: 'Joe',\n			data: [4, 3, 3, 9, 0]\n		}, {\n			type: 'spline',\n			name: 'Average',\n			data: [3, 2.67, 3, 6.33, 3.33],\n			marker: {\n				lineWidth: 2,\n				lineColor: Highcharts.getOptions().colors[3],\n				fillColor: 'white'\n			}\n		}, {\n			type: 'pie',\n			name: 'Total consumption',\n			data: [{\n				name: 'Jane',\n				y: 13,\n				color: Highcharts.getOptions().colors[0] // Jane's color\n			}, {\n				name: 'John',\n				y: 23,\n				color: Highcharts.getOptions().colors[1] // John's color\n			}, {\n				name: 'Joe',\n				y: 19,\n				color: Highcharts.getOptions().colors[2] // Joe's color\n			}],\n			center: [100, 80],\n			size: 100,\n			showInLegend: false,\n			dataLabels: {\n				enabled: false\n			}\n		}]\n	});\n});"},{slide:"<div class='part-title' intro='fade' outro='fade'>\n	<div class='left'>\n		<span>&nbsp;</span>\n		<h1>part two :</h1>\n		<span>&nbsp;</span>\n	</div>\n\n	<div class='right'>\n		<span>DELIGHT</span>\n		<span class='current'>CASE STUDY</span>\n		<span>ENGINEERING</span>\n	</div>\n</div>"},{styles:"iframe {\n	width: 100%;\n	height: 100%;\n	/*border: 1px solid #eee;*/\n}",slide:"<div class='header'>\n	<h1>World Bank remittances data</h1>\n</div>\n\n<div class='content'>\n	<iframe frameborder='0' src='https://docs.google.com/spreadsheet/pub?key=0AgS_UxBggDCMdG9aNTExWHYzclNYbzdnWDg1enVtMnc&output=html&widget=true'></iframe>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.time.com/time/interactive/0,31813,1737566,00.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.time.com/time/interactive/0,31813,1737566,00.html'>The Flow of Money: Mapping World Remittances</a> &ndash; time.com</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://www.torre.nl/remittances/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.torre.nl/remittances/'>Remittance flows</a> &ndash; visualizing.org</p>\n	</div>\n</div>"},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://thereandhere.org/remittances.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://thereandhere.org/remittances.html'>Remittances by Country of Origin</a> &ndash; thereandhere.org</p>\n	</div>\n</div>"},{styles:"iframe {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n}",slide:'<iframe src="//www.youtube.com/embed/vVX-PrBRtTY?start=72" frameborder="0" allowfullscreen></iframe>'},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 1em 2em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.fade-bottom:after {\n	position: absolute;\n	left: 0;\n	bottom: 0;\n	content: ' ';\n	display: block;\n	width: 100%;\n	height: 3em;\n	background-color: rgba(255,255,255,0.5);\n\n	background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */\n	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */\n	background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */\n	background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */\n	background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */\n	background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */\n}\n\n.fade-top:before {\n	position: absolute;\n	left: 0;\n	top: 0;\n	content: ' ';\n	display: block;\n	width: 100%;\n	height: 3em;\n	background-color: rgba(255,255,255,0.5);\n\n	background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6+ */\n	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */\n	background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */\n	background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Opera 11.10+ */\n	background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* IE10+ */\n	background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C */\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(255,255,255,0.95);\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n	border-top: 1px solid #333;\n	border-bottom: 1px solid #333;\n}",slide:"<div class='container'>\n	<div class='columns-outer'>\n		<div class='columns-inner' intro='fade' outro='fade'>\n			<div intro='fade' class='column3'>\n				\n				<div class='image fade-bottom' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 0;'></div>\n			</div>\n\n			<div intro='fade:{\"delay\":100}' class='column3'>\n				\n				<div class='image fade-top fade-bottom' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 50%;'>\n					\n					<div class='caption'><p><a href='http://xkcd.com/977/'>xkcd.com/977</a></p></div>\n				</div>\n			</div>\n\n			<div intro='fade:{\"delay\":200}' class='column3'>\n				\n				<div class='image fade-top' style='background-image:url(http://imgs.xkcd.com/comics/map_projections.png); background-position: 50% 100%;'></div>\n			</div>\n\n		</div>\n	</div>\n</div>",images:["http://imgs.xkcd.com/comics/map_projections.png"]},{slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://peoplemov.in/'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://peoplemov.in/'>Immigration flows across the world</a> &ndash; http://peoplemov.in/</p>\n	</div>\n</div>"},{stages:8,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Our ambitions</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<p>We aimed to produce a visualisation that:</p>\n\n	<ul>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>was geographical</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>showed inflows and outflows simultaneously</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>had animated arrows, not static straight lines, making the direction of flow clear</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>included migration data as context...</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade'>...but avoided information overload</li>\n		{{/()}}\n\n		{{#( stage >= 6 )}}\n			<li intro='fade'>used colour for explanatory, rather than merely aesthetic, value</li>\n		{{/()}}\n\n		{{#( stage >= 7 )}}\n			<li intro='fade'>incorporated case studies and additional context</li>\n		{{/()}}\n	</ul>\n</div>"},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 0.5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}",slide:"<div class='container' intro='fade' outro='fade'>\n	<div class='image contain' style='background-image: url(files/images/remittances.png);'></div>\n</div>",images:["files/images/remittances.png"]},{styles:".container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	padding: 0.5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.caption {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 1em;\n	text-align: center;\n}\n\n.caption p {\n	background-color: rgba(0,0,0,0.8);\n	color: white;\n	padding: 0.2em 1em;\n	display: inline-block;\n	font-size: 2em;\n}",slide:"<div class='container' intro='fade' outro='fade'>\n	<div class='image contain' style='background-image: url(http://i.dailymail.co.uk/i/pix/2013/01/31/article-2271455-174691D9000005DC-842_964x579.jpg);'>\n		\n		<div class='caption'><p>FAIL</p></div>\n	</div>\n</div>",images:["http://i.dailymail.co.uk/i/pix/2013/01/31/article-2271455-174691D9000005DC-842_964x579.jpg"]},{styles:".previous-example-container iframe {\n	border: none;\n	box-shadow: none;\n}\n\n@media (min-width: 63em) {\n	.previous-example-container iframe {\n		width: 80%;\n		height: 80%;\n		-webkit-transform: translate(-50%,-50%) scale(1.25) translate(50%,50%);\n	}\n}",slide:"<div class='previous-example'>\n	<div class='previous-example-container'>\n		<iframe src='http://static.guim.co.uk/interactivestore/2013/6/9/1370806749349/342760/index.html'></iframe>\n	</div>\n\n	<div class='previous-example-source'>\n		<p><a href='http://www.guardian.co.uk/global-development/interactive/2013/jan/31/remittances-money-migrants-home-interactive'>How much money do migrants send home?</a> &ndash; guardian.co.uk</p>\n	</div>\n</div>"},{slide:"<div class='part-title' intro='fade' outro='fade'>\n	<div class='left'>\n		<span>&nbsp;</span>\n		<span>&nbsp;</span>\n		<h1>part three :</h1>\n	</div>\n\n	<div class='right'>\n		<span>DELIGHT</span>\n		<span>CASE STUDY</span>\n		<span class='current'>ENGINEERING</span>\n	</div>\n</div>"},{styles:".question {\n	text-align: center;\n}\n\n.question p {\n	font-size: 3em;\n}",slide:"<div class='question'>\n	<p>\"How did you do the arrows?\"</p>\n</div>"},{styles:".black-bg {\n	background-color: black;\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	padding: 5em;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nimg {\n	width: 100%;\n	height: 100%;\n}",stages:2,slide:"<div class='black-bg' intro='fade' outro='fade'>\n	{{#( stage === 1 )}}\n		<img src='files/images/maths.svg' intro='fade:1200'>\n	{{/()}}\n</div>",images:["files/images/maths.svg"]},{styles:"iframe {\n	width: 100%;\n	height: 100%;\n	border: none;\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The centroids</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<iframe src='files/iframes/centroids/index.html'></iframe>\n</div>"},{styles:".demo {\n	float: right;\n}\n\nfigure {\n	float: left;\n	text-align: center;\n}\n\nfigure img {\n	width: 12em;\n	height: 12em;\n	margin: 0 0 1em 1em;\n}\n\nul {\n	padding: 0 0 0 1em;\n}",stages:8,slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>SVG: scalable vector graphics</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	\n\n	<div class='demo'>\n		<figure>\n			<img src='files/images/svg-logo.png'>\n			<figcaption>bitmap</figcaption>\n		</figure>\n\n		<figure>\n			<img src='files/images/svg-logo.svg'>\n			<figcaption>vector</figcaption>\n		</figure>\n	</div>\n\n	<ul outro='fade'>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>Web standard supported pretty much everywhere (even IE!)</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>It's like HTML for graphics</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>Easy to create and manipulate &ndash; you don't need libraries</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>Perfect for interactivity</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade'>Adobe Illustrator and the open source <a href='http://inkscape.org/'>Inkscape</a> produce SVG</li>\n		{{/()}}\n\n		{{#( stage >= 6 )}}\n			<li intro='fade'>...but slow as molasses on old devices (e.g. iPad 1)...</li>\n		{{/()}}\n\n		{{#( stage >= 7 )}}\n			<li intro='fade'>...and decent tutorials are scarce. Google is your friend</li>\n		{{/()}}\n	</ul>\n</div>",images:["files/images/svg-logo.png","files/images/svg-logo.svg"]},{styles:"svg {\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	-o-user-select: none;\n	user-select: none;\n}\n\ncircle {\n	stroke: black;\n	stroke-width: 1;\n	fill: #aaa;\n	cursor: move;\n}\n\ntext {\n	text-anchor: middle;\n	font-size: 1.4em;\n	pointer-events: none;\n}\n\n.link {\n	stroke: rgb(201,83,0);\n	fill: none;\n	pointer-events: none;\n	opacity: 0.7;\n	marker-end: url(#arrow-end);\n	marker-start: url(#arrow-start);\n}\n\n.code {\n	font-family: 'Source Sans Pro', monospace;\n	text-anchor: start;\n}\n\n.home {\n	font-weight: bold;\n	fill: red;\n}\n\n.prime {\n	font-weight: bold;\n	fill: blue;\n}\n\n.control {\n	font-weight: bold;\n	fill: rgb(143,26,182);\n}\n\n.controls {\n	position: absolute;\n	left: 3em;\n	bottom: 3em;\n}\n\n.controls label {\n	display: block;\n	padding: 0.2em;\n}\n\n.controls input[type=\"checkbox\"] {\n	position: relative;\n	top: -0.2em;\n}\n\n.schematic {\n	stroke: #aaa;\n	stroke-width: 1;\n	fill: none;\n}\n\n.control-point.prime {\n	fill: rgb(143,26,182);\n	stroke-width: 2;\n}\n\n.shadows {\n	filter: url(#blur);\n	opacity: 0.15;\n}\n\n.shadow {\n	stroke: black;\n}\n\n.quote-container {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	/*padding: 4em 10em 0 0;*/\n	background-color: rgba(255,255,255,0.8);\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\nblockquote {\n	float: right;\n	box-shadow: 4px 4px 10px rgba(0,0,0,0.2);\n}",stages:"function () {\n\n	var home, targets, newTargets, thinTargets, thickTargets, viewBox;\n\n	home = {\n		x: 450,\n		y: 300\n	};\n\n	targets = [\n		{ id: 'B', x: 700, y: 100, w: 2, prime: true }\n	];\n\n	newTargets = [\n		{ id: 'C', x: 100, y: 150, w: 2 },\n		{ id: 'D', x: 400, y: 400, w: 2 },\n		{ id: 'E', x: 800, y: 350, w: 2 },\n		{ id: 'F', x: 200, y: 250, w: 2 }\n	];\n\n	thinTargets = {\n		'targets.0.w': 2,\n		'targets.1.w': 2,\n		'targets.2.w': 2,\n		'targets.3.w': 2,\n		'targets.4.w': 2\n	};\n\n	thickTargets = {\n		'targets.0.w': 12.5,\n		'targets.1.w': 7,\n		'targets.2.w': 1,\n		'targets.3.w': 6,\n		'targets.4.w': 9\n	};\n\n	return [\n\n		// stage 0 - setup\n		function () {\n			return {\n				do: function ( ractive ) {\n					viewBox = new ViewBox( ractive.nodes.svg );\n\n					ractive.set({\n						home: home,\n						targets: targets,\n						outward: true,\n						m: 0,\n						showHints: true\n					});\n\n					ractive.on( 'drag', function ( event ) {\n						var move, cancel, keypath;\n\n						keypath = event.keypath || 'home';\n\n						move = function ( event ) {\n							var svgCoords = viewBox.getCoordsFromClient( event.clientX, event.clientY );\n\n							ractive.set( keypath + '.x', svgCoords.x );\n							ractive.set( keypath + '.y', svgCoords.y );\n						};\n\n						cancel = function () {\n							window.removeEventListener( 'mousemove', move );\n							window.removeEventListener( 'mouseup', cancel );\n						}\n\n						window.addEventListener( 'mousemove', move );\n						window.addEventListener( 'mouseup', cancel );\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 1 - show additional targets\n		function () {\n			return {\n				do: function ( ractive ) {\n					targets.push.apply( targets, newTargets );\n				},\n				undo: function ( ractive ) {\n					targets.splice( 1 );\n				}\n			}\n		},\n\n		// stage 2 - show variable width lines\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( thickTargets );\n				},\n				redo: function ( ractive ) {\n					ractive.set( thickTargets );\n				},\n				undo: function ( ractive ) {\n					ractive.animate( thinTargets );\n				}\n			}\n		},\n\n		// stage 3 - show Watkins quote\n		null,\n\n		// stage 4 - show curves\n		null,\n\n		// stage 5 - show arrowheads\n		null,\n\n		// stage 6 - show moved arrowheads\n		null,\n\n		// stage 7 - show moved arrowheads with hidden target circles\n		null,\n\n		// stage 8 - show inward arrowheads\n		null\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>Lines</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<svg id='svg' viewBox='0 0 1000 500'>\n\n		<defs>\n			<filter id=\"blur\">\n				<feGaussianBlur stdDeviation=\"4\"/>\n		    </filter>\n\n			{{#( stage === 5 )}}\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='2' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path intro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n\n			{{#( stage === 6 || stage === 7 )}}\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='12' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path outro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n\n			{{#( stage === 8 )}}\n			<marker id='arrow-start' viewBox='0 0 14 14' refX='4' refY='7' markerUnits='strokeWidth' markerWidth='8' markerHeight='6' orient='auto'>\n				<path intro='fade' outro='fade' d='M 12 2 L 2 7 L 12 12 z' fill='rgb(201,83,0)'/>\n			</marker>\n			{{/()}}\n		</defs>\n\n\n\n		<!-- shadows -->\n		{{#shadows}}\n			<g class='shadows'>\n			{{#targets:i}}\n				<line intro='fade' outro='fade' class='shadow' x1='{{home.x}}' y1='{{home.y}}' x2='{{x}}' y2='{{y}}' stroke-width='{{w}}'/>\n			{{/targets}}\n			</g>\n		{{/shadows}}\n\n\n		<!-- A -->\n		<g transform='translate({{home.x}},{{home.y}})'>\n			<circle r='5' proxy-mousedown='drag'/>\n			<text class='home' y='30'>A</text>\n		</g>\n\n		\n		<!-- lines -->\n		{{#( stage <= 3 )}}\n			{{#targets:i}}\n				<g transform='translate({{x}},{{y}})' intro='fade' outro='fade'>\n					<circle r='5' proxy-mousedown='drag' class='{{( stage === 6 ? \"invisible\" : \"visible\" )}}'/>\n					<text class='{{( prime ? \"prime\" : \"\" )}}' y='36'>{{id}}</text>\n				</g>\n\n				<line intro='fade' outro='fade' class='link' x1='{{home.x}}' y1='{{home.y}}' x2='{{x}}' y2='{{y}}' stroke-width='{{w}}'/>\n			{{/targets}}\n\n			{{# targets[0] }}\n				<text intro='fade' outro='fade' x='0' y='30' class='code'>\n					&lt;line x1='<tspan class='home'>{{( Math.round( home.x ) )}}</tspan>' y1='<tspan class='home'>{{( Math.round( home.y ) )}}</tspan>' x2='<tspan class='prime'>{{( Math.round( x ) )}}</tspan>' y2='<tspan class='prime'>{{( Math.round( y ) )}}</tspan>{{#( stage >= 2 )}} <tspan intro='fade'>stroke-width='{{( w.toFixed(1) )}}</tspan>{{/()}}'/&gt;\n				</text>\n			{{/ targets[0] }}\n		{{/()}}\n\n\n		<!-- curves -->\n		{{#( stage >= 4 )}}\n			{{#targets:i}}\n				\n				{{#showHints}}\n					<polyline\n						intro='fade'\n						outro='fade'\n						class='schematic'\n						points='{{home.x}},{{home.y}} {{( ( x + home.x ) / 2 )}},{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}}, {{x}},{{y}}'\n					/>\n\n					<circle\n						intro='fade'\n						outro='fade'\n						class='control-point {{( .prime ? \"prime\" : \"\" )}}'\n						cx='{{( ( x + home.x ) / 2 )}}'\n						cy='{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}}'\n						r='{{( .prime ? 5 : 3 )}}'\n					/>\n				{{/showHints}}\n\n				<g transform='translate({{x}},{{y}})' intro='fade' outro='fade'>\n					<circle r='5' proxy-mousedown='drag' class='{{( stage === 6 ? \"invisible\" : \"visible\" )}}'/>\n\n					<text class='{{( prime ? \"prime\" : \"\" )}}' y='36'>{{id}}</text>\n				</g>\n\n				<path intro='fade' outro='fade'\n				      class='link' stroke-width='{{w}}'\n				      d='M{{home.x}},{{home.y}} Q{{( ( x + home.x ) / 2 )}},{{( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) )}} {{x}},{{y}}'/>\n			{{/targets}}\n\n			{{# targets[0] }}\n				<text intro='fade' outro='fade' x='0' y='30' class='code'>\n					&lt;path d='M<tspan class='home'>{{( Math.round( home.x ) )}}</tspan>,<tspan class='home'>{{( Math.round( home.y ) )}}</tspan> Q<tspan class='control'>{{( Math.round( ( x + home.x ) / 2 ) )}}</tspan>,<tspan class='control'>{{( Math.round( ( ( y + home.y ) / 2 ) + ( m * Math.abs( home.x - x ) ) ) )}}</tspan> <tspan class='prime'>{{( Math.round( x ) )}}</tspan>,<tspan class='prime'>{{( Math.round( y ) )}}</tspan>'/&gt;\n				</text>\n			{{/ targets[0] }}\n		{{/()}}\n\n\n		\n	</svg>\n\n	{{#( stage === 3 )}}\n	<div class='quote-container' intro='fade' outro='fade'>\n		<blockquote class='centred'>\n			<p intro='typewriter'>I had previously received an experimental conviction...that the curve line also is in all nature an indication of life, and hence the line of beauty, or of pleasurable sensation and emotion to the race of men.</p>\n\n			<p class='author' intro='fade' outro='fade'>\n				<cite><a href='http://openlibrary.org/books/OL25408214M/A_treatise_on_the_leading_causes_of_pleasure_and_delight_in_the_human_mind'>A treatise on the leading causes of pleasure and delight in the human mind</a></cite>\n				&ndash; Watkins 1841\n			</p>\n		</blockquote>\n	</div>\n	{{/()}}\n\n	{{#( stage >= 4 )}}\n		<div class='controls' intro='fade' outro='fade'>\n			<label><input type='checkbox' checked='{{showHints}}'> show hints</label>\n			<label><input type='checkbox' checked='{{shadows}}'> show shadows</label>\n			<label><input type='range' value='{{m}}' min='-1' max='1' step='0.01'> lift ({{m}})</label>\n		</div>\n	{{/()}}\n</div>"},{styles:".slide {\n	/*position: absolute;\n	left: 0;\n	top: 0;\n	width: 100%;\n	height: 100%;*/\n	/*background-color: rgb(152,188,219);*/\n	background-color: rgb(0,74,131);\n	color: white;\n}\n\n.header, .content {\n	padding-right: 14em;\n}\n\nul {\n	font-size: 2em;\n}\n\n.floating-equation {\n	position: absolute;\n	top: -50%;\n	left: -50%;\n	width: 200%;\n	height: 200%;\n	opacity: 0.1;\n	background: white url(files/images/bezier.png) no-repeat 50% 50%;\n	background-size: 70% auto;\n\n	/*-webkit-filter: blur(2px);*/\n\n	-webkit-animation: 120s infinite float ease-in-out;\n}\n\n.main-image-container {\n	position: absolute;\n	width: 12em;\n	height: 100%;\n	bottom: 0;\n	right: 0;\n	background-color: rgba(255,255,255,0.7);\n	box-shadow: -2px 0 8px 2px rgba(0,0,0,0.1);\n}\n\n.main-image {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 0;\n}\n\n@-webkit-keyframes float {\n	0% {\n		-webkit-transform: translate(-50px,0px) scale(1) rotate(-4deg);\n	}\n\n	25% {\n		-webkit-transform: translate(-150px,0px) scale(1.2) rotate(-5deg);\n	}\n\n	50% {\n		-webkit-transform: translate(-150px,-100px) scale(1.4) rotate(4deg);\n	}\n\n	75% {\n		-webkit-transform: translate(-100px,-100px) scale(1.2) rotate(-6deg);\n	}\n\n	100% {\n		-webkit-transform: translate(-50px,0px) scale(1) rotate(-4deg);\n	}\n}",stages:5,slide:"<div class='floating-equation' intro='fade' outro='fade'>\n	<!--<img src='files/images/bezier.png'>-->\n</div>\n\n\n\n<div class='header' intro='fade' outro='fade'>\n	<h1>Meet Pierre Bézier</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	\n	<ul outro='fade'>\n		{{#( stage >= 1 )}}\n			<li intro='fade'>Bézier didn't invent the Bézier curve...</li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade'>...but he did patent it!</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade'>He was preceded by rival auto engineer Paul de Casteljau</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade'>Luckily, 'Bézier curve' is much easier to pronounce than 'de Casteljau curve'</li>\n		{{/()}}\n	</ul>\n</div>\n\n\n\n<div class='main-image-container' intro='fade' outro='fade'>\n	<img class='main-image' src='files/images/pierre.gif'>\n</div>",images:["files/images/pierre.gif","files/images/bezier.png"]},{styles:".content {\n	padding-bottom: 5em;\n	padding-right: 12em;\n}\n\nsvg {\n	width: 100%;\n	height: 100%;\n\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	-o-user-select: none;\n	user-select: none;\n}\n\nsvg * {\n	pointer-events: none;\n}\n\ntext {\n	text-anchor: middle;\n	alignment-baseline: middle;\n	font-size: 1.4em;\n}\n\n.node {\n	fill: #aaa;\n	stroke: black;\n	stroke-width: 1;\n	cursor: move;\n	pointer-events: fill;\n}\n\n.intermediate-node {\n	fill: #666;\n	stroke: black;\n	stroke-width: 1;\n}\n\n.controls {\n	position: absolute;\n	width: 100%;\n	left: 0;\n	bottom: 2em;\n	padding: 0 5em;\n	z-index: 2;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.slider {\n	position: relative;\n	width: 100%;\n	display: block;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.slider span {\n	position: absolute;\n	top: -1em;\n	left: 0;\n	font-size: 2em;\n	font-weight: bold;\n	font-family: 'Source Sans Pro', monospace;\n}\n\n.slider input {\n	width: 100%;\n	cursor: ew-resize;\n}\n\n.guide-vector, .guide-curve {\n	stroke: #ddd;\n	stroke-width: 1.5;\n	fill: none;\n}\n\n.intermediate-vector {\n	stroke: rgb(152,188,219);\n	stroke-width: 4;\n}\n\n.main-curve {\n	stroke: rgb(201,83,0);\n	stroke-width: 5;\n	fill: none;\n}\n\n.trajectory {\n	stroke: black;\n	opacity: 0.5;\n	stroke-width: 2;\n	stroke-dasharray: 5,5;\n	marker-end: url(#arrow-end);\n}\n\n.trajectory-hint {\n	fill: rgba(0,0,0,0.5);\n	stroke: black;\n	stroke-width: 1;\n}\n\n.cross {\n	stroke: black;\n	opacity: 0.8;\n	stroke-width: 3;\n	stroke-dasharray: 2,2;\n}\n\n.sidebar-controls-outer {\n	position: absolute;\n	right: 0;\n	top: 0;\n	width: 17em;\n	height: 100%;\n	padding: 1em 5em 6em 0;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.sidebar-controls-inner {\n	width: 100%;\n	height: 100%;\n	background-color: #f9f9f9;\n	padding: 1em;\n	box-shadow: inset 1px 1px 5px rgba(0,0,0,0.1);\n	overflow-y: auto;\n\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.sidebar-controls-inner input[type=\"range\"] {\n	width: 100%;\n}\n\nlabel {\n	display: block;\n	padding: 0.2em 0;\n}\n\n.result, .approximation {\n	fill: rgba(201,83,0,0.8);\n}\n\n.result-outline, .approximation-outline {\n	fill: none;\n	stroke: black;\n	stroke-width: 1;\n}\n\n.trajectory-hint-shadow {\n	fill: rgba(0,0,0,0.1);\n	stroke: black;\n	stroke-dasharray: 2,2;\n}",stages:"function () {\n\n	var viewBox, state, Statesman;\n\n	Statesman = require( 'Statesman' );\n\n	// square root helper\n	Statesman.utils.sqrt = function ( num ) {\n		return Math.sqrt( num );\n	};\n\n	state = new Statesman({\n		A: { x: 300, y: 400 },\n		B: { x: 700, y: 400 },\n		Q: { x: 500, y: 100 },\n\n		pythagoras: {\n			origin: {\n				x: 150,\n				y: 200\n			}\n		},\n\n		exaggeration: 50,\n\n		t: 0\n	});\n\n	state.compute({\n		'tAQ.x': '${A.x} + ( ${t} * ( ${Q.x} - ${A.x} ) )',\n		'tAQ.y': '${A.y} + ( ${t} * ( ${Q.y} - ${A.y} ) )',\n\n		'tQB.x': '${Q.x} + ( ${t} * ( ${B.x} - ${Q.x} ) )',\n		'tQB.y': '${Q.y} + ( ${t} * ( ${B.y} - ${Q.y} ) )',\n\n		'Z.x'  : '${tAQ.x} + ( ${t} * ( ${tQB.x} - ${tAQ.x} ) )',\n		'Z.y'  : '${tAQ.y} + ( ${t} * ( ${tQB.y} - ${tAQ.y} ) )',\n\n		direction: {\n			dependsOn: [ 'tAQ', 'tQB' ],\n			get: function ( tAQ, tQB ) {\n				var dx, dy, magnitude, x, y;\n\n				dx = tQB.x - tAQ.x;\n				dy = tQB.y - tAQ.y;\n\n				magnitude = Math.sqrt( ( dx * dx ) + ( dy * dy ) );\n\n				x = dx / magnitude;\n				y = dy / magnitude;\n\n				return {\n					x: x,\n					y: y\n				};\n			}\n		},\n\n		'normal.x': '-${direction.y}',\n		'normal.y': ' ${direction.x}',\n\n		'arrowhead.center.x': '${Z.x} - ( ${arrowhead.size} * ${direction.x} )',\n		'arrowhead.center.y': '${Z.y} - ( ${arrowhead.size} * ${direction.y} )',\n\n		'arrowhead.po.x': '${arrowhead.center.x} + ( ${arrowhead.size} * -${normal.x} )',\n		'arrowhead.po.y': '${arrowhead.center.y} + ( ${arrowhead.size} * -${normal.y} )',\n		'arrowhead.so.x': '${arrowhead.center.x} + ( ${arrowhead.size} * ${normal.x} )',\n		'arrowhead.so.y': '${arrowhead.center.y} + ( ${arrowhead.size} * ${normal.y} )',\n\n		'arrowhead.pi.x': '${arrowhead.center.x} + ( 0.5 * ${arrowhead.size} * -${normal.x} )',\n		'arrowhead.pi.y': '${arrowhead.center.y} + ( 0.5 * ${arrowhead.size} * -${normal.y} )',\n		'arrowhead.si.x': '${arrowhead.center.x} + ( 0.5 * ${arrowhead.size} * ${normal.x} )',\n		'arrowhead.si.y': '${arrowhead.center.y} + ( 0.5 * ${arrowhead.size} * ${normal.y} )',\n\n\n\n		\n		// midpoint\n		midpoint_t: '${t} / 2',\n\n		'midpoint_tAQ.x': '${A.x} + ( ${midpoint_t} * ( ${Q.x} - ${A.x} ) )',\n		'midpoint_tAQ.y': '${A.y} + ( ${midpoint_t} * ( ${Q.y} - ${A.y} ) )',\n\n		'midpoint_tQB.x': '${Q.x} + ( ${midpoint_t} * ( ${B.x} - ${Q.x} ) )',\n		'midpoint_tQB.y': '${Q.y} + ( ${midpoint_t} * ( ${B.y} - ${Q.y} ) )',\n\n		'midpoint_Z.x'  : '${midpoint_tAQ.x} + ( ${midpoint_t} * ( ${midpoint_tQB.x} - ${midpoint_tAQ.x} ) )',\n		'midpoint_Z.y'  : '${midpoint_tAQ.y} + ( ${midpoint_t} * ( ${midpoint_tQB.y} - ${midpoint_tAQ.y} ) )',\n\n		midpoint_direction: {\n			dependsOn: [ 'midpoint_tAQ', 'midpoint_tQB' ],\n			get: function ( midpoint_tAQ, midpoint_tQB ) {\n				var dx, dy, magnitude, x, y;\n\n				dx = midpoint_tQB.x - midpoint_tAQ.x;\n				dy = midpoint_tQB.y - midpoint_tAQ.y;\n\n				magnitude = Math.sqrt( ( dx * dx ) + ( dy * dy ) );\n\n				x = dx / magnitude;\n				y = dy / magnitude;\n\n				return {\n					x: x,\n					y: y\n				};\n			}\n		},\n\n		'midpoint_normal.x': '-${midpoint_direction.y}',\n		'midpoint_normal.y': ' ${midpoint_direction.x}',\n\n		'approximation_midpoint_port.x': '${midpoint_Z.x} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'approximation_midpoint_port.y': '${midpoint_Z.y} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n		'approximation_midpoint_starboard.x': '${midpoint_Z.x} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'approximation_midpoint_starboard.y': '${midpoint_Z.y} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n\n		'midpoint_port.x': '${tAQ.x} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'midpoint_port.y': '${tAQ.y} - ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n		'midpoint_starboard.x': '${tAQ.x} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.x} )',\n		'midpoint_starboard.y': '${tAQ.y} + ( 0.5 * ${arrowhead.size} * ${midpoint_normal.y} )',\n\n		'arrowhead.size': '${varyThickness} ? ( ${t} * ${thickness} ) : ${thickness}',\n\n\n		// pythagoras\n		'pythagoras.a': '${tQB.x} - ${tAQ.x}',\n		'pythagoras.b': '${tQB.y} - ${tAQ.y}',\n		'pythagoras.c': 'utils.sqrt( ( ${pythagoras.a} * ${pythagoras.a} ) + ( ${pythagoras.b} * ${pythagoras.b} ) )',\n\n		'pythagoras.normalised.a': '${pythagoras.a} / ${pythagoras.c}',\n		'pythagoras.normalised.b': '${pythagoras.b} / ${pythagoras.c}'\n	});\n\n	return [\n\n		// stage 0\n		function () {\n			return {\n				do: function ( ractive ) {\n					viewBox = new ViewBox( ractive.nodes.svg );\n\n					ractive.debug = true;\n\n					ractive.set( state.get() );\n					ractive.set({\n						showNodes: true,\n						showLabels: true,\n						showGuideVectors: true,\n						showGuideCurve: true,\n						showIntermediateCurve: true,\n\n						t: 0,\n						thickness: 30\n					});\n\n					ractive.on( 'drag', function ( event, point ) {\n						var move, cancel;\n\n						move = function ( event ) {\n							var changes, svgCoords = viewBox.getCoordsFromClient( event.clientX, event.clientY );\n\n							changes = {};\n							changes[ point + '.x' ] = svgCoords.x;\n							changes[ point + '.y' ] = svgCoords.y;\n\n							state.set( changes );\n						};\n\n						cancel = function () {\n							window.removeEventListener( 'mousemove', move );\n							window.removeEventListener( 'mouseup', cancel );\n						}\n\n						window.addEventListener( 'mousemove', move );\n						window.addEventListener( 'mouseup', cancel );\n					});\n\n					state.on( 'change', function ( changeHash ) {\n						ractive.set( changeHash );\n					});\n\n					ractive.observe({\n						t: function ( t ) {\n							state.set( 't', t );\n						},\n						thickness: function ( t ) {\n							state.set( 'thickness', t );\n						},\n						varyThickness: function ( vary ) {\n							state.set( 'varyThickness', vary );\n						}\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 1 - animate t\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.animate( 't', 1, {\n						duration: 2000,\n						easing: 'easeInOut',\n						complete: function () {\n							ractive.animate( 't', 0, {\n								duration: 2000,\n								easing: 'easeInOut'\n							});\n						}\n					});\n				},\n				redo: function () {\n					// noop\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 2 - show intermediate points\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showIntermediatePoints: true,\n						showIntermediateVectors: true\n					});\n\n					ractive.animate( 't', 0.25 );\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showIntermediatePoints: true,\n						showIntermediateVectors: true,\n						t: 0.25\n					});\n				},\n				undo: function () {\n					// noop\n				}\n			}\n		},\n\n		// stage 3 - show trajectory\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( 'showTrajectory', true );\n				},\n				undo: function ( ractive ) {\n					ractive.set( 'showTrajectory', false );\n				}\n			}\n		},\n\n		// stage 4 - show trajectory hint\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( 'showTrajectoryHint', true );\n\n					ractive.animate( 't', 0.25 );\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: true,\n						t: 0.25\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set( 'showTrajectoryHint', false );\n				}\n			}\n		},\n\n		// stage 5 - normalise trajectory hint\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set( 'showNormalised', true );\n				},\n				undo: function ( ractive ) {\n					ractive.set( 'showNormalised', false );\n				}\n			}\n		},\n\n		// stage 6 - hide trajectory hint, show arrowhead base and crossbars\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: false,\n						showIntermediateVectors: false,\n						showIntermediatePoints: false,\n						showArrowheadBase: true,\n						showCrossbars: true\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set({\n						showTrajectoryHint: true,\n						showIntermediateVectors: true,\n						showIntermediatePoints: true,\n						showArrowheadBase: false,\n						showCrossbars: false\n					});\n				}\n			}\n		},\n\n		// stage 7 - show approximation\n		function () {\n			return {\n				do: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: false,\n						showGuideVectors: false,\n						showGuideCurve: false,\n						showIntermediatePoints: false,\n						showIntermediateVectors: false,\n						showIntermediateCurve: false,\n						showTrajectory: false,\n						showTrajectoryHint: false,\n						showArrowheadBase: false,\n						showCrossbars: false,\n						showApproximationOutline: false,\n						showApproximation: false,\n						showResultOutline: false,\n						showResult: false\n					}, function () {\n						ractive.animate({\n							A: { x: 200, y: 350 },\n							B: { x: 800, y: 300 },\n							Q: { x: 500, y: 200 }\n						}, {\n							duration: 800,\n							easing: 'easeInOut',\n							complete: function () {\n								state.set({\n									A: { x: 200, y: 350 },\n									B: { x: 800, y: 300 },\n									Q: { x: 500, y: 200 },\n									t: 0.75\n								});\n\n								ractive.set( 'showApproximation', true );\n							}\n						})\n					})\n\n					\n				},\n				redo: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: false,\n						showGuideVectors: false,\n						showGuideCurve: false,\n						showIntermediatePoints: false,\n						showIntermediateVectors: false,\n						showIntermediateCurve: false,\n						showTrajectory: false,\n						showTrajectoryHint: false,\n						showArrowheadBase: false,\n						showCrossbars: false,\n						showApproximationOutline: false,\n						showApproximation: true,\n						showResultOutline: false,\n						showResult: false\n					});\n\n					state.set({\n						A: { x: 200, y: 350 },\n						B: { x: 800, y: 300 },\n						Q: { x: 500, y: 200 },\n						t: 0.75\n					});\n				},\n				undo: function ( ractive ) {\n					ractive.set({\n						showNodes: true,\n						showLabels: true,\n						showGuideVectors: true,\n						showGuideCurve: true,\n						showIntermediatePoints: true,\n						showIntermediateVectors: true,\n						showIntermediateCurve: true,\n						showTrajectory: true,\n						showTrajectoryHint: false,\n						showArrowheadBase: true,\n						showCrossbars: true,\n						showApproximationOutline: false,\n						showApproximation: false,\n						showResultOutline: false,\n						showResult: false\n					});\n\n					state.set({\n						A: { x: 200, y: 350 },\n						B: { x: 800, y: 300 },\n						Q: { x: 500, y: 200 },\n						t: 0.75\n					});\n				}\n			}\n		}\n	];\n}",slide:"<div class='header' intro='fade' outro='fade'>\n	<h1>The quadratic Bézier curve</h1>\n</div>\n\n<div class='content'>\n	<svg id='svg' viewBox='100 0 800 500'>\n\n\n		<defs>\n			<marker id='arrow-end' viewBox='0 0 14 14' refX='7' refY='7' markerUnits='strokeWidth' markerWidth='12' markerHeight='9' orient='auto'>\n				<path outro='fade' d='M 2 2 L 12 7 L 2 12 z' fill='black'/>\n			</marker>\n\n			<marker id='arrow-start' viewBox='0 0 14 14' refX='7' refY='7' markerUnits='strokeWidth' markerWidth='12' markerHeight='9' orient='auto'>\n				<path intro='fade' outro='fade' d='M 12 2 L 2 7 L 12 12 z' fill='black'/>\n			</marker>\n		</defs>\n\n\n		{{#showGuideVectors}}\n			<!-- vector AQ -->\n			<line intro='fade' outro='fade' class='guide-vector' x1='{{A.x}}' y1='{{A.y}}' x2='{{Q.x}}' y2='{{Q.y}}'/>\n\n			<!-- vector QB -->\n			<line intro='fade' outro='fade' class='guide-vector' x1='{{Q.x}}' y1='{{Q.y}}' x2='{{B.x}}' y2='{{B.y}}'/>\n		{{/showGuideVectors}}\n\n		<!-- vector t(AQ)t(QB) -->\n		{{#showIntermediateVectors}}\n			<line\n				intro='fade' outro='fade'\n				class='guide-vector'\n				x1='{{ tAQ.x }}'\n				y1='{{ tAQ.y }}'\n				x2='{{ tQB.x }}'\n				y2='{{ tQB.y }}'\n			/>\n		{{/showIntermediateVectors}}\n\n\n		<!-- direction of travel hint -->\n		{{#showTrajectoryHint}}\n			<g intro='fade' outro='fade'>\n				<polygon class='trajectory-hint' points='{{tAQ.x}},{{tAQ.y}} {{tQB.x}},{{tAQ.y}} {{tQB.x}},{{tQB.y}}'/>\n\n				<!-- x -->\n				<text x='{{( ( tAQ.x + tQB.x ) / 2 )}}' y='{{( tAQ.y + ( tQB.y > tAQ.y ? -20 : 20 ) )}}'>x</text>\n\n				<!-- y -->\n				<text x='{{( tQB.x + 20 )}}' y='{{( ( tAQ.y + tQB.y ) / 2 )}}'>y</text>\n			</g>\n		{{/showTrajectoryHint}}\n\n\n		{{#showTrajectoryHint}}\n			<g intro='fade' outro='fade' transform='translate({{pythagoras.origin.x}},{{pythagoras.origin.y}})'>\n				<polygon class='trajectory-hint-shadow' points='0,0 {{ pythagoras.a }},0 {{ pythagoras.a }},{{ pythagoras.b }}'/>\n\n				<!-- path for c -->\n				<path id='pythagoras-path' d='M0,0 L{{(pythagoras.a)}},{{(pythagoras.b)}}'/>\n\n				{{^showNormalised}}\n					<g intro='fade' outro='fade'>\n						<!-- a -->\n						<text x='{{( pythagoras.a / 2 )}}' y='{{( pythagoras.b > 0 ? -20 : 20 )}}'>a: {{( Math.round( pythagoras.a ) )}}</text>\n\n						<!-- b -->\n						<text x='{{( pythagoras.a + 10 )}}' y='{{( pythagoras.b / 2 )}}' style='text-anchor: start'>b: {{( Math.round( pythagoras.b ) )}}</text>\n\n						<!-- c -->\n						<text style='text-anchor: middle; alignment-baseline: middle'>\n							<textPath xlink:href='#pythagoras-path' startOffset='50%'>\n								<tspan dy='{{( pythagoras.b > 0 ? 30 : -15 )}}'>c: {{( Math.round( pythagoras.c ) )}}</tspan>\n							</textPath>\n						</text>\n					</g>\n				{{/showNormalised}}\n\n				{{#showNormalised}}\n					<g intro='fade' outro='fade'>\n						<!-- a -->\n						<text x='{{( pythagoras.a / 2 )}}' y='{{( pythagoras.b > 0 ? -20 : 20 )}}'>a: {{( ( pythagoras.a / pythagoras.c ).toFixed(2) )}}</text>\n\n						<!-- b -->\n						<text x='{{( pythagoras.a + 10 )}}' y='{{( pythagoras.b / 2 )}}' style='text-anchor: start'>b: {{( ( pythagoras.b / pythagoras.c ).toFixed(2) )}}</text>\n\n						<!-- c -->\n						<text style='text-anchor: middle; alignment-baseline: middle'>\n							<textPath xlink:href='#pythagoras-path' startOffset='50%'>\n								<tspan dy='{{( pythagoras.b > 0 ? 30 : -15 )}}'>c: 1</tspan>\n							</textPath>\n						</text>\n					</g>\n				{{/showNormalised}}\n			</g>\n		{{/showTrajectoryHint}}\n\n\n		<!-- curve AQB -->\n		{{#showGuideCurve}}\n			<path intro='fade' outro='fade' class='guide-curve' d='M{{A.x}},{{A.y}} Q{{Q.x}},{{Q.y}} {{B.x}},{{B.y}}'/>\n		{{/showGuideCurve}}\n\n\n		<!-- vector At(AQ) -->\n		{{#showIntermediateVectors}}\n			<line intro='fade' outro='fade' class='intermediate-vector' x1='{{A.x}}' y1='{{A.y}}' x2='{{ tAQ.x }}' y2='{{ tAQ.y }}' />\n\n			<!-- vector t(AQ)t(t(AQ)t(QB)) -->\n			<line\n				intro='fade' outro='fade'\n				class='intermediate-vector'\n				x1='{{ tAQ.x }}'\n				y1='{{ tAQ.y }}'\n				x2='{{ Z.x }}'\n				y2='{{ Z.y }}'\n			/>\n		{{/showIntermediateVectors}}\n\n\n\n		<!-- curve At(AQ)Z -->\n		{{#showIntermediateCurve}}\n			<path intro='fade' outro='fade' class='main-curve' d='M{{A.x}},{{A.y}} Q{{tAQ.x}},{{tAQ.y}} {{Z.x}},{{Z.y}}'/>\n		{{/showIntermediateCurve}}\n		\n\n		\n		<!-- point A -->\n		<g transform='translate({{A.x}},{{A.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:A'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='40'>A</text>{{/showLabels}}\n		</g>\n\n		<!-- point B -->\n		<g transform='translate({{B.x}},{{B.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:B'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='40'>B</text>{{/showLabels}}\n		</g>\n\n		<!-- point Q -->\n		<g transform='translate({{Q.x}},{{Q.y}})'>\n			{{#showNodes}}<circle intro='fade' outro='fade' class='node' r='10' proxy-mousedown='drag:Q'/>{{/showNodes}}\n			{{#showLabels}}<text intro='fade' outro='fade' y='-40'>Q</text>{{/showLabels}}\n		</g>\n\n\n\n		{{#showIntermediatePoints}}\n			<!-- point t(AQ) -->\n			<g intro='fade' outro='fade' transform='translate({{ tAQ.x }},{{ tAQ.y }})'>\n				<circle class='intermediate-node' r='5'/>\n				{{#showLabels}}<text intro='fade' outro='fade' x='-20' style='text-anchor: end;'>t(AQ)</text>{{/showLabels}}\n			</g>\n\n\n			<!-- point t(QB) -->\n			<g intro='fade' outro='fade' transform='translate({{ tQB.x }},{{ tQB.y }})'>\n				<circle class='intermediate-node' r='5'/>\n				{{#showLabels}}<text intro='fade' outro='fade' x='20' style='text-anchor: start;'>t(QB)</text>{{/showLabels}}\n			</g>\n\n			<!-- point t(t(AQ)t(QB)) -->\n			<g intro='fade' outro='fade' transform='translate({{ Z.x }},{{ Z.y }})'>\n				<circle class='intermediate-node' r='5'/>\n			</g>\n		{{/showIntermediatePoints}}\n\n\n\n\n\n\n\n		<!-- direction of travel -->\n		{{#showTrajectory}}\n		<line\n			intro='fade' outro='fade'\n			class='trajectory'\n			x1='{{Z.x}}' y1='{{Z.y}}'\n			x2='{{( Z.x + ( exaggeration * direction.x ) )}}'\n			y2='{{( Z.y + ( exaggeration * direction.y ) )}}'\n		/>\n		{{/showTrajectory}}\n\n\n\n		<!-- arrowhead center -->\n		{{#showArrowheadBase}}\n			<circle intro='fade' outro='fade' fill='red' r='5' cx='{{arrowhead.center.x}}' cy='{{arrowhead.center.y}}'/>\n		{{/showArrowheadBase}}\n\n		{{#showCrossbars}}\n			<line\n				intro='fade' outro='fade'\n				class='cross'\n				x1='{{arrowhead.po.x}}' y1='{{arrowhead.po.y}}'\n				x2='{{arrowhead.so.x}}' y2='{{arrowhead.so.y}}'\n			/>\n\n\n			<!-- midpoint -->\n			<line\n				intro='fade' outro='fade'\n				class='cross'\n				x1='{{approximation_midpoint_port.x}}' y1='{{approximation_midpoint_port.y}}'\n				x2='{{approximation_midpoint_starboard.x}}' y2='{{approximation_midpoint_starboard.y}}'\n			/>\n\n			<circle intro='fade' outro='fade' fill='red' r='5' cx='{{midpoint_Z.x}}' cy='{{midpoint_Z.y}}'/>\n		{{/showCrossbars}}\n\n\n		{{#showApproximationOutline}}\n			<path intro='fade' outro='fade' class='approximation-outline' d='M{{A.x}},{{A.y}} Q{{approximation_midpoint_port.x}},{{approximation_midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{approximation_midpoint_starboard.x}},{{approximation_midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showApproximationOutline}}\n\n		{{#showApproximation}}\n			<path intro='fade' outro='fade' class='approximation' d='M{{A.x}},{{A.y}} Q{{approximation_midpoint_port.x}},{{approximation_midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{approximation_midpoint_starboard.x}},{{approximation_midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showApproximation}}\n\n		{{#showResultOutline}}\n			<path intro='fade' outro='fade' class='result-outline' d='M{{A.x}},{{A.y}} Q{{midpoint_port.x}},{{midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{midpoint_starboard.x}},{{midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showResultOutline}}\n\n		{{#showResult}}\n			<path intro='fade' outro='fade' class='result' d='M{{A.x}},{{A.y}} Q{{midpoint_port.x}},{{midpoint_port.y}} {{arrowhead.pi.x}},{{arrowhead.pi.y}} L{{arrowhead.po.x}},{{arrowhead.po.y}} {{Z.x}},{{Z.y}} {{arrowhead.so.x}},{{arrowhead.so.y}} {{arrowhead.si.x}},{{arrowhead.si.y}} Q{{midpoint_starboard.x}},{{midpoint_starboard.y}} {{A.x}},{{A.y}} Z'/>\n		{{/showResult}}\n\n	</svg>\n\n	<div class='sidebar-controls-outer'>\n		<div class='sidebar-controls-inner'>\n			<h3>Show</h3>\n\n			<label><input type='checkbox' checked='{{showNodes}}'> nodes</label>\n			<label><input type='checkbox' checked='{{showLabels}}'> labels</label>\n			<label><input type='checkbox' checked='{{showGuideVectors}}'> guide vectors</label>\n			<label><input type='checkbox' checked='{{showGuideCurve}}'> guide curve</label>\n			<label><input type='checkbox' checked='{{showIntermediatePoints}}'> intermediate points</label>\n			<label><input type='checkbox' checked='{{showIntermediateVectors}}'> intermediate vectors</label>\n			<label><input type='checkbox' checked='{{showIntermediateCurve}}'> intermediate curve</label>\n			<label><input type='checkbox' checked='{{showTrajectory}}'> trajectory</label>\n			<label><input type='checkbox' checked='{{showTrajectoryHint}}'> trajectory hint</label>\n			<label><input type='checkbox' checked='{{showNormalised}}'> normalise trajectory vector</label>\n			<label><input type='checkbox' checked='{{showArrowheadBase}}'> arrowhead base</label>\n			<label><input type='checkbox' checked='{{showCrossbars}}'> cross bars</label>\n			<!--<label><input type='checkbox' checked='{{showApproximationOutline}}'> approximation outline</label>-->\n			<label><input type='checkbox' checked='{{showApproximation}}'> approximation</label>\n			<!--<label><input type='checkbox' checked='{{showResultOutline}}'> result outline</label>-->\n			<label><input type='checkbox' checked='{{showResult}}'> result</label>\n\n			<h3>Thickness</h3>\n			<input type='range' min='1' max='70' step='0.1' value='{{thickness}}'>\n			<label><input type='checkbox' checked='{{varyThickness}}'> vary with time</label>\n		</div>\n	</div>\n\n	<div class='controls'>\n		<label class='slider'><input type='range' value='{{t}}' min='0' max='1' step='0.001'/> <span>t = {{( t.toFixed( 2 ) )}}</span></label>\n	</div>\n</div>"},{styles:".slide {\n	color: white;\n}\n\n.background {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background-color: black;\n}\n\n.background-image {\n	background-image: url(files/images/takeaway.jpg);\n	opacity: 0.4;\n}",stages:6,slide:"<div class='background' intro='fade' outro='fade'></div>\n<div class='background-image' intro='fade:{\"delay\":500}' outro='fade'></div>\n\n<div class='header' intro='fade' outro='fade'>\n	<h1>Takeaways</h1>\n</div>\n\n<div class='content' intro='fade' outro='fade'>\n	<ul>\n		{{#( stage >= 1 )}}\n			<li intro='fade' outro='fade'>Don't settle for merely informing your audience &ndash; delight them, with presentations that are <em>beautiful</em>, <em>understandable</em>, and <em>alive</em></li>\n		{{/()}}\n\n		{{#( stage >= 2 )}}\n			<li intro='fade' outro='fade'>Computers are stupid, and lack aesthetic judgment. We have to guide them. Don't rely on the default settings!</li>\n		{{/()}}\n\n		{{#( stage >= 3 )}}\n			<li intro='fade' outro='fade'>Tricky problems are the only ones worth solving</li>\n		{{/()}}\n\n		{{#( stage >= 4 )}}\n			<li intro='fade' outro='fade'>Look everywhere for inspiration, not just best practice in your own field</li>\n		{{/()}}\n\n		{{#( stage >= 5 )}}\n			<li intro='fade' outro='fade'>Learn SVG!</li>\n		{{/()}}\n	</ul>\n</div>\n\n<div class='credit'>\n	<a href='http://www.flickr.com/photos/avlxyz/163311096/'>Flickr / avlxyz</a>\n</div>",images:["files/images/takeaway.jpg"]},{styles:".content {\n	text-align: center;\n}\n\nh1 {\n	display: inline-block;\n	font-size: 3em;\n	margin: 0 0 2em 0;\n	padding: 0 0 0.1em 0;\n	border-bottom: 1px solid #eee;\n}\n\nh2 {\n	margin: 0.5em 0 0 0;\n}",slide:"<div class='content' intro='fade' outro='fade'>\n	<h1 class='end'>Thank you</h1>\n\n	<p class='link'>slides: <a href='http://rich-harris.co.uk/engineering-delight'>rich-harris.co.uk/engineering-delight</a></p>\n	<p class='link'><a href='http://twitter.com/rich_harris'>@rich_harris</a></p>\n</div>"}]}
}()),define("controllers/router",[],function(){var n=/#\/([0-9]+)/;return function(t){var e;t.state.set("slideNum",0),e=function(){var e;(e=n.exec(window.location.hash))&&t.state.set("slideNum",+e[1])},window.addEventListener("hashchange",e),e(),t.state.observe("slideNum",function(n){isNaN(n)||(window.location.hash="/"+n)})}}),function(n){var t,e,i,r,a,o,s,l,d,c,h,u,p,f,g,m,v,y,b,w,x,k,_,A,N,z,O,E,C,S,M,T,L,j=n.document||null,F={},$={},B={},I={},Q=function(){},R={},P=/^\s+/,q=/\s+$/,V="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",D=1,H=2,U=3,Z=4,W=5,G=6,J=7,Y=8,X=9,K=10,nt=11,tt=12,et=20,it=21,rt=22,at=23,ot=24,st=26,lt=30,dt=31,ct=32,ht=33,ut=34,pt=35,ft=36,gt=40,mt={unset:!0},vt={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),g=Object.defineProperty,m=Object.defineProperties}catch(yt){g=function(n,t,e){n[t]=e.value},m=function(n,t){var e;for(e in t)t.hasOwnProperty(e)&&g(n,e,t[e])}}try{Object.create(null),v=Object.create,y=function(){return Object.create(null)}}catch(yt){v=function(){var n=function(){};return function(t,e){var i;return n.prototype=t,i=new n,e&&Object.defineProperties(i,e),i}}(),y=function(){return{}}}var bt,wt,xt,kt=function(n){return n.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()})};!function(){var n;j&&(n=j.createElement("div"),void 0!==n.style.transition?(wt="transition",xt="transitionend",bt=!0):void 0!==n.style.webkitTransition?(wt="webkitTransition",xt="webkitTransitionEnd",bt=!0):bt=!1)}(),function(n){var t=function(n,t,e){var i;if("string"==typeof t&&c(e)){if(i=n.get(t),void 0===i&&(i=0),c(i))n.set(t,i+e);else if(n.debug)throw new Error("Cannot add to a non-numeric value")}else if(n.debug)throw new Error("Bad arguments")};n.add=function(n,e){t(this,n,void 0===e?1:e)},n.subtract=function(n,e){t(this,n,void 0===e?-1:-e)},n.toggle=function(n){var t;if("string"==typeof n)t=this.get(n),this.set(n,!t);else if(this.debug)throw new Error("Bad arguments")}}(F),function(n){var e,i;n.animate=function(n,t,i){var r,a,o;if("object"==typeof n){i=t||{},o=[];for(r in n)n.hasOwnProperty(r)&&(o[o.length]=e(this,r,n[r],i));return{stop:function(){for(;o.length;)o.pop().stop()}}}return i=i||{},a=e(this,n,t,i),{stop:function(){a.stop()}}},i={stop:Q},e=function(n,e,r,a){var o,s,l,d,c;if(c=n.get(e),h(c,r))return i;for(d=E.animations.length;d--;)E.animations[d].keypath===e&&E.animations[d].stop();return a.easing&&(o="function"==typeof a.easing?a.easing:n.easing&&n.easing[a.easing]?n.easing[a.easing]:t.easing[a.easing],"function"!=typeof o&&(o=null)),s=void 0===a.duration?400:a.duration,l=new k({keypath:e,from:c,to:r,root:n,duration:s,easing:o,step:a.step,complete:a.complete}),E.push(l),n._animations[n._animations.length]=l,l}}(F),F.bind=function(n){var t=this._bound;-1===t.indexOf(n)&&(t[t.length]=n,n.init(this))},F.cancelFullscreen=function(){t.cancelFullscreen(this.el)},F.fire=function(n){var t,e,i,r=this._subs[n];if(r)for(t=Array.prototype.slice.call(arguments,1),e=0,i=r.length;i>e;e+=1)r[e].apply(this,t)},F.get=function(n){var t,e,i,r,a,s,d,c,h;if(!n)return this.data;if(t=this._cache,l(n)){if(!n.length)return this.data;i=n.slice(),r=i.join("."),h=!0}else{if(t.hasOwnProperty(n)&&t[n]!==mt)return t[n];i=o(n),r=i.join(".")}return!t.hasOwnProperty(r)||t[r]===mt||void 0===t[r]&&h?this._evaluators[r]?(c=this._evaluators[r].value,t[r]=c,c):(a=i.pop(),s=i.join("."),d=i.length?this.get(i):this.data,null!==d&&"object"==typeof d&&d!==mt?((e=this._cacheMap[s])?-1===e.indexOf(r)&&(e[e.length]=r):this._cacheMap[s]=[r],c=d[a],this.modifyArrays&&("("===r.charAt(0)||!l(c)||c._ractive&&c._ractive.setting||C(c,r,this)),t[r]=c,c):void 0):t[r]};var _t,At,Nt,zt,Ot,Et,Ct;_t=function(n){if(n.keypath)zt(n);else{var t=n.root._pendingResolution.indexOf(n);-1!==t&&n.root._pendingResolution.splice(t,1)}},At=function(n,t){var e,i;if(n.modifyArrays&&"("!==t.charAt(0)&&(e=n._cache[t],l(e)&&!e._ractive.setting&&S(e,t,n)),n._cache[t]=mt,i=n._cacheMap[t])for(;i.length;)At(n,i.pop())},Nt=function(n){var t,e,i,r,a,s,l,d;for(s=n.root,l=n.keypath,d=n.priority,t=s._deps[d]||(s._deps[d]={}),e=t[l]||(t[l]=[]),e[e.length]=n,i=o(l);i.length;)i.pop(),r=i.join("."),a=s._depsMap[r]||(s._depsMap[r]=[]),void 0===a[l]&&(a[l]=0,a[a.length]=l),a[l]+=1,l=r},zt=function(n){var t,e,i,r,a,s,l;for(a=n.root,s=n.keypath,l=n.priority,t=a._deps[l][s],t.splice(t.indexOf(n),1),e=o(s);e.length;)e.pop(),i=e.join("."),r=a._depsMap[i],r[s]-=1,r[s]||(r.splice(r.indexOf(s),1),r[s]=void 0),s=i},Ot=function(n,t,e){var i;for(i=0;i<n._deps.length;i+=1)St(n,t,i,e)};var St=function(n,t,e,i){var r,a,o,s;if(r=n._deps[e]){if(a=r[t])for(o=a.length;o--;)a[o].update();if(!i&&(s=n._depsMap[t]))for(o=s.length;o--;)St(n,s[o],e)}},Mt=function(n,t,e){var i,r,a;for(a=t.length,i=0;i<n._deps.length;i+=1)if(n._deps[i])for(r=a;r--;)St(n,t[r],i,e)};Et=function(n,t,e){var i,r,a,s,l,d;if("."===t)return e[e.length-1];if("."===t.charAt(0))return e[e.length-1]+t;for(i=o(t),r=i.pop(),e=e.concat();e.length;)if(a=e.pop(),s=o(a),l=n.get(s.concat(i)),"object"==typeof l&&null!==l&&l.hasOwnProperty(r)){d=a+"."+t;break}return d||void 0===n.get(t)||(d=t),d},Ct=function(n){for(var t,e;n._defEvals.length;)t=n._defEvals.pop(),t.update().deferred=!1;for(;n._defAttrs.length;)e=n._defAttrs.pop(),e.update().deferred=!1},F.link=function(n){var t=this;return function(e){t.set(n,e)}},function(n){var t,e;n.observe=function(n,e,i){var r,a=[];if("object"==typeof n){i=e;for(r in n)n.hasOwnProperty(r)&&(e=n[r],a[a.length]=t(this,r,e,i));return{cancel:function(){for(;a.length;)a.pop().cancel()}}}return t(this,n,e,i)},t=function(n,t,i,r){var a;return a=new e(n,t,i,r),r&&r.init===!1||a.update(),Nt(a),{cancel:function(){zt(a)}}},e=function(n,t,e,i){this.root=n,this.keypath=t,this.callback=e,this.priority=0,this.context=i&&i.context?i.context:n},e.prototype={update:function(){var n;if(n=this.root.get(this.keypath,!0),!h(n,this.value)){try{this.callback.call(this.context,n,this.value)}catch(t){if(this.root.debug)throw t}this.value=n}}}}(F),F.off=function(n,t){var e,i;t||(n?this._subs[n]=[]:this._subs={}),e=this._subs[n],e&&(i=e.indexOf(t),-1!==i&&e.splice(i,1))},F.on=function(n,t){var e,i,r=this;if("object"==typeof n){e=[];for(i in n)n.hasOwnProperty(i)&&(e[e.length]=this.on(i,n[i]));return{cancel:function(){for(;e.length;)e.pop().cancel()}}}return this._subs[n]?this._subs[n].push(t):this._subs[n]=[t],{cancel:function(){r.off(n,t)}}},F.render=function(n){var t,e;if(t=n.el?u(n.el):this.el,!t)throw new Error("You must specify a DOM element to render to");n.append||(t.innerHTML=""),this._transitionManager=e=Bt(this,n.complete),this.fragment=new b({descriptor:this.template,root:this,owner:this,parentNode:t}),t.appendChild(this.fragment.docFrag),this.ready=!0,this._transitionManager=null,e.ready=!0,e.active||e.complete()},F.requestFullscreen=function(){t.requestFullscreen(this.el)},function(n){var t,e;n.set=function(n,i,r){var a,s,l,c,h,u,p;if(s=[""],a=[],d(n)&&(r=i),u=this._transitionManager,this._transitionManager=p=Bt(this,r),d(n))for(l in n)n.hasOwnProperty(l)&&(h=o(l),c=h.join("."),i=n[l],t(this,c,h,i,a,s));else h=o(n),c=h.join("."),t(this,c,h,i,a,s);return a.length&&this._pendingResolution.length&&e(this),s.length&&Mt(this,s,!0),a.length&&Mt(this,a),Ct(this),this._transitionManager=u,p.ready=!0,p.active||p.complete(),this.setting||(this.setting=!0,"object"==typeof n?this.fire("set",n):this.fire("set",n,i),this.setting=!1),this},t=function(n,t,e,i,r,a){var o,s,l,d;if(d=e.slice(),o=n.get(t),o!==i){for(l=n.data;e.length>1;)s=e.shift(),l[s]||(l[s]=/^\s*[0-9]+\s*$/.test(e[0])?[]:{}),l=l[s];s=e[0],l[s]=i}else if("object"!=typeof i)return;for(At(n,t),r[r.length]=t;d.length>1;)d.pop(),t=d.join("."),-1===a.indexOf(t)&&(a[a.length]=t)},e=function(n){var t,e,i;for(t=n._pendingResolution.length;t--;)e=n._pendingResolution.splice(t,1)[0],(i=Et(n,e.ref,e.contextStack))?e.resolve(i):n._pendingResolution[n._pendingResolution.length]=e}}(F),F.teardown=function(n){var t,e,i;for(this.fire("teardown"),i=this._transitionManager,this._transitionManager=e=Bt(this,n),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(t in this._cache)At(this,t);for(;this._bound.length;)this.unbind(this._bound.pop());this._transitionManager=i,e.ready=!0,e.active||e.complete()},F.toggleFullscreen=function(){t.isFullscreen(this.el)?this.cancelFullscreen():this.requestFullscreen()},F.unbind=function(n){var t,e=this._bound;t=e.indexOf(n),-1!==t&&(e.splice(t,1),n.teardown(this))},F.update=function(n,t){var e,i;return"function"==typeof n&&(t=n),i=this._transitionManager,this._transitionManager=e=Bt(this,t),At(this,n||""),Ot(this,n||""),Ct(this),this._transitionManager=i,e.ready=!0,e.active||e.complete(),"string"==typeof n?this.fire("update",n):this.fire("update"),this},$.backbone=function(n,t){var e,i,r,a,o,s,l;return t&&(t+=".",o=new RegExp("^"+t.replace(/\./g,"\\.")),s=t.length),{init:function(d){t?(l=function(n){var e,i;i={};for(e in n)n.hasOwnProperty(e)&&(i[t+e]=n[e]);return i},a=function(n){e||(i=!0,d.set(l(n.changed)),i=!1)},r=function(t,r){i||o.test(t)&&(e=!0,n.set(t.substring(s),r),e=!1)}):(a=function(n){e||(i=!0,d.set(n.changed),i=!1)},r=function(t,r){i||(e=!0,n.set(t,r),e=!1)}),n.on("change",a),d.on("set",r),d.set(t?l(n.attributes):n.attributes)},teardown:function(t){n.off("change",a),t.off("set",r)}}},$.statesman=function(n,t){var e,i,r,a,o,s,l;return t&&(t+=".",o=new RegExp("^"+t.replace(/\./g,"\\.")),s=t.length,l=function(n){var e,i;if(n){i={};for(e in n)n.hasOwnProperty(e)&&(i[t+e]=n[e]);return i}}),{init:function(d){var c;t?(a=function(n){var t;e||(i=!0,t=l(n),console.log("setting view",t),d.set(t),i=!1)},d.twoway&&(r=function(t,r){i||o.test(t)&&(e=!0,n.set(t.substring(s),r),e=!1)})):(a=function(n){e||(i=!0,d.set(n),i=!1)},d.twoway&&(r=function(t,r){i||(e=!0,n.set(t,r),e=!1)})),n.on("change",a),d.twoway&&d.on("set",r),c=t?l(n.get()):n.get(),c&&d.set(t?l(n.get()):n.get())},teardown:function(t){n.off("change",a),t.off("set",r)}}},e={linear:function(n){return n},easeIn:function(n){return Math.pow(n,3)},easeOut:function(n){return Math.pow(n-1,3)+1},easeInOut:function(n){return(n/=.5)<1?.5*Math.pow(n,3):.5*(Math.pow(n-2,3)+2)}},B.tap=function(n,t){var e,i,r,a;return r=5,a=400,e=function(n){var e,i,o,s,l,d;i=n.clientX,o=n.clientY,e=this,s=function(n){t({node:e,original:n}),d()},l=function(n){(Math.abs(n.clientX-i)>=r||Math.abs(n.clientY-o)>=r)&&d()},d=function(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s)},window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),setTimeout(d,a)},n.addEventListener("mousedown",e),i=function(n){var e,i,o,s,l,d,c,h;1===n.touches.length&&(s=n.touches[0],i=s.clientX,o=s.clientY,e=this,l=s.identifier,c=function(n){var i;i=n.changedTouches[0],i.identifier!==l&&h(),n.preventDefault(),t({node:e,original:n}),h()},d=function(n){var t;(1!==n.touches.length||n.touches[0].identifier!==l)&&h(),t=n.touches[0],(Math.abs(t.clientX-i)>=r||Math.abs(t.clientY-o)>=r)&&h()},h=function(){window.removeEventListener("touchmove",d),window.removeEventListener("touchend",c),window.removeEventListener("touchcancel",h)},window.addEventListener("touchmove",d),window.addEventListener("touchend",c),window.addEventListener("touchcancel",h),setTimeout(h,a))},n.addEventListener("touchstart",i),{teardown:function(){n.removeEventListener("mousedown",e),n.removeEventListener("touchstart",i)}}},function(){var n,e,r,a,o,s,l,c,h,u,p,f,g;i=function(n){var e,i;return e=this,i=function(n){u(this,i,n||{})},i.prototype=v(e.prototype),e!==t&&a(i,e),s(i,n),l(i),c(i,n),h(i),i.extend=e.extend,i},p=["data","partials","transitions","eventDefinitions"],f=["el","template","complete","modifyArrays","twoway","lazy","append","preserveWhitespace","sanitize"],g=p.concat(f),a=function(n,t){p.forEach(function(i){t[i]&&(n[i]=e(t[i]))}),f.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])})},o=function(n,t){return/_super/.test(n)?function(){var e=this._super;this._super=t,n.apply(this,arguments),this._super=e}:n},s=function(n,t){var e,i;p.forEach(function(e){var i=t[e];i&&(n[e]?r(n[e],i):n[e]=i)}),f.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])});for(e in t)t.hasOwnProperty(e)&&!n.prototype.hasOwnProperty(e)&&-1===g.indexOf(e)&&(i=t[e],n.prototype[e]="function"==typeof i&&"function"==typeof n.prototype[e]?o(i,n.prototype[e]):i)},l=function(n){var e;if("string"==typeof n.template){if(!t.parse)throw new Error(V);if("#"===n.template.charAt(0)){if(e=document.getElementById(n.template.substring(1)),!e||"SCRIPT"!==e.tagName)throw new Error("Could not find template element ("+n.template+")");n.template=t.parse(e.innerHTML,n)}else n.template=t.parse(n.template,n)}},c=function(n,t){d(n.template)&&(n.partials||(n.partials={}),r(n.partials,n.template.partials),t.partials&&r(n.partials,t.partials),n.template=n.template.template)},h=function(n){var e,i;if(n.partials)for(e in n.partials)if(n.partials.hasOwnProperty(e)){if("string"==typeof n.partials[e]){if(!t.parse)throw new Error(V);i=t.parse(n.partials[e],n)}else i=n.partials[e];n.partials[e]=i}},u=function(i,r,a){!a.template&&r.template&&(a.template=r.template),p.forEach(function(t){a[t]?n(a[t],r[t]):r[t]&&(a[t]=e(r[t]))}),f.forEach(function(n){void 0===a[n]&&void 0!==r[n]&&(a[n]=r[n])}),t.call(i,a),i.init&&i.init.call(i,a)},n=function(n,t){var e;for(e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])},e=function(n){var t,e={};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},r=function(n,t){var e;for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}}(),r=function(n,e){return c(n)&&c(e)?t.interpolators.number(+n,+e):l(n)&&l(e)?t.interpolators.array(n,e):d(n)&&d(e)?t.interpolators.object(n,e):function(){return e}},a={number:function(n,t){var e=t-n;return e?function(t){return n+t*e}:function(){return n}},array:function(n,e){var i,r,a,o;for(i=[],r=[],o=a=Math.min(n.length,e.length);o--;)r[o]=t.interpolate(n[o],e[o]);for(o=a;o<n.length;o+=1)i[o]=n[o];for(o=a;o<e.length;o+=1)i[o]=e[o];return function(n){for(var t=a;t--;)i[t]=r[t](n);return i}},object:function(n,e){var i,r,a,o,s=[];a={},r={};for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?(s[s.length]=o,r[o]=t.interpolate(n[o],e[o])):a[o]=n[o]);for(o in e)e.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(a[o]=e[o]);return i=s.length,function(n){for(var t,e=i;e--;)t=s[e],a[t]=r[t](n);return a}}};var Tt=y();m(Tt,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}},eventDefinitions:{enumerable:!0,value:{}}}),t=function(n){var e,i,r,a,o,s;for(e in Tt)n.hasOwnProperty(e)||(n[e]="object"==typeof Tt[e]?{}:Tt[e]);if(m(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t,e;return t=0|16*Math.random(),e="x"==n?t:8|3&t,e.toString(16)})},_subs:{value:y()},_cache:{value:{}},_cacheMap:{value:y()},_deps:{value:[]},_depsMap:{value:y()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_proxies:{value:y()},_customProxies:{value:y()},_evaluators:{value:y()},_bound:{value:[]},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}}}),this.modifyArrays=n.modifyArrays,this.twoway=n.twoway,this.lazy=n.lazy,this.debug=n.debug,this.el=u(n.el),this.data=n.data||{},this.partials={},this.transitions=n.transitions,this.eventDefinitions=n.eventDefinitions,n.bindings)if(l(n.bindings))for(r=0;r<n.bindings.length;r+=1)this.bind(n.bindings[r]);else this.bind(n.bindings);if(a=n.template,"string"==typeof a){if(!t.parse)throw new Error(V);if("#"===a.charAt(0)){if(o=j.getElementById(a.substring(1)),!o)throw new Error("Could not find template element ("+a+")");s=t.parse(o.innerHTML,n)}else s=t.parse(a,n)}else s=a;if(d(s)&&(this.partials=s.partials,s=s.template),s&&1===s.length&&"string"==typeof s[0]&&(s=s[0]),this.template=s,n.partials)for(e in n.partials)if(n.partials.hasOwnProperty(e)){if(i=n.partials[e],"string"==typeof i){if(!t.parse)throw new Error(V);i=t.parse(i,n)}this.partials[e]=i}for(e in this.partials)this.partials.hasOwnProperty(e)&&1===this.partials[e].length&&"string"==typeof this.partials[e][0]&&(this.partials[e]=this.partials[e][0]);this.el&&this.render({el:this.el,append:n.append,complete:n.complete})},function(){var n,t,i,r;n=function(n,t){var e,i={};for(e=t.length;e--;)i[t[e]]=n[t[e]];return i},t=function(n,t,e,i){for(var r,a=t.length;a--;)r=t[a],n.style[r]=e&&e[r]?"function"==typeof e[r]?e[r](i):e[r]:0},i=function(n,t){var e;if(!t)return n;for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},r=function(r,a,o,s){return"string"==typeof r&&(r=[r]),function(l,d,c,h,u){var p,f,g,m,v,y,b,w,x,k,_;c=Lt(c),y=c.duration||a.duration,e=kt(c.easing||a.easing),b=(c.delay||a.delay||0)+(c.stagger||a.stagger||0)*h.i,w=u?o:s,x=u?s:o,f=window.getComputedStyle(l),v=l.getAttribute("style"),u?(k=l.style.position,_=l.style.visibility,l.style.position="absolute",l.style.visibility="hidden",setTimeout(function(){g=n(f,r),w=o,x=i(g,s),l.style.position=k,l.style.visibility=_,t(l,r,w,c),setTimeout(m,0)},b)):setTimeout(function(){g=n(f,r),w=i(g,s),x=o,t(l,r,w,c),setTimeout(m,0)},b),m=function(){l.style[wt+"Duration"]=y/1e3+"s",l.style[wt+"Properties"]=r.map(kt).join(","),l.style[wt+"TimingFunction"]=e,p=function(){l.removeEventListener(xt,p),u&&l.setAttribute("style",v||""),d()},l.addEventListener(xt,p),t(l,r,x,c)}}},I.slide=r(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","overflowY"],{duration:400,easing:"easeInOut"},{overflowY:"hidden"},{overflowY:"hidden"}),I.fade=r("opacity",{duration:300,easing:"linear"}),I.fly=r(["opacity","left","position"],{duration:400,easing:"easeOut"},{position:"relative",left:"-500px"},{position:"relative",left:0})}();var Lt=function(n){return"fast"===n?{duration:200}:"slow"===n?{duration:600}:c(n)?{duration:+n}:n||{}};!function(n){var t,e,i;e=function(n,t,r){var a,o;return 3===n.nodeType?(i(n,t,r),void 0):(a=Array.prototype.slice.call(n.childNodes),o=function(){return a.length?(e(a.shift(),o,r),void 0):(t(),void 0)},o(),void 0)},i=function(n,t,e){var i,r,a,o;return i=n._hiddenData,(r=i.length)?(o=0,a=setInterval(function(){var e,s,l,d,c;e=i.substr(0,o),s=i.substring(o),l=/^\w+/.exec(s),d=l?l[0].length:0,c=new Array(d+1).join(" "),n.data=e+c,o===r&&(clearInterval(a),delete n._hiddenData,t()),o+=1},e),void 0):(t(),void 0)},t=function(n,t,i){var r,a,o,s;i=Lt(i),r=i.interval||(i.speed?1e3/i.speed:i.duration?n.textContent.length/i.duration:4),a=n.getAttribute("style"),o=window.getComputedStyle(n),n.style.visibility="hidden",setTimeout(function(){var l,d,c;d=o.width,l=o.height,c=o.visibility,s(n),setTimeout(function(){n.style.width=d,n.style.height=l,n.style.visibility="visible",e(n,function(){n.setAttribute("style",a||""),t()},r)},i.delay||0)}),s=function(n){var t,e;if(3===n.nodeType)return n._hiddenData=""+n.data,n.data="",void 0;for(t=Array.prototype.slice.call(n.childNodes),e=t.length;e--;)s(t[e])}},n.typewriter=t}(I),function(n){var t,e,i,r;if(j){if(n.fullscreenEnabled=j.fullscreenEnabled||j.mozFullScreenEnabled||j.webkitFullscreenEnabled,!n.fullscreenEnabled)return n.requestFullscreen=n.cancelFullscreen=Q,void 0;r=document.createElement("div"),r.requestFullscreen?t="requestFullscreen":r.mozRequestFullScreen?t="mozRequestFullScreen":r.webkitRequestFullscreen&&(t="webkitRequestFullscreen"),n.requestFullscreen=function(n){n[t]&&n[t]()},j.cancelFullscreen?e="cancelFullscreen":j.mozCancelFullScreen?e="mozCancelFullScreen":j.webkitCancelFullScreen&&(e="webkitCancelFullScreen"),n.cancelFullscreen=function(){j[e]()},void 0!==j.fullscreenElement?i="fullscreenElement":void 0!==document.mozFullScreenElement?i="mozFullScreenElement":void 0!==document.webkitFullscreenElement&&(i="webkitFullscreenElement"),n.isFullscreen=function(n){return n===j[i]}}}(t),k=function(n){var e;this.startTime=Date.now();for(e in n)n.hasOwnProperty(e)&&(this[e]=n[e]);this.interpolator=t.interpolate(this.from,this.to),this.running=!0},k.prototype={tick:function(){var n,t,e,i,r;return this.running?(i=Date.now(),n=i-this.startTime,n>=this.duration?(this.root.set(this.keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),r=this.root._animations.indexOf(this),-1===r&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(t=this.easing?this.easing(n/this.duration):n/this.duration,e=this.interpolator(t),this.root.set(this.keypath,e),this.step&&this.step(t,e),!0)):!1},stop:function(){var n;this.running=!1,n=this.root._animations.indexOf(this),-1===n&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(n,1)}},E={animations:[],tick:function(){var t,e;for(t=0;t<this.animations.length;t+=1)e=this.animations[t],e.tick()||this.animations.splice(t--,1);this.animations.length?n.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){E.tick()},push:function(n){this.animations[this.animations.length]=n,this.running||(this.running=!0,this.tick())}},function(n,t,e){var i;if(e.requestAnimationFrame)return p=e.requestAnimationFrame,f=e.cancelAnimationFrame,void 0;for(i=0;i<n.length&&!p;++i)p=e[n[i]+"RequestAnimationFrame"],f=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];p||(p=function(n){var i,r,a;return i=Date.now(),r=Math.max(0,16-(i-t)),a=e.setTimeout(function(){n(i+r)},r),t=i+r,a}),f||(f=function(n){e.clearTimeout(n)})}(["ms","moz","webkit","o"],0,n),function(){var n,t,e,i,r,a;C=function(n,e,i){var r,a,o;n._ractive?(r=n._ractive.roots,a=n._ractive.keypathsByGuid,a[i._guid]||(r[r.length]=i,a[i._guid]=[]),o=a[i._guid],-1===o.indexOf(e)&&(o[o.length]=e)):(g(n,"_ractive",{value:{roots:[i],keypathsByGuid:{}},configurable:!0}),n._ractive.keypathsByGuid[i._guid]=[e],t(n))},S=function(n,t,i){var r,a,o,s;if(!n._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=n._ractive.roots,a=n._ractive.keypathsByGuid,!a[i._guid])throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(o=a[i._guid],s=o.indexOf(t),-1===s)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");o.splice(s,1),o.length||(r.splice(r.indexOf(i),1),a[i._guid]=null),r.length||e(n)},n=function(n,t,e){var i,r,a,s,l,d;d=n._ractive.keypathsByGuid,i=function(n){for(var t=n.length;t--;)r(n[t])},r=function(n){var t=n._transitionManager;n._transitionManager=Bt(n,Q),a(n,d[n._guid]),n._transitionManager=t},a=function(n,t){for(var e=t.length;e--;)s(n,t[e])},s=function(n,i){var r,a,s,d,c,h,u;for(At(n,i),c=[],h=[],u=0;u<n._deps.length;u+=1)if(r=n._deps[u],r&&(a=r[i])){for(l(n,i,a,c,h),Ct(n);c.length;)c.pop().smartUpdate(t,e);for(;h.length;)h.pop().update()}for(Ct(n),d=[],s=o(i);s.length;)s.pop(),d[d.length]=s.join(".");d[d.length]=i+".length",Mt(n,d,!0)},l=function(n,t,e,i,r){var a,o;for(a=e.length;a--;)o=e[a],o.type===lt?o.update():o.keypath===t&&o.type===Z?i[i.length]=o:r[r.length]=o},i(n._ractive.roots)},i=[],a=["pop","push","reverse","shift","sort","splice","unshift"],a.forEach(function(t){var e=function(){var e=Array.prototype[t].apply(this,arguments);return this._ractive.setting=!0,n(this,t,arguments),this._ractive.setting=!1,e};g(i,t,{value:e})}),r={},r.__proto__?(t=function(n){n.__proto__=i},e=function(n){delete n._ractive,n.__proto__=Array.prototype}):(t=function(n){var t,e;for(t=a.length;t--;)e=a[t],g(n,e,{value:i[e]})},e=function(n){var t;for(t=a.length;t--;)delete n[a[t]];delete n._ractive})}(),function(n){var t,e;x=function(n,i,r,a,o){var s,l;for(this.root=n,this.keypath=i,this.fn=e(r,a.length),this.values=[],this.refs=[],s=a.length;s--;)l=a[s],l[0]?this.values[s]=l[1]:this.refs[this.refs.length]=new t(n,l[1],this,s,o);this.selfUpdating=this.refs.length<=1,this.update()},x.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var n;try{n=this.fn.apply(null,this.values)}catch(t){if(this.root.debug)throw t;n=void 0}return h(n,this.value)||(At(this.root,this.keypath),this.root._cache[this.keypath]=n,Ot(this.root,this.keypath),this.value=n),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();At(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var n=this.refs.length;n--;)this.refs[n].update();this.deferred&&(this.update(),this.deferred=!1)}},t=function(n,t,e,i,r){this.evaluator=e,this.keypath=t,this.root=n,this.argNum=i,this.type=lt,this.priority=r,this.value=e.values[i]=n.get(t),Nt(this)},t.prototype={update:function(){var n=this.root.get(this.keypath);h(n,this.value)||(this.evaluator.values[this.argNum]=n,this.evaluator.bubble(),this.value=n)},teardown:function(){zt(this)}},e=function(t,e){var i,r;if(t=t.replace(/❖/g,"_"),n[t])return n[t];for(r=[];e--;)r[e]="_"+e;return i=new Function(r.join(","),"return("+t+")"),n[t]=i,i}}({});var jt;!function(){var n,t;jt=function(t){var e,i,r,a,o;for(this.root=t.root,this.mustache=t,this.args=[],this.scouts=[],e=t.descriptor.x,o=t.parentFragment.indexRefs,this.str=e.s,r=this.unresolved=e.r?e.r.length:0,r||this.init(),i=0;r>i;i+=1)a=e.r[i],o&&void 0!==o[a]?this.resolveRef(i,!0,o[a]):this.scouts[this.scouts.length]=new n(this,a,t.contextStack,i)},jt.prototype={init:function(){this.keypath=t(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(n,t,e){this.args[n]=[t,e],--this.unresolved||this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new x(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},n=function(n,t,e,i){var r,a;a=this.root=n.root,r=Et(a,t,e),r?n.resolveRef(i,!1,r):(this.ref=t,this.argNum=i,this.resolver=n,this.contextStack=e,a._pendingResolution[a._pendingResolution.length]=this)},n.prototype={resolve:function(n){this.keypath=n,this.resolver.resolveRef(this.argNum,!1,n)},teardown:function(){this.keypath||_t(this)}},t=function(n,t){var e;return e=n.replace(/❖([0-9]+)/g,function(n,e){return t[e][1]}),"("+e.replace(/[\.\[\]]/g,"-")+")"}}();var Ft,$t=function(n,e,i,r,a){var o,s,l,d,c;"string"==typeof n?o=n:(o=n.n,n.a?s=n.a:n.d&&(l=new w({descriptor:n.d,root:e,owner:i,contextStack:parentFragment.contextStack}),s=l.toJson(),l.teardown())),c=e.transitions[o]||t.transitions[o],c&&(d=e._transitionManager,d.push(),c.call(e,i.node,d.pop,s,d.info,a))};!function(){var n,e;Ft=function(i,r){var a,o;if(o=n(i,r))return o;if(o=n(t,r))return o;if(a=j.getElementById(r),a&&"SCRIPT"===a.tagName){if(!t.parse)throw new Error(V);t.partials[r]=t.parse(a.innerHTML)}return o=t.partials[r],o?e(o):(i.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+r+'"'),[])},n=function(n,i){if(n.partials[i]){if("string"==typeof n.partials[i]){if(!t.parse)throw new Error(V);n.partials[i]=t.parse(n.partials[i])}return e(n.partials[i])}},e=function(n){return 1===n.length&&"string"==typeof n[0]?n[0]:n}}(),z=function(n,t){var e,i,r,a,o;if(n.owner=t.owner,n.root=t.root,n.parentNode=t.parentNode,n.contextStack=t.contextStack||[],n.owner.type===Z&&(n.index=t.index),n.owner.parentFragment&&(a=n.owner.parentFragment.indexRefs)){n.indexRefs=y();for(o in a)n.indexRefs[o]=a[o]}for(t.indexRef&&(n.indexRefs||(n.indexRefs={}),n.indexRefs[t.indexRef]=t.index),n.items=[],r={parentFragment:n},e=t.descriptor?t.descriptor.length:0,i=0;e>i;i+=1)r.descriptor=t.descriptor[i],r.index=i,n.items[n.items.length]=n.createItem(r)},_=function(n,t){var e,i,r;r=n.parentFragment=t.parentFragment,n.root=r.root,n.contextStack=r.contextStack,n.descriptor=t.descriptor,n.index=t.index||0,n.priority=t.descriptor.p||0,r.parentNode&&(n.parentNode=r.parentNode),n.type=t.descriptor.t,t.descriptor.r&&(r.indexRefs&&void 0!==r.indexRefs[t.descriptor.r]?(i=r.indexRefs[t.descriptor.r],n.indexRef=t.descriptor.r,n.refIndex=i,n.render(n.refIndex)):(e=Et(n.root,t.descriptor.r,n.contextStack),e?n.resolve(e):(n.ref=t.descriptor.r,n.root._pendingResolution[n.root._pendingResolution.length]=n,n.descriptor.n&&n.render(!1)))),t.descriptor.x&&(n.expressionResolver=new jt(n))},A=function(){var n;n=this.root.get(this.keypath,!0),h(n,this.value)||(this.render(n),this.value=n)},N=function(n){this.keypath=n,Nt(this),this.update(),this.expressionResolver&&(this.expressionResolver=null)},function(){var n,t,e;O=function(i,r){var a;return a={descriptor:i.descriptor.f,root:i.root,parentNode:i.parentNode,owner:i},i.descriptor.n?(e(i,r,!0,a),void 0):(l(r)?n(i,r,a):d(r)?t(i,a):e(i,r,!1,a),void 0)},n=function(n,t,e){var i,r;if(t.length<n.length)for(r=n.fragments.splice(t.length,n.length-t.length);r.length;)r.pop().teardown(!0);else if(t.length>n.length)for(i=n.length;i<t.length;i+=1)e.contextStack=n.contextStack.concat(n.keypath+"."+i),e.index=i,n.descriptor.i&&(e.indexRef=n.descriptor.i),n.fragments[i]=n.createFragment(e);n.length=t.length},t=function(n,t){n.length||(t.contextStack=n.contextStack.concat(n.keypath),t.index=0,n.fragments[0]=n.createFragment(t),n.length=1)},e=function(n,t,e,i){var r,a,o;if(a=l(t)&&0===t.length,r=e?a||!t:t&&!a){if(n.length||(i.contextStack=n.contextStack,i.index=0,n.fragments[0]=n.createFragment(i),n.length=1),n.length>1)for(o=n.fragments.splice(1);o.length;)o.pop().teardown(!0)}else n.length&&(n.teardownFragments(!0),n.length=0)}}(),function(){var n,e,i,r,a,o,s,l,d;e={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},n=function(n,t){var e,i=[];for(e=j.createElement("div"),e.innerHTML=n;e.firstChild;)i[i.length]=e.firstChild,t.appendChild(e.firstChild);return i},b=function(t){return this.docFrag=j.createDocumentFragment(),"string"==typeof t.descriptor?(this.nodes=n(t.descriptor,this.docFrag),void 0):(z(this,t),void 0)},b.prototype={createItem:function(n){if("string"==typeof n.descriptor)return new i(n,this.docFrag);switch(n.descriptor.t){case H:return new s(n,this.docFrag);case Z:return new d(n,this.docFrag);case U:return new l(n,this.docFrag);case J:return new r(n,this.docFrag);case Y:return new a(n,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(n){var t;if(n&&this.nodes)for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);else if(this.items)for(;this.items.length;)this.items.pop().teardown(n)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(n){var t=n.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?null:this.owner.findNextNode(this)}},a=function(n,t){var e,i=this.parentFragment=n.parentFragment;this.type=Y,this.name=n.descriptor.r,e=Ft(i.root,n.descriptor.r),this.fragment=new b({descriptor:e,root:i.root,parentNode:i.parentNode,contextStack:i.contextStack,owner:this}),t.appendChild(this.fragment.docFrag)},a.prototype={findNextNode:function(){return this.parentFragment.findNextNode(this)},teardown:function(n){this.fragment.teardown(n)
}},i=function(n,t){this.type=D,this.node=j.createTextNode(n.descriptor),this.parentNode=n.parentFragment.parentNode,t.appendChild(this.node)},i.prototype={teardown:function(n){n&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},r=function(n,t){var e,i,r,a,s,l,d,c,h,u,p,f;if(this.type=J,e=this.parentFragment=n.parentFragment,i=this.descriptor=n.descriptor,this.root=f=e.root,this.parentNode=e.parentNode,this.index=n.index,this.eventListeners=[],this.customEventListeners=[],i.a&&i.a.xmlns){if(r=i.a.xmlns,"string"!=typeof r)throw new Error("Namespace attribute cannot contain mustaches")}else r="svg"===i.e.toLowerCase()?vt.svg:this.parentNode.namespaceURI;if(this.node=j.createElementNS(r,i.e),i.f&&("string"==typeof i.f&&this.node.namespaceURI===vt.html?this.node.innerHTML=i.f:(this.fragment=new b({descriptor:i.f,root:f,parentNode:this.node,contextStack:e.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),i.v)for(a in i.v)if(i.v.hasOwnProperty(a))for(s=a.split("-"),l=s.length;l--;)this.addEventProxy(s[l],i.v[a],e.contextStack);this.attributes=[],u=[];for(c in i.a)i.a.hasOwnProperty(c)&&(h=i.a[c],d=new o({element:this,name:c,value:void 0===h?null:h,root:f,parentNode:this.node,contextStack:e.contextStack}),this.attributes[this.attributes.length]=d,d.isBindable&&u.push(d),d.isTwowayNameAttr?p=d:d.update());for(;u.length;)u.pop().bind(this.root.lazy);p&&(p.updateViewModel(),p.update()),t.appendChild(this.node),i.t1&&$t(i.t1,f,this,e.contextStack,!0)},r.prototype={addEventProxy:function(n,e,i){var r,a,o,s,l,d,c,h=this.root;if(this.node._ractive||g(this.node,"_ractive",{value:{keypath:i.length?i[i.length-1]:"",index:this.parentFragment.indexRefs}}),r="string"==typeof e?e:e.n,c=n+"="+r,e.a?a=e.a:e.d&&(o=!0,a=new w({descriptor:e.d,root:this.root,owner:this,contextStack:i}),this.proxyFrags||(this.proxyFrags=[]),this.proxyFrags[this.proxyFrags.length]=a),void 0!==a){if(this.node._ractive[c])throw new Error("You cannot have two proxy events with the same trigger event ("+c+")");this.node._ractive[c]={dynamic:o,payload:a}}return(s=h.eventDefinitions[n]||t.eventDefinitions[n])?(h._customProxies[c]||(h._customProxies[c]=function(n){var t,e;if(!n.node)throw new Error("Proxy event definitions must fire events with a `node` property");n.keypath=n.node._ractive.keypath,n.context=h.get(n.keypath),n.index=n.node._ractive.index,n.node._ractive[c]&&(t=n.node._ractive[c],e=t.dynamic?t.payload.toJson():t.payload),h.fire(r,n,e)}),d=h._customProxies[c],l=s(this.node,d),this.customEventListeners[this.customEventListeners.length]=l,void 0):(void 0!==this.node["on"+n]&&h.debug&&console&&console.warn&&console.warn("Invalid event handler ("+n+")"),h._proxies[c]||(h._proxies[c]=function(n){var t,e,i={node:this,original:n,keypath:this._ractive.keypath,context:h.get(this._ractive.keypath),index:this._ractive.index};this._ractive&&this._ractive[c]&&(t=this._ractive[c],e=t.dynamic?t.payload.toJson():t.payload),h.fire(r,i,e)}),d=h._proxies[c],this.eventListeners[this.eventListeners.length]={n:n,h:d},this.node.addEventListener(n,d),void 0)},teardown:function(n){var t,e=this;for(e.fragment&&e.fragment.teardown(!1);e.attributes.length;)e.attributes.pop().teardown();for(;e.eventListeners.length;)t=e.eventListeners.pop(),e.node.removeEventListener(t.n,t.h);for(;e.customEventListeners.length;)e.customEventListeners.pop().teardown();if(this.proxyFrags)for(;this.proxyFrags.length;)this.proxyFrags.pop().teardown();this.descriptor.t2&&$t(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),n&&this.root._transitionManager.nodesToDetach.push(this.node)},firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){}},o=function(n){var t,i,r,a,o,s,l,d,c,h,u;if(t=n.name,i=n.value,r=t.indexOf(":"),-1!==r&&(a=t.substr(0,r),"xmlns"!==a&&(t=t.substring(r+1),this.namespace=vt[a],!this.namespace)))throw'Unknown namespace ("'+a+'")';if(null===i||"string"==typeof i)return this.namespace?n.parentNode.setAttributeNS(this.namespace,t,i):n.parentNode.setAttribute(t,i),"id"===t.toLowerCase()&&(n.root.nodes[i]=n.parentNode),this.name=t,this.value=i,void 0;for(this.root=n.root,this.element=n.element,this.parentNode=n.parentNode,this.name=t,this.lcName=t.toLowerCase(),this.namespace||n.parentNode.namespaceURI!==vt.html||(l=this.lcName,d=e[l]||l,void 0!==n.parentNode[d]&&(this.propertyName=d),("boolean"==typeof n.parentNode[d]||"value"===d)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new w({descriptor:i,root:this.root,owner:this,contextStack:n.contextStack}),this.selfUpdating=!0,c=this.fragment.items.length;c--;)if(h=this.fragment.items[c],h.type!==D){if(h.type!==H){this.selfUpdating=!1;break}if(u){this.selfUpdating=!1;break}u=!0}this.root.twoway&&(o=this.element.descriptor.e.toLowerCase(),s=!("name"!==d&&"value"!==d&&"checked"!==d||"input"!==o&&"textarea"!==o&&"select"!==o)),s&&(this.isBindable=!0,"name"===d&&(this.isTwowayNameAttr=!0)),this.ready=!0},o.prototype={bind:function(n){var t,e,i,r,a=this,o=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==H||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;if(this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===o.tagName&&"value"===this.propertyName)for(t=o.getElementsByTagName("option"),r=t.length,i=0;r>i;i+=1)if(e=t[i],e.hasAttribute("selected")){this.root.set(this.keypath,e.value);break}"checkbox"===o.type||"radio"===o.type?"name"===this.propertyName?(o.name="{{"+this.keypath+"}}",this.updateViewModel=function(){o.checked&&a.root.set(a.keypath,o.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){a.root.set(a.keypath,o.checked)}):this.updateViewModel=function(){var n;n=o.value,"0"===n?n=0:""!==n&&(n=+n||n),a.root.set(a.keypath,n)},this.updateViewModel&&(this.twoway=!0,o.addEventListener("change",this.updateViewModel),o.addEventListener("click",this.updateViewModel),o.addEventListener("blur",this.updateViewModel),n||(o.addEventListener("keyup",this.updateViewModel),o.addEventListener("keydown",this.updateViewModel),o.addEventListener("keypress",this.updateViewModel),o.addEventListener("input",this.updateViewModel)))},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,"name"===this.propertyName&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var n,t;if(!this.ready)return this;if(this.twoway){if(t=this.lcName,n=this.interpolator.value,"name"===t&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=n===this.parentNode.value?!0:!1,this;if(j.activeElement===this.parentNode)return this}if(n=this.fragment.getValue(),void 0===n&&(n=""),n!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=n,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,n),this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[n]=this.parentNode),this.parentNode.setAttribute(this.name,n),this.value=n}return this}},s=function(n,t){this.type=H,this.node=j.createTextNode(""),t.appendChild(this.node),_(this,n)},s.prototype={update:A,resolve:N,teardown:function(n){_t(this),n&&this.parentNode.removeChild(this.node)},render:function(n){this.node.data=void 0===n?"":n},firstNode:function(){return this.node}},l=function(n,t){this.type=U,this.nodes=[],this.docFrag=j.createDocumentFragment(),this.initialising=!0,_(this,n),t.appendChild(this.docFrag),this.initialising=!1},l.prototype={update:A,resolve:N,teardown:function(n){if(n)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());_t(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(t){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());return void 0===t?(this.nodes=[],void 0):(this.nodes=n(t,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),void 0)}},d=function(n,t){this.type=Z,this.fragments=[],this.length=0,this.docFrag=j.createDocumentFragment(),this.initialising=!0,_(this,n),t.appendChild(this.docFrag),this.initialising=!1},d.prototype={update:A,resolve:N,smartUpdate:function(n,t){var e;("push"===n||"unshift"===n||"splice"===n)&&(e={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(e.indexRef=this.descriptor.i)),this[n]&&this[n](e,t)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(n,t){var e,i,r;for(e=this.length,i=e+t.length,r=e;i>r;r+=1)n.contextStack=this.contextStack.concat(this.keypath+"."+r),n.index=r,this.fragments[r]=this.createFragment(n);this.length+=t.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(n,t){this.splice(n,[0,0].concat(new Array(t.length)))},splice:function(n,t){var e,i,r,a,o,s,l,d,h;if(t.length&&(s=+(t[0]<0?this.length+t[0]:t[0]),i=Math.max(0,t.length-2),r=void 0!==t[1]?t[1]:this.length-s,a=i-r)){if(0>a){for(l=s-a,o=s;l>o;o+=1)this.fragments[o].teardown(!0);this.fragments.splice(s,-a)}else{for(l=s+a,e=this.fragments[s]?this.fragments[s].firstNode():this.parentFragment.findNextNode(this),d=[s,0].concat(new Array(a)),this.fragments.splice.apply(this.fragments,d),o=s;l>o;o+=1)n.contextStack=this.contextStack.concat(this.keypath+"."+o),n.index=o,this.fragments[o]=this.createFragment(n);this.parentNode.insertBefore(this.docFrag,e)}this.length+=a,h=s+i,c(this.root,this,h,this.length,a)}},teardown:function(n){this.teardownFragments(n),_t(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(n){return this.fragments[n.index+1]?this.fragments[n.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(n){for(;this.fragments.length;)this.fragments.shift().teardown(n)},render:function(n){O(this,n),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(n){var t=new b(n);return this.docFrag.appendChild(t.docFrag),t}};var c=function(n,t,e,i,r){var a,o,s,l,d,c,u;for(s=t.descriptor.i,a=e;i>a;a+=1)o=t.fragments[a],l=a-r,d=a,c=t.keypath+"."+(a-r),u=t.keypath+"."+a,o.index+=r,h(o,s,l,d,r,c,u);Ct(n)},h=function(n,t,e,i,r,a,o){var s,l,d;for(n.indexRefs&&void 0!==n.indexRefs[t]&&(n.indexRefs[t]=i),s=n.contextStack.length;s--;)d=n.contextStack[s],d.substr(0,a.length)===a&&(n.contextStack[s]=d.replace(a,o));for(s=n.items.length;s--;)switch(l=n.items[s],l.type){case J:u(l,t,e,i,r,a,o);break;case Y:h(l.fragment,t,e,i,r,a,o);break;case Z:case H:case U:p(l,t,e,i,r,a,o)}},u=function(n,t,e,i,r,a,o){var s,l;for(s=n.attributes.length;s--;)l=n.attributes[s],l.fragment&&(h(l.fragment,t,e,i,r,a,o),l.twoway&&l.updateBindings());if(n.proxyFrags)for(s=n.proxyFrags.length;s--;)h(n.proxyFrags[s],t,e,i,r,a,o);n.node._ractive&&(n.node._ractive.keypath.substr(0,a.length)===a&&(n.node._ractive.keypath=n.node._ractive.keypath.replace(a,o)),n.node._ractive.index[t]=i),n.fragment&&h(n.fragment,t,e,i,r,a,o)},p=function(n,t,e,i,r,a,o){var s;if(n.descriptor.x&&(n.keypath&&zt(n),n.expressionResolver&&n.expressionResolver.teardown(),n.expressionResolver=new jt(n)),n.keypath?n.keypath.substr(0,a.length)===a&&(zt(n),n.keypath=n.keypath.replace(a,o),Nt(n)):n.indexRef===t&&(n.refIndex=i,n.render(i)),n.fragments)for(s=n.fragments.length;s--;)h(n.fragments[s],t,e,i,r,a,o)}}(),function(){var n,t,e,i;w=function(n){z(this,n)},w.prototype={createItem:function(r){if("string"==typeof r.descriptor)return new n(r.descriptor);switch(r.descriptor.t){case H:return new t(r);case U:return new e(r);case Z:return new i(r);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var n,t;for(n=this.items.length,t=0;n>t;t+=1)this.items[t].teardown()},getValue:function(){var n;return 1===this.items.length&&this.items[0].type===H&&(n=this.items[0].value,void 0!==n)?n:this.toString()},toString:function(){return this.items.join("")},toJson:function(){var n,t;n=this.toString();try{t=JSON.parse(n)}catch(e){t=n}return t}},n=function(n){this.type=D,this.text=n},n.prototype={toString:function(){return this.text},teardown:function(){}},t=function(n){this.type=H,_(this,n)},t.prototype={update:A,resolve:N,render:function(n){this.value=n,this.parentFragment.bubble()},teardown:function(){_t(this)},toString:function(){return void 0===this.value?"":this.value}},e=t,i=function(n){this.type=Z,this.fragments=[],this.length=0,_(this,n)},i.prototype={update:A,resolve:N,teardown:function(){this.teardownFragments(),_t(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(n){O(this,n),this.parentFragment.bubble()},createFragment:function(n){return new w(n)},toString:function(){return this.fragments.join("")}}}();var Bt=function(n,t){var e;return e={active:0,info:{i:0},push:function(){e.active+=1,e.info.i+=1},pop:function(){e.active-=1,!e.active&&e.ready&&e.complete()},complete:function(){var i,r;for(i=e.nodesToDetach.length;i--;)r=e.nodesToDetach.pop(),r.parentNode.removeChild(r);t&&t.call(n)},nodesToDetach:[]}};o=function(n){var t,e,i,r,a;if(R[n])return R[n].concat();for(i=[],r=n,e=0;r.length;){if(t=r.indexOf(".",e),-1===t)a=r,r="";else{if("\\"===r.charAt(t-1)&&"\\"!==r.charAt(t-2)){e=t+1;continue}a=r.substr(0,t),e=0}/\[/.test(a)?i=i.concat(a.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=a,r=r.substring(t+1)}return R[n]=i,i.concat()},s=Object.prototype.toString,l=function(n){return"[object Array]"===s.call(n)},h=function(n,t){return null===n&&null===t?!0:"object"==typeof n||"object"==typeof t?!1:n===t},c=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},d=function(n){return"[object Object]"===s.call(n)&&"function"!=typeof n},u=function(n){var t;if("undefined"!=typeof window){if(!n)throw new Error("No container element specified");if(n.tagName)return n;if("string"==typeof n&&(t=j.getElementById(n),!t&&j.querySelector&&(t=j.querySelector(n)),t.tagName))return t;if(n[0]&&n[0].tagName)return n[0];throw new Error("Could not find container element")}},M=function(n){var t,e,i,r;for(t=0;t<n.length;t+=1)e=n[t],i=n[t-1],r=n[t+1],(e.mustacheType===X||e.mustacheType===K)&&(n.splice(t,1),i&&r&&i.type===D&&r.type===D&&(i.value+=r.value,n.splice(t,1)),t-=1);return n},T=function(n){var t,e,i;for(i="";n.length;){if(t=n.indexOf("<!--"),e=n.indexOf("-->"),-1===t&&-1===e){i+=n;break}if(-1!==t&&-1===e)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==e&&-1===t||t>e)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=n.substr(0,t),n=n.substring(e+3)}return i},L=function(n){var t,e,i,r,a,o;for(a=/^\s*\r?\n/,o=/\r?\n\s*$/,t=2;t<n.length;t+=1)e=n[t],i=n[t-1],r=n[t-2],e.type===D&&i.type===nt&&r.type===D&&o.test(r.value)&&a.test(e.value)&&(i.mustacheType!==H&&i.mustacheType!==U&&(r.value=r.value.replace(o,"\n")),e.value=e.value.replace(a,""),""===e.value&&n.splice(t--,1));return n};var It;!function(){var n,t,e,i,r,a,o,s,l,c,h,u;It=function(n,t,e,i){var a,o;return a={pos:0,tokens:n||[],next:function(){return a.tokens[a.pos]},options:e},o=new r(a,t,i)},n=function(n,r,a){return n.next()?t(n,a)||e(n,r,a)||i(n,r,a):null},t=function(n,t){var e=n.next();return e.type===D?(n.pos+=1,new a(e,t)):null},e=function(n,t,e){var i=n.next();return i.type===nt||i.type===U?i.mustacheType===Z||i.mustacheType===W?new s(i,n,t,e):new o(i,n,t):null},i=function(n,t,e){var i,r=n.next();return r.type===tt?(i=new l(r,n,t,e),n.options.sanitize&&n.options.sanitize.elements&&-1!==n.options.sanitize.elements.indexOf(i.lcTag)?null:i):null},h=function(n){var t,e,i,r="";if(!n)return"";for(e=0,i=n.length;i>e;e+=1){if(t=n[e].toString(),t===!1)return!1;r+=t}return r},u=function(n,t){var e,i;return t||(e=h(n),e===!1)?i=n.map(function(n){return n.toJson(t)}):e},r=function(t,e,i){var r,a;for(r=this.items=[],a=n(t,e,i);null!==a;)r[r.length]=a,a=n(t,e,i)},r.prototype={toJson:function(n){var t=u(this.items,n);return t},toString:function(){var n=h(this.items);return n}},function(){var n,t,e;a=function(n,t){this.type=D,this.text=t?n.value:n.value.replace(e," ")},a.prototype={toJson:function(){return this.decoded||(this.decoded=t(this.text))},toString:function(){return this.text}},n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},t=function(t){var e;return e=t.replace(/&([a-zA-Z]+);/,function(t,e){return n[e]?String.fromCharCode(n[e]):t}),e=e.replace(/&#x([0-9]+);/,function(n,t){return String.fromCharCode(parseInt(t,16))}),e=e.replace(/&#([0-9]+);/,function(n,t){return String.fromCharCode(t)})},e=/\s+/g}(),function(){o=function(n,t,e){this.type=n.type===U?U:n.mustacheType,n.ref&&(this.ref=n.ref),n.expression&&(this.expr=new c(n.expression)),this.priority=e,t.pos+=1},o.prototype={toJson:function(){var n;return this.json?this.json:(n={t:this.type},this.ref&&(n.r=this.ref),this.expr&&(n.x=this.expr.toJson()),this.priority&&(n.p=this.priority),this.json=n,n)},toString:function(){return!1}},s=function(t,e,i,r){var a;for(this.ref=t.ref,this.indexRef=t.indexRef,this.priority=i||0,this.inverted=t.mustacheType===W,t.expression&&(this.expr=new c(t.expression)),e.pos+=1,this.items=[],a=e.next();a;){if(a.mustacheType===G){if(a.ref===this.ref||a.expr&&this.expr){e.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=n(e,this.priority+1,r),a=e.next()}},s.prototype={toJson:function(n){var t;return this.json?this.json:(t={t:Z},this.ref&&(t.r=this.ref),this.indexRef&&(t.i=this.indexRef),this.inverted&&(t.n=!0),this.expr&&(t.x=this.expr.toJson()),this.items.length&&(t.f=u(this.items,n)),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}}}(),function(){var t,e,i,r,a,o,s,d,c,p,f,g,m,v;l=function(e,i,r,o){var l,d,h,u,f,g,v;if(this.lcTag=e.name.toLowerCase(),this.priority=r=r||0,this.tag=a[this.lcTag]?a[this.lcTag]:this.lcTag,i.pos+=1,o=o||"pre"===this.lcTag,e.attrs&&(h=m(e.attrs),d=h.attrs,u=h.proxies,i.options.sanitize&&i.options.sanitize.eventAttributes&&(d=d.filter(p)),f=function(n){var t=n.name.toLowerCase();return{name:s[t]?s[t]:t,value:It(n.value,r+1)}},g=function(n){var t,e,i,a;if(a=function(){throw new Error("Illegal proxy event")},n.name&&n.value||a(),t={domEventName:n.name},e=n.value,e[0].type!==D&&a(),i=e[0].value.indexOf(":"),-1===i)e.length>1&&a(),t.name=e[0].value;else{if(t.name=e[0].value.substr(0,i),e[0].value=e[0].value.substring(i+1),e[0].value||e.shift(),1===e.length&&e[0].type===D)try{t.args=JSON.parse(e[0].value)}catch(o){t.args=e[0].value}t.dynamicArgs=It(e,r+1)}return t},d.length&&(this.attributes=d.map(f)),u.length&&(this.proxies=u.map(g)),h.intro&&(this.intro=g(h.intro)),h.outro&&(this.outro=g(h.outro))),e.selfClosing&&(this.selfClosing=!0),-1!==t.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=c[this.lcTag],this.items=[],l=i.next();l&&l.mustacheType!==G;){if(l.type===tt){if(l.closing){l.name.toLowerCase()===this.lcTag&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(l.name.toLowerCase()))break}this.items[this.items.length]=n(i,this.priority+1),l=i.next()}o||(v=this.items[0],v&&v.type===D&&(v.text=v.text.replace(P,""),v.text||this.items.shift()),v=this.items[this.items.length-1],v&&v.type===D&&(v.text=v.text.replace(q,""),v.text||this.items.pop()))}},l.prototype={toJson:function(n){var t,e,i,r,a,o;if(t={t:J,e:this.tag},this.attributes&&this.attributes.length)for(t.a={},o=this.attributes.length,a=0;o>a;a+=1){if(e=this.attributes[a].name,t.a[e])throw new Error("You cannot have multiple elements with the same name");void 0===this.attributes[a].value&&(i=null),i=u(this.attributes[a].value.items,n),t.a[e]=i}if(this.items&&this.items.length&&(t.f=u(this.items,n)),this.proxies&&this.proxies.length)for(t.v={},o=this.proxies.length,a=0;o>a;a+=1)r=this.proxies[a],t.v[r.domEventName]=r.args?{n:r.name,a:r.args}:r.dynamicArgs?{n:r.name,d:u(r.dynamicArgs.items,n)}:r.name;return this.intro&&(t.t1=this.intro.args?{n:this.intro.name,a:this.intro.args}:this.intro.dynamicArgs?{n:this.intro.name,d:u(this.intro.dynamicArgs.items,n)}:this.intro.name),this.outro&&(t.t2=this.outro.args?{n:this.outro.name,a:this.outro.args}:this.outro.dynamicArgs?{n:this.outro.name,d:u(this.outro.dynamicArgs.items,n)}:this.outro.name),this.json=t,t},toString:function(){var n,i,r,a,o,s,l,d;if(void 0!==this.str)return this.str;if(-1===e.indexOf(this.tag.toLowerCase()))return this.str=!1;if(l=h(this.items),l===!1)return this.str=!1;if(this.proxies||this.intro||this.outro)return this.str=!1;if(d=-1!==t.indexOf(this.tag.toLowerCase()),n="<"+this.tag,this.attributes)for(i=0,r=this.attributes.length;r>i;i+=1){if(o=this.attributes[i].name.toLowerCase(),-1!==o.indexOf(":"))return this.str=!1;if("id"===o||"intro"===o||"outro"===o)return this.str=!1;if(a=" "+this.attributes[i].name,void 0!==this.attributes[i].value){if(s=this.attributes[i].value.toString(),s===!1)return this.str=!1;""!==s&&(a+="=",a+=/[\s"'=<>`]/.test(s)?'"'+s.replace(/"/g,"&quot;")+'"':s)}n+=a}return this.selfClosing&&!d?(n+="/>",this.str=n):(n+=">",d?this.str=n:(n+=l,n+="</"+this.tag+">",this.str=n))}},t="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),e="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),d="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),r="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),o="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),i=function(n){for(var t={},e=n.length;e--;)t[n[e].toLowerCase()]=n[e];return t},a=i(r),s=i(o),c={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},p=function(n){return"on"!==n.name.substr(0,2)},f=function(n){return"proxy-"!==n.name.substr(0,6)},g=function(n){return"proxy-"===n.name.substr(0,6)?(n.name=n.name.substring(6),!0):!1},m=function(n){var t,e,i,r,a,o;for(i={},t=[],e=[],a=n.length,r=0;a>r;r+=1)if(o=n[r],"intro"===o.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=o}else if("outro"===o.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=o}else"proxy-"===o.name.substr(0,6)?(o.name=o.name.substring(6),e[e.length]=o):t[t.length]=o;return i.attrs=t,i.proxies=e,i},v=/^([a-zA-Z_$][a-zA-Z_$0-9]*)(?::(.+))?$/}(),function(){var n,t;c=function(e){this.refs=[],n(e,this.refs),this.str=t(e,this.refs)},c.prototype={toJson:function(){return{r:this.refs,s:this.str}}},n=function(t,e){var i;if(t.t===lt&&-1===e.indexOf(t.n)&&e.unshift(t.n),t.o)if(d(t.o))n(t.o,e);else for(i=t.o.length;i--;)n(t.o[i],e);t.x&&n(t.x,e),t.r&&n(t.r,e)},t=function(n,e){var i=function(n){return t(n,e)};switch(n.t){case ot:case st:case et:return n.v;case it:return"'"+n.v.replace(/'/g,"\\'")+"'";case rt:return"["+n.m.map(i).join(",")+"]";case ht:return("typeof"===n.s?"typeof ":n.s)+t(n.o,e);case ft:return t(n.o[0],e)+n.s+t(n.o[1],e);case gt:return t(n.x,e)+"("+(n.o?n.o.map(i).join(","):"")+")";case ut:return"("+t(n.x,e)+")";case ct:return t(n.x,e)+t(n.r,e);case dt:return n.n?"."+n.n:"["+t(n.x,e)+"]";case pt:return t(n.o[0],e)+"?"+t(n.o[1],e)+":"+t(n.o[2],e);case lt:return"❖"+e.indexOf(n.n);default:throw new Error("Could not stringify expression token. This error is unexpected")}}}()}();var Qt;!function(){var n,t,e,i,r,a,o,s,l,d,c,h,u,p,f,g,m,v,y,b,w,x,k;Qt=function(n){var t=i(n)||r(n)||a(n)||o(n);return t},k=function(n,t){var e=n.remaining().substr(0,40);throw 40===e.length&&(e+="..."),new Error('Tokenizer failed: unexpected string "'+e+'" (expected '+t+")")},n=function(n,t){var e;return e=n.str.substr(n.pos,t.length),e===t?(n.pos+=t.length,t):null},t=function(n){return function(t){var e=n.exec(t.str.substring(t.pos));return e?(t.pos+=e[0].length,e[1]||e[0]):null}},e=function(n){var t=P.exec(n.str.substring(n.pos));return t?(n.pos+=t[0].length,t[0]):null},l=t(/^[^\s=]+/),d=function(t){var i,r,a;return n(t,"=")?(i=t.pos,e(t),(r=l(t))?(e(t),(a=l(t))?(e(t),n(t,"=")?[r,a]:(t.pos=i,null)):(t.pos=i,null)):(t.pos=i,null)):null},c=t(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),h=function(t){var e,i,r,a,o;if(e=t.pos,a=n(t,".")||"",o=c(t)||"",a&&!o)return a;if(i=a+o,!i)return null;for(r=u(t);null!==r;)i+=r,r=u(t);return i},u=function(n){return p(n)||f(n)},p=t(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),f=function(n){var t=g(n);return t?"."+t:null},g=t(/^\[(0|[1-9][0-9]*)\]/),m=function(n){var t,e,i,r,a;if(t=n.pos,e="",i=w(n),i&&(e+=i),r=v(n),r&&(e+=r),e)for(a=m(n);a;)e+=a,a=m(n);return e},v=t(/^[^\\']+/),y=function(n){var t,e,i,r,a;if(t=n.pos,e="",i=w(n),i&&(e+=i),r=b(n),r&&(e+=r),!e)return"";for(a=y(n);""!==a;)e+=a;return e},b=t(/^[^\\"]+/),w=function(n){var t,e="";for(t=x(n);t;)e+=t,t=x(n);return e||null},x=function(t){var e;return n(t,"\\")?(e=t.str.charAt(t.pos),t.pos+=1,e):null},function(){var a,o,l,c;i=function(t){var i,r=t.pos;return n(t,t.delimiters[0])?(i=d(t))?n(t,t.delimiters[1])?(t.delimiters=i,{type:nt,mustacheType:K}):(t.pos=r,null):(i=a(t),null===i?(t.pos=r,null):(e(t),n(t,t.delimiters[1])||k(t,'"'+t.delimiters[1]+'"'),i)):null},r=function(t){var i,r=t.pos;return n(t,t.tripleDelimiters[0])?(i=d(t))?n(t,t.delimiters[1])?(t.tripleDelimiters=i,{type:K}):(t.pos=r,null):(e(t),i=a(t,!0),null===i?(t.pos=r,null):(e(t),n(t,t.tripleDelimiters[1])?i:(t.pos=r,null))):null},a=function(t,i){var r,a,d,c,u,p,f;if(r=t.pos,a={type:i?U:nt},!i&&(d=o(t),a.mustacheType=d||H,d===X&&(p=t.remaining(),f=p.indexOf(t.delimiters[1]),-1!==f)))return t.pos+=f,a;if(e(t),n(t,"("))e(t),c=s(t),e(t),n(t,")")||k(t,'")"'),a.expression=c;else if(a.ref=h(t),!a.ref)return t.pos=r,null;return u=l(t),null!==u&&(a.indexRef=u),a},c={"#":Z,"^":W,"/":G,">":Y,"!":X,"&":H},o=function(n){var t=c[n.str.charAt(n.pos)];return t?(n.pos+=1,t):null},l=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){var r,o,s,l,d,c,h,u,p,f,g,v,b,w;a=function(n){return r(n)||o(n)},r=function(t){var e,i,r;return e=t.pos,n(t,"<")?(i={type:tt},i.name=s(t),i.name?(r=l(t),r&&(i.attrs=r),n(t,"/")&&(i.selfClosing=!0),n(t,">")?i:(t.pos=e,null)):(t.pos=e,null)):null},o=function(t){var e,i;if(e=t.pos,!n(t,"<"))return null;
if(i={type:tt,closing:!0},!n(t,"/"))throw new Error("Unexpected character "+t.remaining().charAt(0)+' (expected "/")');if(i.name=s(t),!i.name)throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected tag name)");if(!n(t,">"))throw new Error("Unexpected character "+t.remaining().charAt(0)+' (expected ">")');return i},s=t(/^[a-zA-Z][a-zA-Z0-9]*/),l=function(n){var t,i,r;if(t=n.pos,e(n),r=d(n),!r)return n.pos=t,null;for(i=[];null!==r;)i[i.length]=r,e(n),r=d(n);return i},d=function(n){var t,e,i;return(e=c(n))?(t={name:e},i=h(n),i&&(t.value=i),t):null},c=t(/^[^\s"'>\/=]+/),h=function(t){var i,r;return i=t.pos,e(t),n(t,"=")?(r=g(t)||b(t)||u(t),null===r?(t.pos=i,null):r):(t.pos=i,null)},f=t(/^[^\s"'=<>`]+/),p=function(n){var t,e,i;return t=n.pos,(e=f(n))?(-1!==(i=e.indexOf(n.delimiters[0]))&&(e=e.substr(0,i),n.pos=t+e.length),{type:D,value:e}):null},u=function(n){var t,e;for(t=[],e=i(n)||p(n);null!==e;)t[t.length]=e,e=i(n)||p(n);return t.length?t:null},v=function(n){var t,e,i;return t=n.pos,(e=m(n))?(-1!==(i=e.indexOf(n.delimiters[0]))&&(e=e.substr(0,i),n.pos=t+e.length),{type:D,value:e}):null},g=function(t){var e,r,a;if(e=t.pos,!n(t,"'"))return null;for(r=[],a=i(t)||v(t);null!==a;)r[r.length]=a,a=i(t)||v(t);return n(t,"'")?r:(t.pos=e,null)},w=function(n){var t,e,i;return t=n.pos,(e=y(n))?(-1!==(i=e.indexOf(n.delimiters[0]))&&(e=e.substr(0,i),n.pos=t+e.length),{type:D,value:e}):null},b=function(t){var e,r,a;if(e=t.pos,!n(t,'"'))return null;for(r=[],a=i(t)||w(t);null!==a;)r[r.length]=a,a=i(t)||w(t);return n(t,'"')?r:(t.pos=e,null)}}(),function(){o=function(n){var t,e;return t=n.str.length,[n.delimiters[0],n.tripleDelimiters[0],"<"].forEach(function(e){var i=n.str.indexOf(e,n.pos);-1!==i&&(t=Math.min(i,t))}),t===n.pos?null:(e=n.str.substring(n.pos,t),n.pos=t,{type:D,value:e})}}(),function(){var i,r,a,o,l,d,h,u,p,f,g,v,b,w,x,_,A,N,z,O,E,C,S,M,T,L,j;s=function(n){var t,e;return t=n.pos,e=f(n)},i=function(t){var r,a,o,l;if(r=t.pos,e(t),o=s(t),null===o)return null;if(a=[o],e(t),n(t,",")){if(l=i(t),null===l)return t.pos=r,null;a=a.concat(l)}return a},o=function(t){var i,r;return i=t.pos,n(t,"(")?(e(t),(r=s(t))?(e(t),n(t,")")?{t:ut,x:r}:(t.pos=i,null)):(t.pos=i,null)):null},l=function(n){return A(n)||x(n)||o(n)},d=function(n){var t,e,i;if(t=l(n),!t)return null;if(e=_(n),!e)return t;for(;null!==e;)i={t:ct,x:t,r:e},t=i,e=_(n);return i},h=function(t){var r,a,o,s;return(a=d(t))?(r=t.pos,n(t,"(")?(e(t),o=i(t),e(t),n(t,")")?(s={t:gt,x:a},o&&(s.o=o),s):(t.pos=r,a)):a):null},r=function(t,i){return function(r){var a,o;return n(r,t)?(a=r.pos,e(r),o=s(r),o||k(r,"an expression"),{s:t,o:o,t:ht}):i(r)}},function(){var n,t,e,i,a;for(i="! ~ + - typeof".split(" "),a=h,n=0,t=i.length;t>n;n+=1)e=r(i[n],a),a=e;u=a}(),a=function(t,i){return function(r){var a,o,l;return(o=i(r))?(a=r.pos,e(r),n(r,t)?(e(r),l=s(r),l?{t:ft,s:t,o:[o,l]}:(r.pos=a,o)):(r.pos=a,o)):null}},function(){var n,t,e,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=u,n=0,t=i.length;t>n;n+=1)e=a(i[n],r),r=e;p=r}(),f=function(t){var i,r,a,o;return(r=p(t))?(i=t.pos,e(t),n(t,"?")?(e(t),(a=s(t))?(e(t),n(t,":")?(e(t),o=s(t),o?{t:pt,o:[r,a,o]}:(t.pos=i,r)):(t.pos=i,r)):(t.pos=i,r)):(t.pos=i,r)):null},g=t(/^[0-9]+/),v=t(/^[eE][\-+]?[0-9]+/),b=t(/^\.[0-9]+/),w=t(/^(0|[1-9][0-9]*)/),x=function(t){var e,i,r;return i=n(t,".")||"",e=c(t)||"",r=i+e,r?{t:lt,n:r}:null},_=function(t){var i,r,a;if(i=t.pos,e(t),n(t,".")){if(e(t),r=c(t))return{t:dt,n:r};k("a property name")}return n(t,"[")?(e(t),a=s(t),a||k("an expression"),e(t),n(t,"]")||k('"]"'),{t:dt,x:a}):null},A=function(n){var t=O(n)||z(n)||S(n)||E(n)||C(n)||N(n);return t},N=function(t){var i,r;return i=t.pos,e(t),n(t,"[")?(r=expressionList(t),n(t,"]")?{t:rt,o:r}:(t.pos=i,null)):(t.pos=i,null)},z=function(n){var t=n.remaining();return"true"===t.substr(0,4)?(n.pos+=4,{t:ot,v:"true"}):"false"===t.substr(0,5)?(n.pos+=5,{t:ot,v:"false"}):null},j=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,S=function(n){var t,e,i;return t=n.pos,(e=c(n))?(i=j.exec(e))?(n.pos=t+i[0].length,{t:st,v:i[0]}):(n.pos=t,null):null},O=function(n){var t,e;return t=n.pos,(e=b(n))?{t:et,v:e}:(e=w(n),null===e?null:(e+=b(n)||"",e+=v(n)||"",{t:et,v:e}))},C=function(t){var i,r;return i=t.pos,e(t),n(t,"{")?(r=M(t),e(t),n(t,"}")?{t:at,m:r}:(t.pos=i,null)):(t.pos=i,null)},M=function(t){var e,i,r,a;return e=t.pos,r=T(t),null===r?null:(i=[r],n(t,",")?(a=M(t),a?i.concat(a):(t.pos=e,null)):i)},T=function(t){var i,r,a;return i=t.pos,e(t),r=L(t),null===r?(t.pos=i,null):(e(t),n(t,":")?(e(t),a=s(t),null===a?(t.pos=i,null):{t:KEY_VALUE_PAIR,k:r,v:a}):(t.pos=i,null))},L=function(n){return c(n)||E(n)||O(n)},E=function(t){var e,i;return e=t.pos,n(t,'"')?(i=y(t),n(t,'"')?{t:it,v:i}:(t.pos=e,null)):n(t,"'")?(i=m(t),n(t,"'")?{t:it,v:i}:(t.pos=e,null)):null}}()}();var Rt;!function(){var n,t,e,i;n=/^\s*$/,t=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,e=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,Rt=function(e,r){var a,o,s,l;return r=r||{},t.test(e)?i(e,r):(r.sanitize===!0&&(r.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),a=Pt(e,r),r.preserveWhitespace||(l=a[0],l&&l.type===D&&n.test(l.value)&&a.shift(),l=a[a.length-1],l&&l.type===D&&n.test(l.value)&&a.pop()),o=It(a,0,r,r.preserveWhitespace),s=o.toJson(),"string"==typeof s?[s]:s)},i=function(n,i){var r,a,o,s,l,d;for(o={},r="",a=n;l=t.exec(a);){if(s=l[1],r+=a.substr(0,l.index),a=a.substring(l.index+l[0].length),d=e.exec(a),!d||d[1]!==s)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");o[s]=Rt(a.substr(0,d.index),i),a=a.substring(d.index+d[0].length)}return{template:Rt(r,i),partials:o}}}();var Pt=function(n,t){var e,i,r,a,o;for(t=t||{},e={str:T(n),pos:0,delimiters:t.delimiters||["{{","}}"],tripleDelimiters:t.tripleDelimiters||["{{{","}}}"],remaining:function(){return e.str.substring(e.pos)}},i=[];e.pos<e.str.length;){if(r=Qt(e),null===r&&e.remaining())throw a=e.str.substr(0,e.pos).substr(-20),20===a.length&&(a="..."+a),o=e.remaining().substr(0,20),20===o.length&&(o+="..."),new Error("Could not parse template: "+(a?a+"<- ":"")+"failed at character "+e.pos+" ->"+o);i[i.length]=r}return L(i),M(i),i};t.prototype=F,t.adaptors=$,t.eventDefinitions=B,t.partials={},t.easing=e,t.extend=i,t.interpolate=r,t.interpolators=a,t.parse=Rt,t.transitions=I,"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("Ractive",[],function(){return t}):n.Ractive=t}(this),define("controllers/Slide",["Ractive"],function(Ractive){var Slide=function(data,el){var stages,fn,i;if(this.html=data.slide,this.css=data.styles,this.data=data.data,stages=data.stages,this.el=el,void 0!==stages)if(isNaN(+stages))try{fn=eval("("+stages+")"),this.stages=fn(this),this.numStages=this.stages.length}catch(err){console.error(err.message||err)}else this.numStages=stages;else this.numStages=0;if(this.stages)for(i=this.numStages;i--;)"function"==typeof this.stages[i]&&(this.stages[i]=this.stages[i](this))};return Slide.prototype={enter:function(n){var t,e;if(document.getElementById("SlideStyle").innerHTML=this.css||"",this.ractive=new Ractive({el:this.el,template:this.html,data:this.data}),n){if(this.stages)for(e=this.stages.length,t=0;e>t;t+=1)this.stages[t]&&this.stages[t].redo?this.stages[t].redo(this.ractive,this):this.stages[t]&&this.stages[t].do&&this.stages[t].do(this.ractive,this);this.ractive.set("stage",this.numStages-1),this.currentStage=this.numStages-1}else this.stages&&this.stages[0]&&this.stages[0].do(this.ractive,this),this.ractive.set("stage",0),this.currentStage=0},exit:function(){var n=this;return new Promise(function(t){n.ractive.teardown(t.resolve)})},next:function(){return this.currentStage<this.numStages-1?(this.currentStage+=1,this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].do(this.ractive,this),this.ractive.set("stage",this.currentStage),!0):!1},prev:function(){return this.currentStage>0?(this.stages&&this.stages[this.currentStage]&&this.stages[this.currentStage].undo(this.ractive,this),this.currentStage-=1,this.ractive.set("stage",this.currentStage),!0):!1}},Slide}),define("controllers/controller",["./router","./Slide"],function(n,t){var e,i,r,a,o,s;return i=37,r=38,a=39,o=40,s=function(n){for(var t=n.length;t--;)(new Image).src=n[t]},e=function(n,e,i,r){var a,o;o=e[i],o&&(a=new t(o,n.el),a.enter(r),n.currentSlide=a,o.images&&s(o.images)),e[i+1]&&e[i+1].images&&s(e[i+1].images)},function(t){var s,l,d,c;s=t.data.slides,t.state.observe("slideNum",function(n,i){var r=1===i-n;t.currentSlide?t.currentSlide.exit().then(function(){e(t,s,n,r)}):e(t,s,n,r)}),c=function(){var n=t.state.get("slideNum");s[n+1]&&t.state.add("slideNum")},d=function(){var n=t.state.get("slideNum");s[n-1]&&t.state.subtract("slideNum")},l=function(n){n.which===o||n.which===a?(n.preventDefault(),t.currentSlide.next()||c()):(n.which===r||n.which===i)&&(n.preventDefault(),t.currentSlide.prev()||d())},window.addEventListener("keydown",l),n(t)}}),define("app",["domReady","Statesman","data","controllers/controller"],function(n,t,e,i){var r;return r={data:e,state:new t},n(function(){r.el=document.getElementById("container"),/chrome/i.test(navigator.userAgent)?i(r):r.el.innerHTML="<p class='browser-warning'>This presentation requires browser features that only currently exist in <a href='http://google.com/chrome'>Chrome</a>. Sorry.</p>"}),window.app=r,r}),function(){require.config({baseUrl:"js",paths:{Ractive:"lib/Ractive",Statesman:"lib/Statesman"},urlArgs:"bust="+Date.now()}),require(["app"])}(),define("main",function(){})}();